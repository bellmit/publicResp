FORMAT: 1A
HOST: http://blog.acme.com

# Insta HMS 12.3 Release Notes

## New Features [/new-features]

### Hamburger Menu UI Change [GET]

As can be identified from the screenshot below the hamburger menu is slightly modified to differentiate the Modules from the Reports and a universal search to land on a screen option directly.

![](media/image1203_6.png)

### Introduction of Hospital Role-wise billing order controls [GET]

This change has been introduced to restrict direct ordering of certain clinical services such as radiation therapy, certain lab/radiology tests, chemotherapy, physical therapy etc. without a valid prescription, i.e. they can only be performed based on the order of a qualified physician who is responsible for providing the patient's diagnosis and other clinical justification for the test or therapy. This feature controls hospital users while treating patients to ensure that they do not add any orderable items which require doctor prescriptions compulsorily.

#### Hospital Role Master

Hospital role master is upgraded to the new user interface which allows for the Admin Users to set up the list of hospital billable items which are allowed for direct ordering by each Hospital Role.

![](media/image1203_16.png)

#### Order Controls Set up

Order Controls can be configured by using Service Sub Groups + Individual items, Users can order only those list of hospital items defined in this master, all other hospital items are restricted in the billing order screen.

-   **Order Control - Service Sub Groups**: Allowing to add a list of all Service Sub Groups, which means all the items in a particular service sub group will be available for order.

-   **Order Control - Items**: Allowing to add a list of all the individual items which are allowed to order by hospital role users. Item can also search by order alias code

If any item exists in both Service Sub Groups and Items definitions, then it gives appropriate message while saving the definition.

![](media/image1203_18.png)

![](media/image1203_2.png)

#### User Master

Hospital role can be assigned to Users in User Master, which allows connecting multiple hospital roles to single user.

#### Order Screen Changes

-   Billing Order Control Definition is only for Direct Order through Order Section. Only assigned list of Tests + Services + Operations + Packages + Doctor + Equipments available for direct ordering

-   User can convert doctor prescriptions to Billing order irrespective of Billing Order Control Definition

-   If any user doesn't have hospital role/any definition in the hospital role master/, then she/he can order any items.

-   If any user associates with multiple hospital roles, the will get list of items of union of all the hospital roles.

-   These order controls are applied in OP Reg Order, OP Order, IP Order, Lab Order, Radiology Order and Service Order Screens.


### IP-EMR Enhancements to support multi-user and "Auto-Save" functionality [GET]

As Inpatient Care is provided and managed by multiple caregivers, it becomes essential for allowing the medical records to be available for parallel management by more than one user. Multi user and auto save feature enables more than one user to collaborate with patient IP EMR, it allows few users to review and at the same time allows few users also to update.

-   When a User is working on a one section the same section is locked for the other user. The lock gets removed when the other user saves the section or its autosave. (NOTE: Notes can be created in parallel.)

![](media/image1203_26.png)

-   When the User leaves the section auto save of the section is triggered and the user is notified with "DATA SAVED" message at section level header.

![](media/image1203_15.png)

-   All fields in section level are validated at the time of auto save too.

-   Once the message is saved it is reflected for other users as well real-time.

#### Last Update user and time information is available at the section level.
![](media/image1203_37.png)

-   When two users try to save same section at the same time only one user will be able to save the information successfully the other user is notified with the message that section was saved by some other user and he/she has to redo and save the section again.
![](media/image1203_28.png)

With the introduction of Auto save few system sections behave in below manner:

-   Notes: Every Notes is treated as Individual information so the notes section is not locked for parallel use.

-   Physician Order: In Physician order is not auto-saved as the prescriber might need to review and save the information after adding.

-   Customise sections in the IP EMR doesn't allow the other user to save or make any changes in the IP EMR.

![](media/image1203_24.png)

Along with Multiuser and Auto save feature IP EMR is enhanced with few other functionalities.

-   At IP EMR level

    -   it can be discarded before save of any section

    -   It can be saved and Finalised after the patient is clinically discharged.

    -   It can be re-open with reason and the information can be updated even when the visit is inactive.

-   In IP EMR at section level (for applicable sections)

    -   Each section can be finalised and revoked. Finalised section will not be allowed to make changes till the same is revoked.

### Medication Administration Record (MAR) V1 [GET]

<!-- Check placement -->
#### Enhancing the IV Prescription in Physician Order

In Physician order new classification of Medication is added to classify Normal Medicine, IV and Additive. Medicine which is classified as IV additional information like flow rate, Infusion period and IV Instructions are allowed to capture

-   IV Medication will have provision to start, stop, pause or restart administration. However the flow rates and infusion period will remain only for information purpose.

-   Titrations of IV medication need to be created as two different medications.

-   Medicine also can be classified as 'Additive'.

#### Introducing the Medication Administration Record - New UX With Additional Functionalities

With v12.3, Insta introduces Medication Administration in the New UX with additional features and functionality.

-   The current Medication Administration Activity is removed from the Patient Ward Activity and made available through Medication Administration Record (Most commonly used Format).

-   The functionality of the MAR are as listed below:

    -   New Serving Frequency made available to support ward medication rounds process.

    -   New Medication Administration chart which helps easy review of medication plan and Administration status.

    -   Enhanced Physician order to prescribe IV and Additive with additional information apart from Normal Medicine prescription.

    -   Enhanced Auto setup recommendation by the system based on the physician order and Serving Frequency.

    -   Enhanced Administration experience from the current administration process in Patient ward Activity

![](media/image1203_33.png)

##### New Serving Frequency

New Serving Frequency concept is introduced to publish common medication serving time for one more recurrence frequency used in Physician Order.

-   It enables the Hospital to implement medication serving rounds process in a more streamlined or to comply with the floor process.

-   Considering Practical needs on late recording new preference allowed "Medication Serving Window " and "Late serving Window"


##### Enhanced Physician order to prescribe IV

Physician order Enhanced to mark IV and Additive medications.

-   For IV medication the user allowed to mention "Flow Rate" and "Infusion Period" along with administration instructions

![](media/image1203_32.png)

##### Enhanced Auto setup recommendation

Current creation of Ward Activity based on the Frequency and Duration for a medicine item in Physician order is modified to support the Auto setup functionality of the MAR

-   Once the item is saved in the physician order, its reflected in the New MAR with auto setup recommended by the system.

-   PRN Medications frequency is restricted with Max Dosage per day and the same is validated (Validation works only for Granularunit)

    -   PRN Medication allowed to serve "as and when needed"

    ![](media/image1203_27.png)

-   STAT Medications frequency and duration is restricted to once and allowed to serve on current Medication serving window.

    ![](media/image1203_21.png)

-------

MAR will have details of the medication prescribed with the setup schedule, it highlights the medicine activity pending, Administered, Miss and late servings. Also it has highlight on the current serving time.

Filters are available to view:

-   All Medication - List all medication which is prescribed to the patient for the visit.

-   Active Medication - Default filter, list all current medications which patient is on.

-   Completed Medication - List all the medication which are course completed for the visit.

-   Discontinued Medication - List the medication which are discontinued for the current visit.

Navigation option allowed to move to previous hours, next hours and come back to current hour.

List of medications are available with Frequency, Duration, Instruction and Prescribing details. Also has option to initiate setup, for the rest of the period if the setup is done based on the "Max Number of Medication Setup days" if this preference is not available then setup done for the whole duration. Setup starts from the specified start date and time.

-   For Duration with To date the Setup is done for all days if "Max Number of Medication Setup days" is not available

-   For Occurrence the duration is calculated based on the occurrence happening period.

-   For Till Discontinue frequency it's always set for n days if " Max Number of Medication Setup days" not available

-   Max Number of Medication Setup days".

The entire Medication prescribed for the patient are shown in Medication administration chart with plan and administration details in timeline view.

-   Active Medication is defaultly filtered.

-   Current hour is shown in the center by default with current Serving Period is always highlighted.

-   Normal Medication & Additive

    -   To be administered during the current serving window is always highlighted with Pending option (highlighted in Blue) to act upon.

    -   Pending action planned are highlighted but cannot be acted.

    -   Past Medication serving activity is listed as

        -   Done - if the medicine is administered to patient in planned serving period

        -   Late serving - if the medicine is administered to patient in late serving period

        -   Miss - if the Medicine is not Administered

![](media/image1203_19.png)

-   IV Medication

    -   The planned & Missed activity of Administration appears similar to Normal Medicination & Additive

    -   Upon Administration of IV Medication

        -   The Administration can be started, Paused, Re-started or Stopped. Relevant states of IV Administration or highlighted in the MAR.

    -   If the IV Medication is Started till it stopped , "Update IV" link will be available in the current serving window to update the activities throughout the administration period

-   PRN Medication

    -   PRN Medication are prescribed with max doses per day, Till the Max Dose is administered option to administer will be available as "PRN" in current serving window

        -   Once Administered it shows done status on the administered hour

    -   All the activity status have relevant information displayed in call outs

    ![](media/image1203_25.png)

Medication Administration pop-up is invoked by selecting any of the pending activity. The Pop-up list all the medications which are pending to be administered during the particular administration window.

-   It lists the medications with dose and instruction details. And fields to record batch number, administration date and time, reasons and remarks during administration.

-   Also it has option to mark the medication is administered from Patient stock or ward stock.

    -   Once the patient /ward stock option is selected batch number are listed from the patient issue made to the patient. Allows the user to select the information.

        -   Free key in of batch number (administration from Patient stock) is deprecated in this version of MAR, soon will be introduced in an enhanced way.

    -   Upon selection of batch number expiry date is defaulted.

    -   Once the medication is administered the administration date and time are defaulted , however the user allowed to backdate the serving date & time.

    -   For IV Medications

        -   The Flow rate and Infusion period remains only for information purpose , no validation would be implied during administration.

        -   The IV Administration can be started, Stopped, Paused or re-started at different points in time.

        -   Site of administration, can be picked up from the list.

        -   When the Additive is administered the same reflects on the active IV Line.

        ![](media/image1203_36.png)

### Notifications on Diagnostic Report Readiness to the Prescribing/Admitting Doctor [GET]

Communication to act and highlighting on priority plays a vital role in patient car , as one of the steps Notification frameworks in the system is being enhanced. Notification on Diagnostic report readiness to the Prescribing doctor is introduced in the newer release.

Notification are Enabled or disabled in the Top Navigation bar based on the module subscriptions.

![](media/image1203_30.png)

When the Notifications module is enabled, The Number of Diagnostic Report Pending for review is highlighted.

Upon selection of Diagnostic Report Review Notification pop-up opens with details of the report to be reviewed.

-   Report listed on the left side , upon selection of each report the report is listed on the right side. Report format would be as seen in Patient EMR

-   The User would be allowed to mark the report as reviewed and enter remarks if needed.

![](media/image1203_34.png)

_Note : Currently the Diagnostic Notification for the Reports sign-off by the external system is not available as part of 12.3, its expected to be enhanced in one of the Upcoming versions_

#### Broadcast System Messages

-   System Message is Broadcasted to all the users at the time of user logins or any new system message is created

-   Based on the severity setting (Information, Warning and Alert) the color(Blue, Green and Red) of the broadcast message background color to change

-   User would be able to close the message display panel by selecting the close button.

![](media/image1203_23.png)

-   The Display Panels is controlled by Master settings for the order of the message display.

![](media/image1203_9.png)

### Receipts Model 2.0 [GET]

To overcome the issues of Financial Accounting posting and a model lacunae, there are some major changes with respect to deposit set off, Write off and Reward points being handled. In the earlier versions it was difficult to trace the deposit set off or deposit refund against a particular deposit.

Now all are considered as Payment Modes and we have new payment modes namely, General Deposit, IP Deposit, Package Deposit Reward Points and Write Off. The definition for each of these payment types are explained later in this notes.

While settling the bill, you can select appropriate payment modes and settle the bill. The deposit set Off would happen against the individual deposits on FIFO (First In First Out) basis automatically, likewise, the deposit refund happen against the individual deposits on LIFO (Last In First Out) basis automatically.

#### Deposit Collection

Deposit collection is the same as earlier workflow. If the deposit is collected for Hospital or Pharmacy or Both are considered as "General Deposit" payment mode. In the payment screen, the sum off all these deposit types are shown as "General Deposit". If you collect the deposit for IP, then this deposit is considered as "IP Deposit" and shown as "IP Deposit" as payment mode in the payment screen.

All the deposit information are shown on the Deposit Collection / Refund Screen.

![](media/image1203_7.png)

#### Deposit Refund

Deposit Refund can be done in the deposit collection or billing screen. System will automatically refund from the LIFO (Last In First Out) basis. For the package deposit refund or IP deposit refund, please ensure to select Package or "Application to IP" respectively.

#### Deposit Set Off

The Billing screen will show the deposit information as shown on the screen:

![](media/image1203_8.png)

Based on the deposit collected, the Paymode Mode list on the Billing screen will have "General Deposit", "IP Deposit" and "Package Deposit". If you want to do the set off the deposit, then select the Payment Type as "Settlement" and select the appropriate Deposit Payment Modes ("General Deposit", "IP Deposit" or "Package Deposit")

![](media/image1203_14.png)

##### Additional Information

The multiple payment mode settlement remains the same as previous versions.

If the Payment Type is "Advance" then the Pay Mode is any of the deposit payment modes then the system will not allow to proceed further:

![](media/image1203_5.png)

If there is a deposit available and user is trying to settle the bill against cash/cheque/card, then the system will show the alert whether the deposit to be used or user wants to proceed with different type of settlement.

![](media/image1203_17.png)

While doing the refund from the deposit settlement, the system ensures that the user cannot refund more than the settled amount.

#### Doctor Scheduler: Introduction of modified pop-ups with changes to capturing/viewing appointment details and for booking an appointment for a new non-MR No based contact patient [GET]

As is made available in the screenshot the popups on the doctor scheduler have been changed both for capturing or viewing appointment details and for booking an appointment for a new non-MR No based contact patient. The new construct of the pop-up continues to have the universal search for the patient by MR No, Mobile Number, name, Govt ID etc but has some fields moved around such as patient demographic details are completely displayed like the Title, First and Last Name, Gender, Date of Birth, Age, Email ID which helps the Front Desk communicate on protocols based on age, gender etc.

![](media/image1203_38.png)

Since the details of a new non-MR No based contact of a patient is also captured using the same pop-up those details can be done as the first mobile number field doubles up as a search and entry only field as well as well as capturing additional contact demographic information such as Title, First and Last Name, Gender, Date of Birth, Age, Email ID which helps the Front Desk communicate on protocols based on age, gender etc to a non-registered patient as well.

![](media/image1203_12.png)

Most of the appointment details related fields are retained such as Visit Type, Consultation Type, Appointment Status, Duration, Complaint, Prescribing Doctor, Appointment Source, Remarks, Sponsor Details have only been rearranged.

## Minor Enhancements [/minor-enhancements]

### Consultation / Triage / Nurse Assessment [GET]

#### Allergies: "No Allergies" text is renamed as "No Known Allergies"

In Allergy pop-up while recording allergy one of the option listed is "No Allergies" which is replaced with "No Known Allergies" which is more appropriate text.

![](media/image1203_13.png)

#### OP Consultation: allows a prescription to be specified to be done on a future date

In OP Management section while ordering for Investigation , Services,Consultation ,Order set or Surgery the doctor would be able to prescribe for future date by selecting a Start Date introduced under this options

The Start Date cannot be Backdated, it accepts only future dates.

![](media/image1203_29.png)

#### OP Consultation: New "Immunization Up-To-Date" section made available

Under Consultation Forms "Immunization Up-To-Date" sections can be added and managed, earlier it was allowed to be managed along with Triage/Nurses Assessment Forms alone.

![](media/image1203_20.png)

#### OP Consultation: Management section changes

The medicines listed in the management section are now only displayed if its item category is enabled as "prescribable".

A new field is added to the Item Category master to filter only clinical (Prescribable) items to be listed while prescribing under medicine in OP Management and IP Physician Orders.

![](media/image1203_10.png)

#### OP Consultation: Diagnosis prescriptions now have additional fields to capture Clinical Notes and Clinical Justification for the prescription

New Options are made available while prescribing Investigation

![](media/image1203_22.png)

##### Clinical Note For Conduction

-   Any specific Queries or inputs obtained from patient and about the patient will be added here.

-   This Queries to collected can be pre-filled in the Diagnostic Master along with the test

![](media/image1203_31.png)

##### Clinical Justification for this Prescription

-   Based on the test order user will be mandated to capture the justification for prescribing the test.

-   While order certain test if the justification information is mandatory it can be marked in the test master under "Mandate Clinical Info".

### Reports [GET]

#### Diagnostic Report Builder - Two New token Signed off Date and Time Introduced

In The Existing Diagnostic Report Builder two new date & Time tokens are introduced, to have more information and filtering options

-   Signed off Date

-   Signed off time

![](media/image1203_35.png)

#### Emailed Reports now are SSL/TLS encrypted

-   The email reports get triggered at 12:15 am but used to based on the generic preferences based configuration which is now migrated to message dispatcher configuration.

-   Previously there was no form of encryption and now upgraded to be encrypted. With customers having servers which have SSL/TLS encryption this is now a must have need.

### Payments [GET]

#### Paid Payments worklist now has a center filter

Paid Payments-> Payment vouchers are now filtering based on the center in which user logged in. For corporate users, can view the payment vouchers of all the centers from default center and can filter particular center's payment voucher by login to respective center.

### Scheduler [GET]

#### Today's / Search Appointments worklist

Today's / Search Appointments worklist has the appointment remarks column displayed.


## Features for UAE [/uae-specific-changes]

### Introduction of E-Claim History [GET]

In earlier versions of Insta there was no tracking of the history of e-claim submissions and only reflected the latest data in the system. If any correction was made to any claim in order to resubmit, it would impact all previous submission of same claim. Further it did not track how much was the originally submitted/resubmitted amounts in all subsequent submissions. To solve for this, Claim History is now developed in Insta which tracks the history of all e-claim submissions and remittances across multiple submissions.

#### Backend Tables

There are two new back end tables have been introduced to store e-claim submission details, such as claim_submission_history -> it stores claim level details & claim_activity_history -> it stores activity level details, these tables are also maintain the remittances received towards each submission.

#### E-Claim Activity History View

E-claim Activity History view is now built in the claim reconciliation screen, which gives the context of all the submissions/remittances for each activity. It shows following data, Type of transaction, Submission ID/Payment reference, Submission Date/transaction Date, Activity ID, Qty, Claim Amount, Vat Amount, Vat%, Approved Amount, Status, Denial Code, Resubmission Type

![](media/image1203_39.png)

#### Claim History Report Builder

Claim History Report Builders have been introduced, which is placed under Insurance reports group. This report builder provides claim level submitted, remitted & Denied amount details. However, it shows only no. of 3 submissions /3 remittances /2 take-back of a claim as it is the standard submission process in UAE.

![](media/image1203_1.png)

### Tracking Insurance Eligibility Authorization [GET]

From September 1 2017, as per HAAD regulations, patients seeking a second or subsequent outpatient appointment for the same specialty within 21 days, without doctor referral, will only be covered if the patient obtains pre-approval.

Following above HAAD standard, Now some of the insurance companies, like NAS, Daman have made the changes on their eligibility portal and started mandating the submission of eligibility requests via their eligibility portal and system will offer health providers with a reference number, this should be mentioned in the claims submitted or even tracked for further audit.

The Following enhancements have been done to enable customers to comply with insurance companies regulation with respect to maintaining eligibility reference in the system/ submitting in the claim.

#### Sponsor/TPA Master

Two attributes are introduced, such as Eligibility Authorization and Eligibility Authorization in the XML, this can be configured at each health authority level in the sponsor/tpa master

Eligibility Authorization is to enable all authorization relevant fields in the OP Registration screen, which has two values i) Enabled ii) Disabled.

Eligibility Authorization in the XML is to enable authorization reference in the e-claim xml, which has three values i) Disabled, ii) As Observation iii) EligibilityID payer

As observation -> it reports eligibility reference as observation for consultation billed.

EligibilityID payer -> it reports eligibility reference as separate xml element called EncounterEligibilityIDPayer

![](media/image1203_4.png)

#### OP Registration

Further to have enabled eligibility authorization for any sponsor in particular health authority, two fields such as Eligibility Authorization Status and Authorization Remarks will get enabled in the Op registration screen for all the centers which are come under that particular health authority.

![](media/image1203_3.png)

#### Eligibility Authorization Status

It has three values such as; Taken, Not Taken, Not Applicable. When eligibility authorization status is selected as Taken, then Reference Number gets enabled and enforcing to enter Reference no, otherwise,authorization remarks will be enabled as optional

![](media/image1203_11.png)

#### E-Claim XML

When Eligibility Authorization in the XML set as 'As observation', then below is the result in the xml

```xml
    <Type>Text</Type>
    <Code>Observation Note</Code>
    <Value>3543645</Value>
    <ValueType>TEXT</ValueType>
```

When Eligibility Authorization in the XML set as 'EligibilityID payer', then below is the result in the xml

```xml
    <EncounterEligibilityIDPayer>ReferenceID</EncounterEligibilityIDPayer>
```

in the encounter section.

## Bugs fixes [/bug-fixes]

## Features in 12.3.1 [/cig-release-120301]

### Billing / Registration [GET]

#### Introduction of Pending Prescription pop-up on the Registration/Billing Orders screen

On the Registration and Billing Order screens, the 'Order from Pending Prescription' link is now converted to a modal, where in by default it will display all the Pending Prescriptions raised, but pending to be converted to an order. This feature is to allow users to select and order the prescribed items for a patient.

![](media/image120301_4.png)

The Prescriptions will appear in the list immediately after an OP Consultation is saved with prescribable activities such as. Laboratory/Radiology investigations, Services, Doctor Referrals, which is patient specific and will be available across all the centers.

-   Showing item type, item name, item quantity, start date, exclusion status, prior auth status and prior auth validity

-   Ordering is allowed if current date>=prescription start date of a prescribed item given

-   if multiple quantity prescribed, then prescription will be exploded it into separate rows as many as quantity prescribed, and each row will be having same exclusion, prior auth details.

-   It shows exclusion status overridden by Doctor, otherwise showing exclusion status as per insurance plan master

-   Hiding the pending prescription link when all prescription items are added to order grid

    ##### Prescription Validity

    In Generic Preference master, a preference is introduced to set default prescription validity in Pending Prescription list, default validity of prescriptions is for 30 days

    ![](media/image120301_5.png)

-   if prior-auth validity is greater than prescription validity, those items will be available in 'order pending prescription list' until prior auth validity gets expired.

-   if Pre-auth validity gets expired before prescription validity defined, it will still be available as long as prescription validity expired as it can be billed as cash item,Once prior auth validity expired, item can be billed to only cash bill.

#### Cancellation of Ordered Item from Default Center

It is now allowed to cancel billing order from Default Center. but all other actions such as edit link , search field, pending presc link, active pre-auth approvals, order id link etc. are still disabled in the order screen from default center.

### Insurance [GET]

#### Accumed Integration (applicable to UAE customers only as an add-on integration)

Insta is now integrated with Accumed a leading revenue cycle management system, which helps public and private healthcare providers in medical documentation, billing cycle's enhancement, revenue optimization, and collections. Its quality management system identifies and catches errors before claims are delivered to the payer for processing.

The objective of this feature is to generate and exporting our claims as per the claim format what accumed wants. These claims may be edited in the Accumed system and the user may make changes to ensure that the activities/codes are proper so that the insurance claim has a higher chance of getting approved

##### Master Set Up

mod_accumed has to be activated in the backend master 'modules_activated'. Which enables following changes in the application

##### Insta Section Master

Accumed will also be requiring clinical notes along with all other standard claim details, such as chief complaints, vitals, Main symptoms (Review of System), Past History & Physical Examination. Currently only chief complaints and vitals are system sections and all others are custom sections, so others don't have any generic identity to know the purpose of each custom section.

Therefore, to solve this, New field called section type is introduced in insta section master, in which there are three values available such as, Main Symptoms, Past History and Physical Exam. which are referred to define the type of each section and align the clinical data in the accumed claim under the corresponding type that set.

![](media/image120301_3.png)

##### Center Preference

It now allows to push all the accumed files to specific location where accumed is granted permission to access all files, to share files through ftp, requires following configurations in center preference master, ie, Ftp url, Username & Password.

![](media/image120301_2.png)

##### Claim Submission List

There are two more menu items such as Accumed New XML, Accumed Update XML introduced, which are to generate the claim xml as per the accumed standard. Accumed New XML will generate xml with 'New' operation value, the other one will generate with 'Update'.

![](media/image120301_1.png)

On success of accumed xml generation, files are saving in both ftp server and insta server if ftp url is configured in the center preference, otherwise it saves only in insta server to download it further. However, bothTest/E-claim (DHA standard xml) are saving to only insta server.

#### Prior Auth Screen Changes

In previous version, all the prescriptions were showing in the Prior Auth Prescription list irrespective of the status whether any item is marked for prior auth to be taken by doctor, so users were finding difficulties to filter and find the right prescriptions and items which require prior approval. It is now made below two changes available in the prior auth screen.

-   In Prior Auth Prescriptions List, showing only those prescriptions have at least one item which is marked for prior-auth to be taken.

-   In Prior auth prescription screen, showing only those items which is marked for prior auth to be taken by doctor.

### Inventory [GET]

#### Support for different purchase and sales taxation rules by center/store by providing flexibility to store tariffs

Previously in Insta taxation rules that were set at the Item Master level applied to all procurement and sales/issues transaction screens.

-   As per the GCC-VAT Taxation Rules the cosmetology/aesthetics centers should pay purchase tax for certain inventory items where as a medical center is exempt. Also if the patient is given cosmetological / aesthetics treatment the patient is liable to be charged sales tax.

-   Also as is the case of multi-center implementations there are cases where for different centers different taxes can apply as per the local regulations.

To manage these scenarios of taxation, the store tariff now has the option of mapping the tax sub-groups to the item rates master as is in the screenshot. This now gives the flexibility such that if the Store/Center has purchase/sales taxes applicable then the taxes can be applied and there is flexibility to say which Store/Center has taxes applicable and which are exempt.

The Taxes from the Item Master are automatically migrated to the Store Tariff Item Rates for respective items.

![](media/image120301_6.png)

The deprecated obsolete Tax % field in the Item Master is now removed as it is not applicable now.

The PO / Stock Entry screen picks the tax based on the Store mapped to the Store Tariff.

-   The PO/Stock Entry screen also allows change of the tax subgroups on the fly.

![](media/image120301_7.png)

The Sales/Issues screen picks the tax based on the usual price determination hierarchy rules and if the Store Tariff prices are applicable then the respective taxes apply.

Respective print tokens, prints and reports have been upgraded to based on this change.

### Scheduler [GET]

#### Doctor Scheduler Calendar Day View: Reintroduction of the doctors in a columnar fashion.

![](media/image120301_9.png)

The Day View now allows "n" number of doctors to be selected but only 7 doctors are displayed by default and one may use the Previous / Next buttons to navigate across the other selected doctors.

As is displayed in the screenshot the doctors selected are now displayed in a columnar fashion clearly segregating the available appointments.

On click of the slot for a doctor the respective pop-up displays details on booking a new appointment or blocking the slot for unavailability.

The appointment tiles on selection allow actions/display of the appointment details as was available in earlier versions.

#### Doctor Scheduler Calendar Week View: Configure the start of the day of the week at the Center master level.

The Center master now has the option to allow the administrator to define the start of the day of the week which on migration now defaults to 'Today'.

![](media/image120301_8.png)

#### Doctor Scheduler Calendar Day + Week View: Configurable center-wise working hours to address the 12-12 scroll issue.

This is currently controlled only by a back-end only setting and so please send an email addressed to [insta-support@practo.com](mailto:insta-support@practo.com).

Steps to be followed by insta-support via the back-end for this setting are the following:

-   There is a new center availability table made available which can have entries made for the center start and end time configured for each day of the week.

-   By default there are entries made for the default center (center_id = 0) and so if there are no entries for a specific center then the default center timings apply. Sample insert query for reference: 

```sql
INSERT INTO center_availability (center_id,day_of_week,from_time,to_time,availability_status)VALUES(X,0,'00:00' ,'23:59','Y');
```

### Bugs/Minor Enhancements fixed in v12.3.1 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Inventory|HMS-29560|Store Tariff Price determination: now has an Item selling price token.
Enhancement|Clinical|HMS-26314|OP Consultation: Management Edit Pop-up now has Previous/Next actions to traverse through the grid of added prescribed items.
Bug|Insurance|HMS-31261|New claim batch submission screen is taking time to load.
Bug|Insurance|HMS-31260|Claim ID is not getting updated to the new claim ID in sales_claim_details on updating insurance details.
Bug|Billing|HMS-31259|Day book screen taking more than 30 sec to open.
Bug|Insurance|HMS-31224|Dyna Package Calculation: Wrong Bill Amount When Visit Approved Amount exists
Bug|Patient Administration|HMS-31140|Salutation is not picking space.
Bug|Patient Administration|HMS-31139|Patient phone search filter field is not available in 12.2 in patient search screen.
Bug|Patient Administration|HMS-31138|Signed-off report email is not getting triggered for some patients.
Bug|Patient Administration|HMS-31137|Require Patient Category field in 'Patient Details report builder'
Bug|Patient Administration|HMS-31113|Performance] Performance fixes needed for IP registration screen and Edit insurance screen.
Bug|CIG|HMS-31136|Issue:Patient Portal not working since the upgrade
Bug|CIG|HMS-31134|Doctor Appointments Report Builder - Consultant column unable to filter,group,sort
Bug|CIG|HMS-31133|Getting blank screen when we click on next page in doctor schedular for particlar doctor and date
Bug|CIG|HMS-31131|While doing registration, getting error as "duplicate membership id is already exist"
Bug|Inventory|HMS-31118|Throwing timeout error on opening patient indent list.
Bug|Inventory|HMS-31117|Unable to issue the particular item. Shows 500 error.
Bug|Inventory|HMS-31103|Not able to edit the rate if Apply Strict PO Controls is set as 'No'
Bug|Billing|HMS-31097|Not able to view full screen while editing item from bill screen.
Bug|Billing|HMS-31095|Dyna Package charge is not getting updated as per the rate sheet.
Bug|Billing|HMS-31093|Getting timeout error while open the bill
Bug|Billing|HMS-31092|Not able to order any item from Order screen it is showing blank page on clicking on save.
Bug|Billing|HMS-31091|Require Patient Category field in 'Deposit report builder'
Bug|Billing|HMS-31090|Not able to scroll when dyna package have so many categories
Bug|Billing|HMS-31088|In Billig screen dyna package category popup screen scroll bar is missing
Bug|Billing|HMS-31087|Application is not allowing to delete the discount line item in the bill
Bug|Billing|HMS-31086|Not able to give 100 percent Bill level discount even though the user as 100% Discount CAP.
Bug|Billing|HMS-31084|Searching MRNo in deposits collection screen is throwing timeout error.
Bug|Clinical|HMS-31029|Throwing Null Pointer exception when we click on service report from Patient Emr.
Bug|Clinical|HMS-31028|Laboratory/Radiology reports and signed off reports is taking long time to load.
Bug|Clinical|HMS-30710|Getting 'invConductiondate.json error' in case of previous prescription for investigation
Bug|Clinical|HMS-30706|If route name in the master is null then consultation screen is breaking on clicking or prescribing medicine.
Bug|Clinical|HMS-28426|PACS Order URL is not showing in the document summary.

## Features in 12.3.2 [/cig-release-120301]

### OP Flow [GET]

#### Introduction of Appointments in OP Flow

This feature allows a user to use a single screen to book doctor, test, service or order set appointments and take actions such as mark arrived, reschedule, cancel or book additional resources. This is an alternate means of booking an appointment for an MR No patient or a Non MR No patient in addition to the already available Calendar or Availability View. This release also incorporates the formal introduction of a non-mr no patient booking which will be called a "Contact".

Hitting the "Add New Patient" option from the context of the appointment activity in the Patient List - OP Flow allows the user to create a Contact which is a Non MR patient to book appointments only.

![](media/image120302_20.png)

Hitting the Add New Patient in the context of any other activity in the OP Flow will open the Registration screen only as it did in prior releases.

Edit a Contact: by hitting the edit action in the patient header displays details of the contact which can be modified.

![](media/image120302_3.png)

![](media/image120302_2.png)

The user can book an appointment for a contact or an MR No by searching for a doctor / test / service or order set in the universal search bar which will display search results accordingly.

The user can use the right top corner center search option to book appointments across centers based on authorized access.

![](media/image120302_19.png)

Once a user books an appointment then it can be canceled, modified, rescheduled or additional resources added/removed.

![](media/image120302_14.png)

On selecting a test or service for appointment booking the time slots are available by default against a randomly selected service resource or test equipment.

-   After selecting a time slot the user is free to change the Service Resource or Test Equipment if necessary by clicking on the resource which displays a drop-down of linked resources only.

![](media/image120302_15.png)

On marking a patient arrived the user is navigated to the OP Registration screen exactly in the same way as it does for the Arrival flow from the Scheduler.

On adding an additional resource a tag is displayed to signify the number of resources.

![](media/image120302_10.png)

There is currently only one use-case supported for Order Set appointments which is supported which is for "Order Set appointments with Dependent constituents". Here the first constituent of the Order Set has to be a Service and the second constituent of the Order Set can be a Consultation. Here the Consultation appointment can only be given if the first appointment is completed with a duration of X mins/hrs/days/weeks.

The Order Set master for this use-case allows definition of dependency as shown below:

![](media/image120302_13.png)

The appointment activity displays the availability of back-to-back appointments and the grid displays the Order Set appointments.

![](media/image120302_16.png)

![](media/image120302_11.png)

On marking the Order Set as arrived on the day of the appointment (until which time the mark arrived is disabled), the doctor details auto-populate in the doctor details section and the service in the Registration-Orders grid.

![](media/image120302_12.png)

### Messaging [GET]

#### Configurable patient level communication settings (SMS/Email)

This feature introduces multiple levels of flexible communication settings to be configured such that 

a. the user can choose to receive any messages from the hospital or clinic, 

b. mode of message as SMS/Email, or 

c. specific category or named messages to be switched on or off.

##### Registration Screen

The OP Registration screen in new UI has a modification of fields such that the communication information is grouped together so that the patient preference to receive communication is enabled or disabled.

![](media/image120302_8.png)

The old Registration screens such as IP/Pre and Edit Patient Details also has these fields incorporated to specify enabled or disabled mode of communication.

![](media/image120302_7.png)

##### Patient Header

The patient header now has the contact header which has an edit action to modify contact details and the MR No patient header which has the links for the edit patient details and edit communication settings enabled. The edit communication settings link only gets displayed when the action right "Edit Patient Communication" is enabled.

![](media/image120302_17.png)

##### Appointment Pop-Up (from Scheduler - Calendar / Availability View only)

The appointment pop-up has the messaging configurations which can be applied such as 

a.  preferred language, 

b.  mode of communication (not applicable for a contact patient) as SMS/Email applicable for all messages and 

c.  a new functionality to specify that communication can be sent or not for this particular appointment. Do note that we would still initiate a message in case of appointment cancellation.

This change is to be effected on the appointment pop-up from the appointment activity in the next subsequent 12.3.x release.

![](media/image120302_4.png)

##### Communication Settings

On selecting edit communication settings the popup displays every message supported in Insta as a system or custom message type.

The messages can be delivered based on preferred language and the group of messages can be disabled or enabled to be sent by choice of mode of communication be it SMS or Email.

![](media/image120302_5.png)

##### Promotional Messages

Insta will now allow the setup of Promotional Messages based on explicit capturing of the patient's consent in the application.

The consent can be enabled from the Patient Communication Settings pop-up which is displayed against the group of Custom Promotional Messages only. On the selection of consent received the messages are auto-configured as enabled.

The promotional messages will hence only be sent to patients who have the consent enabled.

##### Master changes

Each system message is now categorized under system message categories such as Appointments, Billing, Registration, Custom, Custom Promotional, Diagnostics, Discharge, Doctor, Inventory etc.

Custom Messages are non-system admin configured messages which will be the default migrated message categories.

Custom Promotional Messages is a new type of message category to differentiate transaction based from the promotional based messages.

There is also a change such that a custom message can be configured to be sent as SMS/Email and each have its own content body message.

### Deposits [GET]

#### Taxation Rules against Deposit Receipts

As per tax regulations such as the GCC-VAT, India GST, Philippines VAT etc, there is a need to tax 'Advances' received for goods or services if the service is not fulfilled in the same period. When a sales invoice is raised against an advance received in a different tax period, one can adjust the sales with the advance and reverse the tax liability generated for the advance received.

##### Treatment of Advance Received under GST/VAT

The rules for the time of supply under GST/VAT plays a very important role in determining when to pay tax for a transaction. The general rule for time of supply for services is the earliest of the following

-   Date of issue of invoice

-   Date of receipt of payment/advance

-   Date on which invoice should be issued

    -   The second point above is receipt of advance. This means that if the advance is received before the issue of the invoice the time of supply would be the date of receipt of advance. Thus taxpayer receiving advance must pay tax on the money received.

##### Tax applicability on Deposit Collected

The deposit collection screen is enhanced to apply tax on the deposit collected, which allows the user to select the tax sub groups and input the total deposit collecting from the patient, total deposit considered inclusive of tax amount.

![](media/image120302_1.png)

To enable tax in the deposit collection screen, two new preferences are added in the system, such as,

'No of tax sub groups in Deposit Screen' in the Generic Preference Master - This is to enable tax sub groups in the deposit collection screen based on the tax rule is supposed to be applied, there are three possible values such as 0,1 & 2.

-   0 - which means no tax field required, this is the default value on migration.

-   1 - enables only one tax sub group, which is preferred in all the countries where VAT system exit.

-   2 - enables two tax sub groups, which is preferred in all the countries where GST system exist.

![](media/image120302_18.png)

'Tax Selection Mandatory' in the Center Preference Master. - this is to set tax selection as a mandatory step in deposit collection screen in each center level.

![](media/image120302_9.png)

##### Deposit Collection

While collecting deposit, will calculate net amount and tax amount based on the tax sub group which have selected and respective data will be shown.

##### Deposit Refund

On refunding any deposit, total refunded amount considered as inclusive of tax and post the corresponding entries to book of accounts. Deposit refund is happening on LIFO basis in the application.

##### Deposit Set off

While setting off the deposit against a bill, the proportionate tax amount of the amount set off is reversed on FIFO basis.

##### Deposits Receipts Report Builder

New fields - Tax amount, Net Amount, Total Tax Percentage are added.

##### Deposit Receipt Print

New tokens are added to use in deposit receipt print - net_amount, total_tax_rate, tax_amount, taxSubGrps.

_NOTE: The Accounting changes to apply taxation account voucher postings are planned in the subsequent v12.3.3 release._

### Billing [GET]

#### Display of Activity-wise status on Bill Finalization

While finalizing/closing a bill, there is a warning popup which will display pending Lab, Radiology or Consultation orders which are still not completed and ask for confirmation to continue bill finalization/closure. For IP bill, it shows only lab and radiology orders.

![](media/image120302_6.png)

### API Enhancements [GET]

#### Claim History API

A claim history API is created, which lists all the transactions within the selected submission date period grouped by bill no. The following fields are also available: Resubmission_type, net_amount, bill_no, center_id, submission_date, tpa_name

The API can be accessed at URL https://api.instahealthsolutions.com/{schema}/insta/api/claims/history.json

Refer [API Documentation](main.html) for usage details

### Consultation [GET]

##### Follow-Up section changes

In OP Consultation Follow-up sections is modified with functionality that the follow-ups can be given only for the consulting doctor.

![](media/image120302_21.png)

When New Follow-up is added Consultation doctor name is defaulted in the doctor field of Follow up details section. Note: No changes in the follow up details functionality of discharge summary section

### IP-EMR [GET]

#### Reopen action with remarks

IP EMR which is finalised and Closed , can be Reopened with Remarks for Adding or Editing Information.

![](media/image120302_22.png)

Re-open remarks are highlighted as part of the Audit log.

### Bugs/Minor Enhancements fixed in v12.3.2 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Patient Administration|HMS-31326|The old Patient Portal module (2010 version) is now officially deprecated.
Enhancement|Clinical|HMS-29565|The Diagnostics Report and Revenue Report Builder now has fields for Pri. Diagnosis Description, Pri. Diagnosis Code, Pri. Diagnosis Code Type and Order Number.
Enhancement|Clinical|HMS-30153|Occurrences and till discontinue duration option detail is displayed in MAR
Bug|Insurance|HMS-31293|Not able to generate Eclaim as it throws "Diagnosis Error: Claims without diagnosis codes. Please enter diagnosis codes for Patients."
Bug|Insurance|HMS-22142|Not able to resubmit claim on merging of 0 items also in the XML.
Bug|Clinical|HMS-31209|In IP flow screens the patient List on the left side is showing duplicates when there is a Nurse ward Assignment.
Bug|Patient Administration|HMS-30581|Not able to do patient arrival from scheduler screen.

## Features in 12.3.3 [/cig-release-120303]

### Clinical [GET]

#### Pending Prescriptions Dashboard - New UX (add-on paid module)

Pending Prescription Dashboard feature is to ensure minimal revenue leakage post a doctor prescription as it has downstream workflow dependencies such as Prior Authorization, Doctor Referrals, Doctor Follow-ups, Doctor/Resource Availability and Scheduling, Patient Availability and Trail of User Actions etc.

This screen will serve the following roles and and the listed use-cases:

-   Front Desk

    -   view pre-auth statuses and pre-auth validity of the prescribed items so that they can be scheduled for appointments.

    -   view future doctor follow-ups and referrals.

    -   view future orders which required the patient to come after a week of taking medicines or after pre-conditions such as on an empty stomach the next day.

    -   assigning a therapist or other resources after scheduling or pending for scheduling.

    -   checking the readiness of the patient to come.

    -   view prescriptions raised for multiple sittings for a service say physio sessions, dental procedures etc and each is knocked off per visit.

    -   capture multiple remarks against the pending activity.

    -   assign the pending prescription to another user or role for a followup action.

-   Biller / Insurance (in addition to the above)

    -   view the items not yet billed to the patient from a previous visit.

    -   view the prescription validity for scheduling and order.

-   Nurse (in addition to the above)

    -   review the pending prescriptions and their statuses so that she can notify the patient waiting in the clinic.

-   Doctor (in addition to the above)

    -   To view the status of a Referral or a Follow Up Consultation or status of a prescribed item to his / her patient.

This feature requires MOD (mod_pat_pending_prescription) to be enabled in Insta. Once the MOD is enabled, the Pending Prescription Dashboard can be accessed from {Hamburger Menu}  Modules  Dashboard  Pending Prescriptions.

![](media/image120303_5.png)

##### Pending Prescription Dashboard Screen

![](media/image120303_2.png)

The Pending Prescription Dashboard can be filtered by MRN/Patient Name, TPA/Insurance Company Name, Prescription Start Date & End Date,Prescription Type like Lab, Rad, Service and etc, prescribed by, Pre-Auth status and Assigned To.

When the pending prescription dashboard loads, the default date range is T-7 to current date, all pending prescriptions with prior auth status = all, appt status = all, patient readiness = all


**Center Selection**

The center is defaulted to logged-in user's center. If the logged-in user is a Default Center user then the center is defaulted to Default Center, but should select any other center to get the pending prescriptions for that center. The Dashboard does not display the pending prescriptions across the centers. If the logged-in user is associated with one center, then the center selection option is hidden.

![](media/image120303_4.png)

The Pending Prescriptions will appear in the Dashboard immediately after an OP Consultation is saved with prescrib-able activities be it Laboratory or Radiology investigation, Services/Procedures, Doctor/Department Referrals or Doctor Follow Ups.

**NOTE:**

-   This list will exclude Surgery and Medicine prescriptions.

-   This list will exclude any items added directly in the bill

-   If the doctor has prescribed a multi quantity, the service will break it down into that many number of rows.

-   This screen will not show Diag Packages for the patient as of now.

-   In case the Prescription has a remark capture against it, the remarks is displayed by default against the pending prescription item.

**Prior Auth**

The Prior Auth Statuses for each row are links for users who have access to the prior auth prescription screen, on clicking of which should take the user to the respective prior auth prescription screen. The prior auth statues are : "Yet to be Requested", "Requested", "Approved", "Denied"

**Scheduling**

Appointment Scheduling for the FollowUp, Consultation or the services can be done by clicking "Schedule" Link.

![](media/image120303_6.png)

The Schedule link is enabled only if the pending prescription item is doctor consultation or follow up or direct referral.

-   if the pending prescription is a department referral then schedule action is disabled

-   if the pending prescription is ordered then the schedule action is disabled.

-   the schedule link is enabled if the patient has a phone number captured at the time of registration.

-   On click of the schedule link, the appointment pop-up with the doctor details are pre-populated and cannot be modified.

**Adding Remarks**

Click on the Edit link to open pop-up screen.

![](media/image120303_8.png)

The Edit pop-up has the following attributes:

-   Prescription details cannot be modified for a Lab, Rad, Service or specific doctor but only can be modified for a department, where the doctor needs to be assigned for the consultation.

-   Patient Declined: always to be defaulted to No.

-   Patient Declined Reasons Masters displayed from the Masters only (to add Declined Reasons, goto Settings  Admin Masters  Pending Prescriptions Declined Reasons)

-   Remarks Log: allows the user to enter remarks as a log or the log also captures to whom the activity was assigned to even if the remarks were not entered or incase of both remarks and assigning happened in one go.

-   Assigned To Role/User: By default the activity is not assigned to any user or role. But the user can select a Hospital Role or User Name. For user-names append the hospital role to the username.

-   Prescription Doctor: allows the user to select the Doctor if the prescription item is department referral.

![](media/image120303_9.png)

**Viewing Patient EMR**

Based on the access control, clicking on EMR link opens Patient Visit EMR page.

![](media/image120303_7.png)

Logged in doctor controls apply such that the doctor can only view prescriptions where he is the prescribing doctor or is the referred doctor.

All other users can view all prescriptions which are unassigned and assigned.


### Registration [GET]

#### Upload Document enabled on Registration screens

If a front desk user needs upload a patient document say a government id, an external prescription, photo identity card etc. the user previously needed to access the generic document screen, save the document in the local machine and upload it. The changes done now overcome the usability issues and negate the need for the user to store the document on the local machine.

*OP Registration:* After a successful registration of an OP visit there is a link Upload Document on the click of which invokes the pop-up as displayed.

![](media/image120303_1.png)

On invoking the pop-up the user can upload a new document and select the document type and document name.

![](media/image120303_3.png)

The user can select to scan and upload a document which automatically triggers the integrated scanner or from the locally stored disk.

-   Webcam will be made available in a future release.

The user can filter by documents created at the patient and visit level retaining the existing functionality of the Uploaded document in the old user interface though it by default is linked to the latest visit.

The existing role based EMR rules can be applied so that the user can only view the document if authorized by document type/author/center/department.

The existing document type based EMR rules can be applied so that the user can only view the document if authorized by user/author/center/department/roles.

The Document Types created in the master can now be linked optionally to a document category.

-   The available system document categories are: Registration, Clinical and Insurance.

-   The control applied as part of this change is such that only those document types marked as Registration document categories are available in the Registration screen.

The uploaded document can also be accessed from the old UI for patient documents as well.


### EMR features [GET]

#### Department Referral

In Op Consultation Making Departmental Referral is made available .

In Management Section of OP Consultation, the existing consultation order option is enhanced as "Departmental" Referral.

User would be able to make referrals by selecting Doctor or Department

-   When Doctor Option is selected, User would be able to select the Doctor from the list and make a referral

-   When Department Option is selected, User would be able to select the Clinical Department from the list and make a referral.

    -   If Departmental Referral is made the user would be able to pick the Doctor later while creating Appointment from the Pending Prescription screen

    -   If Departmental Referral is made it will not be available in Order screen (Only in this version, later version Order screen would be enhanced to Pick the doctor information and create the order)

#### Prescribe "Panel Tests" as part of OP Management / IP Physician Orders

The Test to be defined as part of a Panel test can be defined in the Diagnostics Test master but there is a new configuration introduced such that it can be flagged as "Not Prescribable" individually but only as part of a Panel.

In the Order set master, Panel test can be defined by marking the order set is a "Panel Test" (new Parameter made available)

-   Order set Marked as Panel allows to add only Laboratory diagnostic Test under the Order set.

In OP Management section and IP Physician Order , Below is the Functionality available

-   The diagnostic Test marked as Prescribable "No" will not be available to search or Prescribe

-   The Order set marked as Panel test is available to prescribe from Investigation category apart from order set.

-   Once the test is prescribed from the Investigation category it expanded as single items

    -   Edit and Delete can happen on Individual items.

### Bugs/Minor Enhancements fixed in v12.3.3 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Patient Administration|HMS-27956|deprecate the old patient portal and doctor portal modules.
Enhancement|Billing|HMS-25130|Remove the following Revenue Reports 1. Hospital Revenue Accrual Report 2. Revenue Report Builder 3. Revenue Accrual Report Builder
Enhancement|Insurance|HMS-30105|Self Pay ERx Request has an update for the member ID format.
Bug|Billing|HMS-31694|UI Bug: Order screen search bar covers the activity details.
Bug|Billing|HMS-31669|Taxation for Deposit has a calculation error.
Bug|Diagnostics|HMS-31426|Incoming Hospitals: Unable to edit name and other details of Lab collection centres.
Bug|Insurance|HMS-22142|Not able to resubmit claims on merging of 0 items.

## Features in 12.3.4 [/cig-release-120304]

### Clinical [GET]

#### Prior Auth Prescription Changes

##### Enabling All Prescriptions in Prior Auth Prescription List

In 12.3.1 , we were showing only those items which had been marked for prior auth in prior auth prescription list and prior auth prescription screen, but there are customers who are still referring all the prescriptions and taking further action by insurance team, therefore it is now made it as a configurable preference called 'Show Prior Auth prescription List' with two possible values such as, All prescriptions/ Only Prior auth marked items. Default value will be 'All prescriptions'. The Prescriptions/Items are listing in the prior auth prescription list and prior auth prescription screens based on the preference defined in the master.

![](media/image120304_2.png)

##### Enabling Bulk Prior Auth Details Copy option

New feature is added to copy a Prior Auth details to all the activities in the prior auth screen. this gets enabled only for those sponsors whom manual prior authorization mode is activated in the sponsor/tpa master. Three fields are added under Prior Auth Presc. Details such as, Prior Auth Id, Prior Auth Mode & Prior Auth Activity Status where they can enter the prior auth details and allow copying it to all individual activities in the prior auth prescription.

![](media/image120304_4.png)


### Messaging [GET]

#### New Message Types Automated Birthday by SMS & Email

There are now 2 message types enabled for automated birthday messages to be sent as an Email / SMS to the patients. The message can be configured to be sent at a custom date/time as requested by the customer but needs to be enabled by Insta-Support from the Settings -> Cron Job modification screen.

### Registration [GET]

#### Upload Document enabled on Generic Documents and IP/OSP Registration to invoke from scanner / attachment

The upload document feature which was rolled out in v12.3.3 only in the OP Registration screen is now enabled on the IP/OSP Registration and Generic Documents.

![](media/image120304_8.png)

In the Generic Documents screen the previously available radio button is now removed and Upload Document can only be invoked from the link at the bottom of the screen.

![](media/image120304_1.png)

The OSP and IP Registration Success Pages in the old UI has the link enabled to upload documents as well.

![](media/image120304_5.png)

#### Child Birth Registration now captures Delivery Type (Normal / Caesarean)

The Child Birth Registration screen now captures the Delivery Type = Normal or Caesarean and this field is available in the Visit Details and Birth Details Report Builders.

This field is not mandatory to capture for all Child Births currently.

### Masters [GET]

#### Dashboard for Master Upload or Download

Now Hospital Application Administrators can upload a few more masters from UI. Going forward all the Masters uploads will be added this dashboard. This facility can be accessed from "Settings Administration Data Upload Download" Menu. Currently, uploading of "Patient Demographic Data", "Doctor Charges", "Doctor Details", "Insurance Company", "Insurance Plan", "Insurance Plan Type" and "TPA / Sponsor" are supported. Whenever new master upload feature is developed, the same will be added into this list.

![](media/image120304_6.png)

To upload any of the supported master in the dashboard, user can select appropriate master from Master Name list and select the "Upload" in "Action" List, choose the file and click on Submit. Once data is submitted, the upload job goes into the queue. The status will be "Queued" and you will have to manually keep refreshing this page to see the latest status.

![](media/image120304_7.png)

Once the upload is successfully completed, the Status will be "Completed". If the upload fails, then the status is "Failed" and you can view the errors by clicking "View Log".

![](media/image120304_3.png)

Similarly, user can download the masters from the same dashboard. Once has to select the appropriate master and select the action as "Download". Even the download also goes into the queue and once the job is completed, the status is "Completed" and user can download the master by clicking "Download" link. (Please note, in version 12.3.4, only template can be downloaded. In the upcoming versions, user can download the master or the template)

After 72 hours, the upload / download history would be flushed.

### Bugs/Minor Enhancements fixed in v12.3.4 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Clinical|HMS-30084|Pending Prescriptions Report Builder
Bug|Clinical|HMS-31978|Able to prescribe non-prescribable items via "Saved favorites" or "Previous history".
Bug|Patient Administration|HMS-32186|Mobile access should be defaulted to yes in registration screens.
Bug|Insurance|HMS-22142|Not able to resubmit claim on merging of 0 items also in the XML.

## Features in 12.3.5 [/cig-release-120305]

### Accounting [GET]

#### Real-Time posting of Receipt vouchers

In continuation to the Accounting model changes which started in v12.2.1, all receipt related vouchers (deposit, deposit set-off, sponsor, patient, write-off, reward points, refund, credit note) are now posted real-time to the accounting table via a job queue in a journal entry format of accounts/ledgers which are debited and credit respectively.

In v12.3.2, Deposit Receipts were enhanced to support Tax applicability. The respective Accounting entries are now made available in the v12.3.5 feature.

While setting off the deposit against a bill (no UI changes) the proportionate amount of the amount set off is reversed in the books of accounts.

Description|Accounting Event|Voucher Number|Voucher Type|Debit A/C|Debit Amt|Credit A/C|Credit Amt
-----------|----------------|--------------|------------|---------|---------|----------|----------
Patient Deposit|Deposit Collection|Receipt No|Receipt|Cash/Credit card, etc|Net Amt|Deposit Liability|Net Amt
 | | | |Cash/Credit card, etc|Tax Amt|Tax Liability|Tax Amt
Deposit Refund|Deposit Refund|Receipt No|Receipt|Deposit Liability|Net Amt|Cash/Credit card, etc|Net Amt
 | | | |Tax Liability|Tax Amt|Cash/Credit card, etc|Tax Amt
Deposit Set-off|Deposit Set-off|Receipt No|Receipt|Deposit Liability|Set Off Net Amt|Counter Receipts|Set Off Net Amt + Tax Amt|Tax Liability|Tax Amt


### Messaging [GET]

#### Reminder SMS for Booked Appointment status 

The Dynamic Appointment Reminder now has a configuration such that the reminder is sent for booked, confirmed or both appointments with the existing option of defining appointment reminder x hrs before appointment.

![](media/image120305_1.png)

#### Messaging Integration (SMS) using Provider's Web Services

Insta now has an enhanced ability to send messages (SMS) using the provider's Web Services in addition to the existing Mail based configuration. The administrator can navigate to Settings -> Message Dispatcher Configuration to modify configurations. Edit "SMS" Message Mode for the configuration.

Set the Protocol value to HTTP for the Web Service based SMS and SMTP for email based SMS.

Based on the Protocol selected, few fields get enabled and user may have to enter some more data.

If the protocol is HTTP then user may have to select "Protocol Template Type" as JSON or XML, and HTTP method as GET or POST

Enter the HTTP URL / HEADER / BODY Information for Web Service Based SMS.

Once the configuration is saved, the SMS will be delivered based on the Protocol selected.

Note: All the SMS messages will use ONLY one mode of dispatch. You cannot set message protocol to few SMSes to SMTP and few SMSes to HTTP.

![](media/image120305_2.png)

#### Capture a Patient's Response to an SMS for Appointment Confirmation / Cancellation

Patient can send the responses through SMS for confirming or cancelling the appointment.

The SMS Vendor IP needs to be whitelisted in public_api_ip_whitelist table

![](media/image120305_3.png)

The response tag and the action must be added in generic_preference table

![](media/image120305_4.png)

(in the above illustration, if patient sends the response "1" then appointment gets confirmed and if the response is "0" then appointment gets cancelled. If patient sends any other response other than the above values, then no action is performed).

When patient sends the response SMS for appointment confirmation, all the appointments for the next day with the same mobile number get confirmed. If the patient's response is to cancel the appointment, then the next day appointment gets cancelled. If there are more than one appointment available for the same mobile number on the next day then no appointments get cancelled.

The patient's SMS response and action performed by the system against that response is recorded in received_message table.

### Clinical [GET]

#### Pending Prescriptions Dashboard Improvements

Hospital Roles master allows association of the allowed prescription types by role so that the logged in user will only view the pending prescription types based on authorized access.

![](media/image120305_5.png)

There is now a Filter for Appointment / Order Status and Pre-Auth status added

Distinct identification of Roles or Users in the "Assigned To" filter drop-down.

On editing an item the cursor focus in the pop-up is now on the remarks field.

Links to the Pending Prescriptions screen from the OP Registration and Bill Page.

The OP Pending Prescriptions Report Builder is available as part of the Consultation group of Reports.


#### Pre-Auth Prescriptions: addition of Inventory items

Pre-Auth prescriptions now support an additional activity type added which is "Inventory" which can then be Issued to Patient. The rates displayed are based on the patient's visit rate plan rates but consider only store tariff or item's selling price applicable for the visit rate plan as per it is configured in rate sheets/rate plan master.

![](media/image120305_6.png)

### EMR [GET]

#### Patient Document : Search by Template

Add Patient Document allows for a search by Template Name or Document Type

As is in the screen-shot below the screen now has search parameters to filter down the list of configured documents.

![](media/image120305_7.png)

### Billing [GET]

#### Minor Enhancement

Search for bill in the new UI now displays the prescribing / admitting doctor name in the search card.

![](media/image120305_8.png)

### Inventory [GET]

#### Minor Enhancement

Stock Issues Report Builder: has the Item Selling price added as an available field.

![](media/image120305_9.png)


### Bugs/Minor Enhancements fixed in v12.3.5 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Billing|HMS-18925|A save on the bill page should have an alert to the user incase there is pending deposit amount for setoff.
Enhancement|Clinical|HMS-32577|Diagnosis Pop-Up - Onset Date & Time renamed as Diagnosis Date & Time
Bug|Common|HMS-32614|Local time is shown instead of Server time in few screens.
Bug|Billing|HMS-32571|On migration general deposit is getting allocated for multivisit package bills also.
Bug|Billing|HMS-32552|Day book report builder for receipts, receipt Type is showing as settlement instead of advance.
Bug|Patient Administration|HMS-10488|OP Registration Screen to apply IP Follow up determination rules.
Bug|Patient Administration|HMS-32688|Service Resource and Generic resource added in resource list not showing in New Appointment Tab
Bug|Patient Administration|HMS-32575|[Patient Confidentiality] Break the Glass allows the user to search the confidentiality group patient even after the session completion
Bug|Patient Administration|HMS-32409|Patient alert (custom field) field in edit patient not showing lower text for view on mouse hover.
Bug|Patient Administration|HMS-32231|Taking time to fetch patient details when search with mr no in Doctor scheduler appointment screen.
Bug|Patient Administration|HMS-32200|DOB filled is disabled in registration screen when user mark arrive in appointment activity for a contact patient who doesn't have DOB/age.
Bug|Patient Administration|HMS-32102|[API] Unable to open Vital Print in Patient centric EMR API


## Features in 12.3.6 [/cig-release-120306]

### Billing [GET]

#### Bill Page: Apply Bulk Tax modifications across multiple bill activities

There is now a bulk update feature to modify taxes applicable for all selected items in the bill. This is currently being supported only for the single taxation VAT model as is applicable in the Middle East and SouthEast Asia but no the dual taxation system of GST in India.

There is a back-end preference called "no_of_tax_groups" in center_preferences table, which enables the number of tax groups fields in the billing screen. As this value is defaulted to zero on migration, bulk update option will by default not be enabled. This must be updated to 1 to make this option available in the in bill page.

![](media/image120306_1.png)

### Clinical [GET]

#### Pending prescription Dashboard now displays pre-authorization prescriptions. 

The Pending Prescriptions Dashboard now shows all items added directly in the prior auth prescription screen.

If the insurance users have added a multi quantity in the prior auth prescription screen, the item will be displayed in as many number of rows.

By default the order status would be updated as "prescribed' and it can be filtered by referral doctor.

#### OP Consultation Section Updates

##### Allergies section, add allergy pop-up changes

In Allergy Pop-up which opens up for adding allergies, when "No Known Allergies" Option is selected by the User the other information will be Disabled for entering details

##### Diagnosis Section ,Pop-up Changes

When adding new allergy, the Remarks text in the Pop-up is provided with more space to capture the details of the information.

In show previous diagnosis pop-up, the doctor name and visit date is added along with the visit number.

![](media/image120306_2.png)

##### Management Section

In the pop-up under the Medicine tab "Dosage" Field is renamed to "Take Units".

While submitting ERx the toast messages displayed to the users are modified for conveying more meaningful messages to the user.

![](media/image120306_3.png)

#### Triage and Initial Assessment

Close Consultation option extends to close "Triage and Initial Assessment" in the OP List.

In the OP list the user has the option to select all the open consultation and close them in bulk. This action closes all the OP Consultation form associated to the Consultation.

The same feature is extended to close the associated "Triage and Initial Assessment Form"

The above action creates a Triage and Initial Assessment form with empty sections as defined in the hospital forms for the consultation doctor department.

### EMR [GET]

#### Vaccination Report available under EMR View

In Patient and Visit EMR Vaccination Record is listed as new document type , under which Vaccination Record of current date will be listed for printing.

This report is similar information of Vaccination Report available under Vaccination Module.

![](media/image120306_4.png)

### Scheduler [GET]

#### Doctor Login controls to be over-ridden by configuration in Scheduler View

As there were doctor users who would like to have access to more than his/her calendar, there is now a user level configuration to "Doctor login controls applicable on scheduler view" which can be set to Yes / No.

This configuration in the following hierarchy:

-   If not a doctor user, check for the Scheduler Department setting if any.

-   If a doctor user apply doctor login controls on the Scheduler.

-   If the new configuration is applied for a doctor user only then the user would be able to view the calendar of all doctors mapped to the user's Scheduler Department.

### Reporting [GET]

#### 2 Way SMS Patient Response Report

Introduced a new report on Patient's response to SMS and action performed in Insta.

#### Additional Fields in Accounting Report Builder

Added Net Amount, Tax, Center Name, Bill Open date and Voucher Date with full date time stamp fields.

### Bugs/Minor Enhancements fixed in v12.3.6 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Patient Administration|HMS-32865|Pre-Registration screen has the Read card feature enabled to pre-fill patient details from the smart card via Nexus.
Enhancement|Patient Administration|HMS-32321|Search/Today's Appointment has a Visit Closed Date/Time column.
Enhancement|Patient Administration|HMS-26676|Search/Today's Appointment has a Prescribed By column.
Enhancement|Patient Administration|HMS-32841|The Medical Records API for external integrations is enhanced to make Patient level documents available and not only visit level documents.
Bug|Patient Administration|HMS-33420|Not able to book Appointment in doctor scheduler week view throwing sql exception other then InstaAdmin role.
Bug|Inventory|HMS-33365|while returning the inventory item some of the items are not displaying.
Bug|Inventory|HMS-33279|When finalizing a stock consumption throwing error.
Bug|Inventory|HMS-33223|Throwing sql exception when we search from item stock level list.
Bug|Billing|HMS-32694|Items qty billed from prescription should mark as consumed
Bug|Insurance|HMS-32686|Getting error, while ordering approved prior auth item from order screen.
Bug|Patient Administration|HMS-32512|Appointment pop-up from Calendar View should show the DOB/Gender for contacts.
Bug|Patient Administration|HMS-32497|Registering a new patient has DOB field disabled.
Bug|Patient Administration|HMS-32393|Doctor login throws error while open New OP flow screen - Registration/Consultation/appointments
Bug|Patient Administration|HMS-26062|In doctor appointment, mr no and visit id is not updating

## Features in 12.3.7 [/cig-release-120307]

### Registration [GET]

#### OP Registration screen applies new "Advanced Rules" for Follow-up Determination by Sponsor and Department.

It is now possible to define Advanced Follow up rules by Center, Sponsor/Cash, Department and Doctor.

There is hence a new rules master which allows the administrator to setup the rules applicable for the organization.

This rule master has the following attributes

-   Rule Name - to give the name for new rule definition

-   No. of Op Follow up - to define no. of op follow ups are allowed within op follow up duration. This is the no. of maximum follow up consultations can be utilized within total follow up days defined.

-   No. of Ip Follow up - to define no. of ip follow ups are allowed within ip follow up duration

-   Visit After Follow up - to define the default op visit type after completion of follow up count or duration.

-   Min Days/Max Days - to define the duration of follow up period

-   OP type - to define the type of visit to default when patient visit within defined follow up days

This master allows to break down the follow up duration into max of two phases with adding two rows in the rule definition.

Allowing to define the rule for both op an ip follow ups and ip follow up will have high priority over op follow up definition.

![](media/image120307_3.png)

##### Validations

-   if multiple rows defined in a rule definition, then visit after follow up period will be Main Visit by default and can not be overridden.

-   In the first row, user can pick only follow up.

-   In the second row, user can pick only Revisit

-   If follow up count is greater than zero, then enforce user to enter at least one row.

-   Delete button will be enabled if there is no applicability for particular rule

-   Won't let users to add more than two rows.

##### Rules Applicability

-   This master allows to apply the above said rules to Centers/Sponsors/ Departments/Doctors combination.

-   'Cash' is one of the values available in the sponsor list in order to apply any different rule for Self pay patients.

-   'Not Applicable' is one of the values in the doctor list, this is to apply the rule in department level. Which means, this rule must be applied to particular department irrespective doctor you selected while registering any patient.

![](media/image120307_2.png)

##### Registration Preferences

-   In the Visit Type Dependence preference which is now renamed as "Follow up Rules based on" has the previous options of Doctor or Department and a newly added value called 'Advanced'.

-   For any system is configured with this value, follow up works based on the rules defined in Advanced Followup Rules Master.

-   The two other options such as Doctor and Departments, it works the way it works today.

##### OP Registration Screen

-   Visit type will be identified for each sponsor and department/doctors based on the rules defined in the master.

-   Ip follow up will get precedence over op follow up rule defined in the op visit type rule master and op follow up stops if any ip visit happens within op follow up period.

-   At the end of any ip follow up, next op visit will be considered as main visit.

#### Management of Follow up counts for Special Consultations

It is now possible to setup special consultation types such as telephonic consultation or doctor's review consultation, health-check package consultation for which the follouwp rules should not apply.

There is a new attribute called 'Skip Follow up Count' added to the consultation type master and this will be unchecked by default.

while determining numer of follow up consultations done, will consider only those such consultations with 'skip follow up count' value false (unchecked in master).

### Insurance [GET]

#### Prior Auth module enhancements

##### Capture Approval Amount in Prior Auth Prescription Screen

Pre-Auth prescriptions now have a field option to enter approval amount against each item. When online prior auth is enabled, then approved amount gets updated through authorization file. In case of manual transactions, system will by default take claimed amount as approved amount while updating activity status to approved. However, user can go and override the approved amount if there is any variance in the approval.

##### Linking Pre-Auth Approved Amount to the Bill

There is now an option to consider the prior auth approved amount as claim amount on ordering such approved items to bill.

This works based on the system preference called 'Prior Auth Approval Amt as Claim Amt' which is newly added in system preference master.

![](media/image120307_4.png)

There are two possible values such as Yes/No.

If preference is set to Yes, then approved amount will be posted as claim amount and remaining amount gets posted to patient amount, moreover it locks the approved claim amount in the bill as it does not want to get disturbed when any plan change or co-pay change of any other item.

If preference is set to No, copay will be calculated as per insurance plan definition while ordering item.

If any item is fully denied, then it will not be considered for visit limit calculation or max co-pay calculation in the bill. Approved amount will not recalculate when you edit any insurance details other than insurance/ sponsor details.

### Insurance Plan Visit limit based rules enhancements

This is the new feature introduced in the application to send the approval request when total claim amount exceeds the defined prior auth approval limit in the insurance plan.

##### Insurance Plan Master

Introduced new fields in the insurance plan master where prior auth approval limit can be configured and enables the prior auth initiation on ordering/prescribing items if claim amount exceeds this limit, which shall be available only when mod_eclaim_preauth is activated in any schema. This is to be supported only for Op visits

It is also possible to define what type of items are not covered within aforesaid prior auth approval limit.

![](media/image120307_5.png)

##### Op Consultation

When estimated claim amount (Billed items Claim Amount + Prescribed Items Claim Amount) exceeds the prior auth approval limit in the insurance plan while prescribing, then the system will mark all the items for 'Send for Pre-Auth' and make it available for Insurance person to take further action from prior auth prescription screen.

If estimated claim amount (Billed items Claim Amount + Prescribed Items Claim Amount) goes below limit while deleting item, system will revert the 'Send for Pre-Auth' status.

##### Order Screen

While estimated claim amount (Billed items Claim Amount + Prescribed Items Claim Amount) exceeds the prior auth approval limit in the insurance plan while ordering directly, then the system will mark all the items for 'Send for Pre-Auth'.

##### Prior Authorization screen

When approval receives for any item which is already ordered to bill, will override the billed claim amount with approved amount based on the newly added preference in system preference master and lock the claim amount in the bill as it does not want to get disturbed when any plan change or co-pay change of any other item.

![](media/image120307_1.png)

### Accounting [GET]

#### Support for tracking bill's last finalized date

Financial Accounting Integration API now has an attribute which captures the system defined 'Bill Last Finalized Date/Time'.

The "bill_last_finalized_date" is updated whenever the bill is finalized or re-finalized.

Now, the accounting API's "filter_by" param can have additional filter "bill_last_finalized_date".

### Diagnostics [GET]

HL7 Interface enhanced to store some Custom Value from OBR segment and token is published  to generate Customised Lab and Radiology Report during based on the customer need.

### Bugs/Minor Enhancements fixed in v12.3.7 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Patient Administration|HMS-33485|Today's / Search appointment worklist has the Visit Closed Date and Time columns merged as one field for Visit Closed Time.
Enhancement|Patient Administration|HMS-33094|Bulk Registration (XL) for creating visit registrations now has a column for updating Dept+Unit and runs validation checks for the veracity of data.
Enhancement|Integrations|HMS-32814|FA accounting is now enabled with a new API for reading the accounting heads master.
Bug|Patient Administration|HMS-33496|Appointment Activity: Age shows NaN if the DOB or Age is not entered.
Bug|Billing|HMS-33424|In Day book the header is displaying as null.
Bug|Clinical|HMS-33555|Upload document for discharge summary throws error.
Bug|Clinical|HMS-33547|Doctor login throws SQL exception on Doctor consultation.
Bug|Clinical|HMS-33545|Patient EMR: OT Notes displays a message: "You are not an authorized user to access this link".
Bug|Clinical|HMS-31726|Administrator role is unable to re-open the consultation after time limit.
Bug|Integrations|HMS-33533|Visit EMR API throws errors.


## Features in 12.3.8 [/cig-release-120308]

### Registration [GET]

#### Order Screen: The Pending Prescription popup now displays pre-auth prescribed items as well.

All Pre-Auth prescriptions have now been merged to the Pending prescription Pop up, especially for all the items directly added in prior auth prescription screen for OSP(Outside) / External prescription patients. With this feature, we removed the pre-auth approvals list link. 

![](media/image120308_4.png)

#### Introducing Referral Reason in Discharge Screen

It is now possible to capture the reason during discharge if patient is getting transferred to a different hospital/facilities. Introduced new master called 'Reason for Referral' under Admin master menu, where it allows to maintain a list of all possible referral reasons.

![](media/image120308_6.png)

Reason for referral field is added in Discharge screen, which is an optional.

![](media/image120308_3.png)

#### Enabling to capture the Indication for Cesarean Section in Childbirth screen

It enables to capture the indication for cesarean section while registering the child birth. Introduced new master called 'Reason for Referral' under Admin master menu, where it allows to maintain a list of all possible referral reasons.

![](media/image120308_5.png)

In Childbirth screen 'Indication for caesarean section' drop down is added, user can choose value in this field only if the delivery type is 'caesarean'.

![](media/image120308_2.png)

Indication for caesarean section is added in 'Birth Details Report Builder' & 'Visit Details Report Builder' reports.

### Insurance [GET]

#### DHA (Dubai) Claim Submission changes: to support Services to have package name attributes.

This features is built to enable some special services to have claim attributes of contract packages when such services are billed as workaround for packages to support end-to-end workflow in the application.

In the service master, two fields are introduced such as Package Contract Name & PackageID which is configurable in rate sheet/rataplan level.

![](media/image120308_1.png)

Both these values are stored at transaction level if values configured in the service master when transactions are billed.

packageId will be available in the xml as observations for service as below given

```xml
<Type>Grouping</Type>
<Code>PackageID</Code>
<Value>PCK05</Value>
<ValueType>Other</ValueType>
```

This Package Contract Name will be shown in DHA E-claim xml as below given.

```xml
<Contract>
<PackageName>Comprehensive - Neuron</PackageName>
</Contract>
```

### Bugs/Minor Enhancements fixed in v12.3.6 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Insurance|HMS-32152|Prior auth status for those items are not marked for 'Send for pre-auth' should be empty in Order pending prescriptions popup.
Enhancement|Insurance|HMS-33539|Introduced a preference called "Prior Auth Amount as Claim Amount" to consider approved amount as claim amount while ordering such approved items
Bug|Patient Administration|HMS-33550|Emirates ID format is taking wrong in IP/OSP/Pre registration screen also the govt ID type is becoming blank.
Bug|Clinical|HMS-33142|Pending prescription dashboard has the schedule action enabled even after the order status is completed.
Bug|Clinical|HMS-33503|Prescribed Item deleted from Doctor Consultation is not getting removed from the Pre-Auth Prescription
Bug|Common|HMS-33691|Error on opening Home page in multiple tabs.

## Features in 12.3.9 [/cig-release-120309]

### Billing [GET]

#### Indian Regulatory Compliance change to the Billing module to ensure that cash transactions are limited to 2 lakhs through multiple scenarios
As per the section 269ST in the Income Tax Act, No person shall receive an amount of two lakh rupees or more

-   in aggregate from a person in a day (or)

-   in respect of a single transaction (or)

-   in respect of transactions relating to one event or occasion from a person.

The move to curb cash transactions above a threshold mentioned, we built feature to limit cash transactions from any patient in a day or visit.

##### Generic Preference

Introduced a preference called 'Income Tax Cash Limit Applicability' based on which the rule is applicable.

##### Payment mode Master

**Transaction Limit**: In the payment mode master, there is an option to set the transaction limit

##### Validation Rules

Cash Receipt of more than transaction limit, from a single person in a day is not allowed even if the amount has been paid through multiple transactions during the day. (Cash Advance + Cash Settlement  Cash refund + Cash Deposit) -> Cash Transaction Limit in a day.

When the amount reaches day transaction limit, the system will give below validation message:

![](media/image120309_2.png)

With respect to transactions relating to one event or occasion from a person - system will not allow collection of more than transaction limit for any visit even if amount collection happens across days for particular visit. (Cash Advance + Cash Settlement  Cash refund + Cash Deposit Set off ) -> Cash Transaction Limit for a Visit.

When the amount reaches transaction limit for any visit, the system will give below validation message

![](media/image120309_3.png)

At any point of time, available deposit from any patient can not be more than transaction limit. Total Cash Receipt in a day should be less than Cash Transaction Limit AND total available cash deposit should be less than Cash Transaction Limit.

The changes for the Cash Transaction Limit applicability is done in the following screens:- OP Registration, Deposit Collection/Refund, Billing, Pharmacy Sales, Pending Bill Now Bills, Pending Bill Later Bills, Pharmacy Receipts, Incoming Sample Registration, Incoming Pending Bills, Incoming Radiology Registration, Incoming Sample Pending Bills and the Dental Consultation screen.

#### Bill screen recalculation changes on change rate plan/bed type or add/edit Insurance for Patient Issues/Returns transactions

The bill will be re-calculated for the issue transaction rates as per new visit rate plan based on price determination hierarchy applicable whenever it changes through following screens

-   Adding Edit Insurance

-   Change Bedtypes/ Rate Plans

### Registration [GET]

#### Filter Insurance Network Types/Plans based on Insurance and Sponsor Combination

It is now filtering network types/Plans based on the sponsor and insurance company selected by the user in the following screens.

-   OP Registration

-   IP Registration

-   OSP Registration

-   Add/Edit Insurance

If any plan does not have any sponsor in the master, particular plan will be applicable to all the sponsor.

If any sponsor available in the insurance plan master, particular plan will be applicable to only that particular sponsor.

#### System fields for Religion, Blood Group, Marital Status and Race

The following fields are added as system fields with no master (back-end only) but only system values populated to capture the patient's religion, blood group, marital status or race. These fields cannot be made mandatory as of now. This is done on the new UI - OP Registration and the old user-interface Registration screens as well.

![](media/image120309_1.png)

![](media/image120309_4.png)

#### The Patient Header (new UI/OP and IP Flow) now allow the user to modify custom fields (based on ACL)

The Patient Header in both the new user interface only for OP and IP Flow now allows the user to modify the custom fields on the fly subject to the ACL, edit custom fields is enabled for the user.

### OP Consultation [GET]

#### Show previous diagnosis with doctor details in of Diagnosis section

In the Diagnosis Section, the way user allowed to view the previous diagnosis is simplified. Earlier the diagnosis is grouped by visit and the user has to view one by one visit. In the modified view the users are allowed to view all the previous diagnosis listed:

![](media/image120309_7.png)

#### Patient EMR now has the visit details and doctor name appended for easy identification of documents

When the Doctor/User views the patient EMR and searches the information based on visit, additional information of Doctor Name is added to the Visit listing.

![](media/image120309_5.png)

#### Insurance Card Validity alert while prescribing medicines from Management section.

A new alert message has been introduced to warn the doctors (users) about the expiration of the insurance card validity. When the user prescribe a drug beyond the insurance card validity period (Primary Sponsor) the user would be alerted with the information of when the Insurance validity will expire and is allowed to proceed or cancel the action.

### Inventory [GET]

### Approve and Process Stock Transfer Indent screen now displays available quantity of the item-batches in the Requesting Store.

The Approve and Process Stock Transfer Indent screens now display the Available Stock in the Requesting and Indent Store.


### Dietary [GET]

#### Dietary - The Canteen Dashboard screen now support the Center drop-down filter

If the logged in User belongs to a particular center only that center Meal Schedule is listed for him, however if the user is associated with default center , The schedule across the center is listed.

New center filter has been introduced for the user to switch between the centers and view the meal schedule of the selected center, as of now their is no restriction on the centers selected by any user.

![](media/image120309_6.png)

### HL7 Integration [GET]

#### HL7 Integration enhancements

-   HL7 Integration for RIS and LIS has been enhanced to support Intermittent or Preliminary Reports.

-   HL7 Integration for RIS has enhanced to support Multiple addendums.

### Bugs/Minor Enhancements fixed in v12.3.9 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Patient Administration|HMS-33421|Search/Today's Appointment work-list: now has the Ordered Consultation Type field added.
Enhancement|RCM|HMS-33027|Once approval received for any billed item, update the approval details such as prior auth id, prior auth mode and approved amount based on the preference
Enhancement|Clinical|HMS-33131|[Diagnostics] Mandate Clinical Info should not enforce to capture the Clinical Note in Diagnostic Test Masters
Enhancement|Clinical|HMS-32255|Test Review Remarks should be print in Diagnostics reports
Bug|RCM|HMS-33714|Appt/Order status shows as ordered for all the items in PPD, when only one qty is ordered.
Bug|RCM|HMS-33396|Referral doctor should be showing in the PPD for the osp visits and should also in the "Prescribed By" filter
Bug|RCM|HMS-33479|Throwing zero activities error while generating e-claim
Bug|RCM|HMS-33240|Prior auth status is not getting updated in pending prescription pop up for online prior auth transactions
Bug|RCM|HMS-33623|On sponsor receipt generation the amount collected is still showing under due.
Bug|RCM|HMS-33459|Bill Print throws error if the bill is having package.
Bug|RCM|HMS-33088|If the operation is having a cancelled activity like anaesthetist/surgeon fees, then orders are not showing..
Bug|RCM|HMS-33763|On applying discount percentage for inventory items in the bill. The discount is calculating wrong.
Bug|RCM|HMS-33364|Show prior auth status as blank for any item which is not flagged for 'Send for Prior Auth' when prior auth status in Open
Bug|RCM|HMS-33503|Prescribed Item deleted from Doctor Consultation is not getting removed from the Pre-Auth Prescription
Bug|RCM|HMS-33593|With online mode, Sponsor amount is going wrong for items ordered in order screen
Bug|RCM|HMS-33688|Quantity is not reducing from the Pop-Up link when the item is marked as arrived which are directly added from prior auth screen.
Bug|Accounting|HMS-27967|In hms_accounting_info table need to update voucher no column type to varchar(50)
Bug|Accounting|HMS-33599|Export to tally is throwing NullPointer exception when the display date is not there in bill_receipts table
Bug|Patient Administration|HMS-33618|[Scheduler] Cancelled by User Name is showing as NULL in case of 2 way sms based cancellations.

## Features in 12.3.10 [/cig-release-120310]

### Billing [GET]

### Center-wise Deposits

Deposit Availability can now be restricted center-wise based on the newly introduced generic preference called 'Enable Patient Deposit Availability' which have two values such as 'for each center' and 'for all centers'.

With 'for all centers' preference, continue the way it determines the deposit availability today in the application, which means deposit collects in any center would be available for all centers to set off it in the bill or can be refunded from any center.

If preference is set to 'for each center', then limit the deposit availability within each center level. Each center can refund or set off the deposits only which are collected in their respective centers.

In the deposit collection/refund screen, Total deposits and Available Deposits are shown based on the preference defined.

In the billing screen, available deposits are determined based on the preference defined, with preference 'for each center', allows to set off the deposits upto what collected in respective center.

### Other minor changes to deposits 

-   Deposit collection/refund is restricted from corporate center in multi center schema. Billing users should login to a center to collect/refund any deposit, receipts will be associated to logged-in center.

-   Deposit set off receipts are associated to particular center where particular bill exists.

-   If any corporate user logins to any center and his cash counter is not matching with logged-in center, then the system will show invalid collection counter message.

#### Automated center/department-wise taxation rules

Introduced a field called tax rate expression in the tax sub group master which will be available only for InstaAdmin and Admin roles, it enables to define expressions based tax rules in each tax sub group level by using the tokens given for both center and department.

![](media/image120310_1.png)

##### Tokens Available

**center_id** center id in the center master is the expected input parameter.

**Dept_name** Department id in the department master is the expected input parameter

Example usage

```html
<#if center_id == 2 && dept_name == 'DEP0002'>5<#else>0<#if>
```

```html
<#if center_id == 1>0<#else>5 <#if>
```

Tax Rate Expression field will be disabled when user checks the 'Exempt' check box as it doesn't support for exempted tax rules.

If no expression is available, then tax will be determined as per tax rate given in the tax sub group master.

### Diagnostics [GET]

#### External Reports Diagnostics Reports Notification

The Diagnostic Reports Review Notifications has been enhanced to support External Reports.

-   The Notification Pop-up is enhanced to view PDF and links which are received as reports.

-   The test which are conducted outhouse have test reports received as a separate document and not generated on Insta, if these reports are received in PDF or as link in HL7 Integration these are allowed to trigger new Notification for Prescribing doctor and admitting doctor.

-   When Notifications are viewed by the Doctor in the notification pop-up they are allowed to add review comments like any other reports.

![](media/image120310_3.png)

### Scheduler [GET]

#### Minor enhancements to Doctor Scheduler

Doctor Scheduler pop-up now defaults the consultation type for main and follow up visit types based on the center preferences settings. These settings were earlier applicable only to the OP Registration screen.

![](media/image120310_2.png)

### Bugs/Minor Enhancements fixed in v12.3.10 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Billing|HMS-33858|Pending Prescriptions Dashboard: Appt/Order status filter is not showing as per the search criteria.
Enhancement|Billing|HMS-33748|Tax token for Deposit Receipt prints.
Enhancement|Insurance|HMS-33687|Should not change approved amount in the bill when update the charges through change rateplan /bed type option
Enhancement|Insurance|HMS-33813|[Insurance] Filter Networks/Plan Type based on Insurance & TPA Combination in the claim batch creation screen
Enhancement|Inventory|HMS-33863|SCM - CSV Based Integration - Outbound : comma needs to be removed in TAX_CODE,TAX_AMOUNT fields
Enhancement|Inventory|HMS-33603|SCM - CSV Based Integration - Date Time Format for BATCH_EXPIRY_DATE in Insta Outbound
Enhancement|Patient Administration|HMS-33067|[Scheduler] Appointment Activity > Display the Resource Name when hovering the mouse on Additional Resources
Enhancement|Patient Administration|HMS-29552|[Scheduler] Consultation Type should be defaulted based on the doctor's practitioner type
Bug|Billing|HMS-33942|Null pointer exception when we do deposit set off for a bill.
Bug|Billing|HMS-33626|Wrong calculation in order screen when preference is set to 'All' prescription.
Bug|Billing|HMS-33622|For sponsor payments, the amount equal to tax is still showing under sponsor payments instead under sponsor remittances.
Bug|Billing|HMS-33372|[Deposits] Defaulted Deposit Receipt Print Templates are not defaulting in transaction screens
Bug|Billing|HMS-32541|Order screen not showing orders done for the patient after 2 users ordered prescription activity same time.
Bug|Clinical|HMS-33493|In System Section Antenatal Details Gestation Period is not calculating based on LMP date and current visit date.
Bug|Insurance|HMS-33970|Not able to add patient insurance for an IP Patient after the patient got registered.
Bug|Insurance|HMS-33968|XML Generation is getting failed but not showing error.
Bug|Insurance|HMS-33910|On generating selfpay XML error info is not showing link instead is showing html tags only.
Bug|Insurance|HMS-33875|On XML generation, throwing error for presenting-complaint observation even if presenting-complaint observation is available.
Bug|Insurance|HMS-33845|Showing duplicate records in claim submission error screen for 'CONS COMPLAINT CODES ERROR'.
Bug|Insurance|HMS-33509|Items are not getting grouped if order in different bills for same patient and the patient is an insurance patient.
Bug|Insurance|HMS-33400|Error Log in Claims Submissions List screen: showing HTML tags.
Bug|Inventory|HMS-33719|On click of replace from supplier returns/replacement screen is throwing null pointer exception.
Bug|Patient Administration|HMS-33957|Login Page: Schema name is not loading by default.
Bug|Patient Administration|HMS-33895|API: null point error in getdoctoravailability method.
Bug|Patient Administration|HMS-33797|[Scheduler] Online Appointments (Widget) booking showing as 5 Minute Slots

## Features in 12.3.11 [/cig-release-120311]

### Billing [GET]

#### Link multiple billing counters to a user to enable centralized collections/refunds

This feature enables users to have multiple billing counters to be associated to a user (but only 1 per center) to enable centralized collections/refunds.

In the user master, the previous billing counter field is replaced with a new link, which opens up a new tab where it allows the user to add the default billing counter for each center.

For a new user, link will not be available. After creating the user, "Add/Remove Billing Counter" link will be available to map further center and Counters.

![](media/image120311_1.png)

If the user is mapped to a particular center, then in new screen "User Center Billing Counter Mapping Details" it will display only the counters associated with that particular center. The user can only map any one counter for a center and save it. But for corporate user, all the centers associated to the counters will be available to map. Not allowed selection of multiple billing counters from the same center.

![](media/image120311_3.png)

It now default Billing Counter when any corporate user login into a center based on his/her center wise billing counter configuration in the master. Deposit Collection/Refund, Bill Screen, OP Registration Screen, Incoming Sample Registration, Incoming Radiology Test, Dental Consultation Screen, Credit Note

It is now not allowed any corporate users to collect advance/settlement/refund from corporate/default center, receipt generation will be allowed only when user logged-into any particular center.

Accounting entries on receipts are made available in those centers where receipts are generated.

#### Bills Report enhancements to compare insurance bills with cash rates.

To enable the provider to understand the variances between the insurance and cash rates. The bill transactions are enhanced to store the cash rates real-time for each insurance case.

The Non-insurance rate plan configured in center preference is considered as cash rate for each center and if none is set, then no cash rate is maintained for all the transactions.

Cash rates are stored in real time whenever items are billed, it stores cash rates only for doctor, diagnostic tests, services, operations, equipment, anaesthesia types master items.

It works when items are billed through following screens only, OP Registration screen, OP/IP Order, Billing, OT management and Orders posted via Ward Activities.

The Cash rate field is available only in the Bill Charge Report Builder by name "Cash Rate".

### Insurance [GET]

#### Coder Claim Review Module Changes v2

The Coder Claim Review workflow is been enhanced with few UI Changes in Coder Review Screen, option to manage masters from the UI and send email notifications to the user.

There are two new masters are added by name "Review Type" and "Review Category" which are available under "Settings--&gt;Admin Masters".

![](media/image120311_6.png)

##### Review Category

The functionality of the Category is to group the Review Types and ability to filter the Coder Claim Review dashboard for the roles having Review Category access. In addition, each review category can be a physician type and enable the whether the email to be sent for those reviews.

![](media/image120311_4.png)

**Type : Physician / Non Physician** - If the review category type is Physician then any new reviews created on a patient will default the admitting doctor automatically. Any physician related queries must be grouped under the review category having set as "Physician".

**Email ID: Yes / No** - If you want to send an email to the recipient upon raising the coder query, then this option must be set as "Yes". Please ensure the valid email id is captured in the user profile.

**Roles** - Please note the access right of "Access for All Coder Reviews" at the role level setting has no impact on the coder claim review dashboard. Now you will have to give access to the roles for the category in the category master. For whichever role needs to have the access to coder reviews in the dashboard must have been added here.

##### Review Types

The review types are one which Medical Coders are using to raise queries.

**Review Type**: It can any short code or short description which Coder can easily enter while raising the query.

**Review Reason**: Description of the review

**Review Category**: Select the appropriate review category. Please note the review category behavior in the previous section.

**TAT**: Currently it is just a placeholder and has no impact on the workflow or the reports

**Review Details**: This is the pre-populated text for the coders while raising the query.

**Center and Roles**: Now, the System Administrator can configure the role by center for automatic selection in the case of multi center implementation. While raising the query, the role is automatically selected based on the patient center. For e.g., if a coder review should be assigned to Role 1 for Center 1 and Role 2 for Center 2 based on the patient center.

##### UI Enhancements

Now, users can see the review history in the coder claim review screen itself. Rest of the functionality has been retained as it is.

If one doctor is associated with multiple users across different centers (ideally one user per center), the auto selection of the doctor's userid is based on the patient's location. If Doctor 1 is mapped with User1 and User 2 from Center 1 and Center 2 respectively, then if the patient belong to Center 1 will have User1 is auto populated where as patient belonging to Center 2 will have User 2. Doctor should not be belonging to corporate center for the coder claim review functionality.

**Coder Claim Review Dashboard**: Now, "All" filter will fetch only the review category associated with logged in user's role.

![](media/image120311_9.png)

### Registration [GET]

#### Additional configuration to determine if registration charges and registration renewal charges are to be posted for a new patient

Visit Registration of patients can be done for a new patient or an existing patient with MR No. But for existing patients it is ambiguous if the original source of the MR No created was from an external source, pre-registration or data import etc. To solve for these cases there is an additional configuration called: "Patient data source where registration/renewal charges are to be skipped" which can have the following hardcoded values:

##### uhid

MR data received via uhid search and using external mr number instead of internal sequence

##### card

MR data populated using civil id card read

##### extpsync

Patient created via external patient sync endpoint

##### register

Patient registered from OP/IP/OSP Registration or using Pre registration API

##### manual

default for others (Data import, Golive initial data seeding, direct data injection to DB)

The values for the preference can be comma separated and entered such as "uhid, manual".

Each registration will have the resource captured from information stored so that for such patients the registration charges and registration renewal charges can be posted accordingly.

![](media/image120311_24.png)

#### Sending Mobile Access credentials to the user

If Insta is integrated with an external mobile app then we send the mobile access credentials to the user for every registration. In order to not spam the patient there are the following minor modifications done:

- The Text Mobile Access is modified to Send Mobile Access credentials on the OP/IP/Pre and Edit Patient details screens.

- Since the patient could be a new registration or an existing patient the send mobile access credentials field is defaulted to Yes only for a new registration and set to No if an existing patient.

**Case 1**: New MR No Patient (OP Registration Add New Patient / IP Registration, radio button selection is New Registration): Default Send Mobile Access Credentials to Yes.

**Case 2**: Existing Patient (OP Registration Add New Visit / IP Registration, radio button selection is MR No/Name/Phone): default Send Mobile Access Credentials to No.

- Pre-Registration screen: always default to Yes.

- Edit Patient Details: always default to No.

- OSP Registration screen doesn't have this field.

- Important Use Case: If the user needs to re-trigger the SMS they can go to Edit Patient Details screen.

### Clinical [GET]

#### OT Forms screen alerts to notify the user incase a concurrent user is modifying documentation

The OT Forms screen has been enhanced to notify a user in case of concurrent usage by another user on the same patient's document.

When the user logs in and the screen is already being modified by another concurrent user then there is a screen message which gives the below message.

![](media/image120311_8.png)

When the user who has created a lock leaves the screen or saves the document the lock is released and the user is notified with another message.

![](media/image120311_7.png)

#### Additional data capture fields in Discharge Screen when marking a patient as dead

Following new fields have been introduced in Discharge screen to capture additional information about patient when Physical Discharge Type is selected as **Death**

![](media/image120311_17.png)

##### Stillborn

A patient can now be marked as stillborn while discharging as dead.

##### Cause of death (ICD Code)

While discharging a patient as dead, ICD code of medical condition leading to death can now be captured.

##### Reports

These fields can be accessed in Visit Details Report Builder for reporting purposes.

### Financial Accounting [GET]

#### Retry and reconciliation mechanism for missing or failed exports

![](media/image120311_5.png)

A new retry mechanism has been introduced in Insta HMS to retry posting to accounting staging table (hms_accounting_info) in case a bill export fails. This is achieved using schedulable system cron "AccountingFailedExportRetryJob " which by default does a check every 15 mins and schedules export of bills that failed to export in previous attempt.

A new reconciliation mechanism has also been introduced in Insta HMS, which periodically scans for bills that got finalized but were never exported using schedulable system cron "AccountingQueueMissingBillsJob". By default this cron runs every 2 hours and scans for missing bills finalized/refinalized in last 2 to 24 hours. There is a System Preference (accessible only for InstaAdmin) to customize this duration which scans the table between hours mentioned (the least time should be atleast 1 hour) and post the missing entries.

![](media/image120311_2.png)

### Reports [GET]

#### Philippines Online Health Facility Statistical Report System Integration

Department of Health, Philippines has mandated all hospitals to submit the statistical reports within the HIS application using web services.

To meet this regulatory requirement, we have introduced a new report "Philippines Online Health Facility Statistical Report", under Reports -&gt; Regulatory Reports

To support some meta information required for this report we have made changes to Center Master

##### Center Master

A new field "Reporting Meta" is added in the center master to have the necessary configurations to generate the report. The data must be entered in valid JSON format.

![](media/image120311_23.png)

The field and the description is as below

Field / Subfield|Data Type|Description|Ohsrs Section / Field
----------------|---------|-----------|---------------------
**settings_ohsrsdohgovph**|&nbsp;|**Settings for OHSRS Webservice**|&nbsp;
settings_ohsrsdohgovph.hfhud_code|String|Facility ID for OHSRS|&nbsp;
settings_ohsrsdohgovph.training_mode|Boolean|Set to true if training site is to be used. Set to false if production site is to be used|&nbsp;
settings_ohsrsdohgovph.webservice_key|String|Webservice key for production site|&nbsp;                                                              
ohsrsdohgovph_genInfoBedCapacity_abc|integer|&nbsp;|General Information - Bed Capacity / Occupancy --> Authorized bed capacity
ohsrsdohgovph_genInfoBedCapacity_implementingbeds|integer|&nbsp;|General Information - Bed Capacity / Occupancy --> Implementing Beds
ohsrsdohgovph_genInfoClassification_servicecapability|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Service Capability
ohsrsdohgovph_genInfoClassification_general|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> General Type
ohsrsdohgovph_genInfoClassification_traumacapability|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Trauma Capability
ohsrsdohgovph_genInfoClassification_natureofownership|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Nature of Ownership
ohsrsdohgovph_genInfoClassification_specialty|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Specialty Type
ohsrsdohgovph_genInfoClassification_government|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Govt Ownership Type
ohsrsdohgovph_genInfoClassification_national|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Govt National Ownership Type
ohsrsdohgovph_genInfoClassification_local|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Govt Local Ownership Type
ohsrsdohgovph_genInfoClassification_private|String|Refer [Lookup values](ohsrsdohgovph_lookupvalues.xlsx)|General Information - Classification --> Private Ownership Type
ohsrsdohgovph_genInfoClassification_specialtyspecify|String|If specialty is others then specify text here|General Information - Classification --> Specialty (Others)
ohsrsdohgovph_genInfoClassification_ownershipothers|String|If ownership is others then specify text here|General Information - Classification --> Ownership (Others)
**dept_mapping_ohsrsdohgovph**|&nbsp;|**Department ID Mapping**|&nbsp;
dept_mapping_ohsrsdohgovph.medicine|Array of String|Department IDs to be considered as general medicine departments| &#8226; Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Medicine &#8226; Hospital Operations - Discharges - Outpatient Visits --> Number of adult general medicine op visits
dept_mapping_ohsrsdohgovph.obstetrics|Array of String|Department IDs to be considered as obstetrics|Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Obstetrics
dept_mapping_ohsrsdohgovph.ipsurgery|Array of String|Department IDs to be considered as for surgeries in IP visit| &#8226; Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Surgery - Pedia &#8226; Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Surgery - Adult 
dept_mapping_ohsrsdohgovph.opsurgery|Array of String|Department IDs to be considered for surgeries in OP visit|Hospital Operations - Discharges - Outpatient Visits --> Number of surgical OP visits
dept_mapping_ohsrsdohgovph.opspecialty|Array of String|Department IDs to be considered for specialty departments for OP|Hospital Operations - Discharges - Outpatient Visits --> Number of specialty( non surgical) OP visits
dept_mapping_ohsrsdohgovph.gynecology|Array of String|Department IDs to be considered as gynecology|Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Gynecology Row
dept_mapping_ohsrsdohgovph.pediatrics|Array of String|Department IDs to be considered as pediatrics|Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Pediatrics Row
dept_mapping_ohsrsdohgovph.emergency|Array of String|Department IDs to be considered as emergency rooms| &#8226; Hospital Operations - Discharges - Emergency Visits &#8226; Hospital Operations - Discharges - Ten Leading ER Consultations &#8226; Hospital Operations - Deaths --> Total number of ER deaths
blood_transfusion_services_ohsrsdohgovph|Array of String|Service IDs to be considered as Blood Trasfusion Services|Hospital Operations - Discharges - Testing and Other Services|Number of Blood units Transfused
csection_operations_ohsrsdohgovph|Array of String|Operation ID for C-Section operations as per OHSRS Webservice. These IDs will be discarded when computing data for Major Operations|Hospital Operations - Surgical Operations - 10 Leading Major Operations (excluding Caesarean Section)  
no_operations_ohsrsdohgovph|String|Operation ID as per OHSRS Webservice definition for "Not Applicable". This value is to be passed if the major operations or minor operations table is to be submitted as empty| &#8226; Hospital Operations - Surgical Operations - 10 Leading Major Operations (excluding Caesarean Section)  &#8226; Hospital Operations - Surgical Operations - Minor Operations
unknown_death_icdcode_ohsrsdohgovph|String|ICD Code as per OHSRS Webservice definition for "Not Applicable". This value is to be passed if the age wise distribution of mortality table is to be submitted as empty|Hospital Operations - Deaths - Leading Causes of Mortality/Deaths Agewise         
unknown_morbidity_icdcode_ohsrsdohgovph|String|ICD Code as per OHSRS Webservice definition for "Not Applicable". This value is to be passed if the causes of er consultation, cause of opd consultation or age wise distribution of morbidity table is to be submitted as empty| &#8226; Hospital Operations - Discharges - Ten Leading ER Consultations &#8226; Hospital Operations - Discharges - Ten Leading OPD Consultations &#8226; Hospital Operations - Discharges - Morbidity
minor_anesthesia_ohsrsdohgovph|Array of String| Anesthesia Type IDs to be considered as local anesthesia| &#8226; Hospital Operations - Surgical Operations - 10 Leading Major Operations (excluding Caesarean Section) &#8226; Hospital Operations - Surgical Operations - Minor Operations            
**icd_mapping_ohsrsdohgovph**|&nbsp;|**ICD Code Mapping**|&nbsp;
icd_mapping_ohsrsdohgovph.maternaldeath|Array of String|ICD Codes to be considered for maternal deaths in Death section| &#8226; Hospital Operations - Deaths - Ten Leading causes of Morbidity/Diseases|Disaggregated as to Age and Sex Exclusion of Maternal Death &#8226; Hospital Operations - Deaths - Total Number of Deaths|Total Number of maternal deaths
icd_mapping_ohsrsdohgovph.cardiacarrest|Array of String|ICD Codes to be considered for cardiac arrest in Death section|Hospital Operations - Deaths - Ten Leading causes of Morbidity/Diseases|Disaggregated as to Age and Sex Exclusion of cardiac arrest
owwa_tpaid_ohsrsdohgovph|String|TPA ID for OWWA|Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty|OWWA Colum
philhealth_tpaid_ohsrsdohgovph|String|TPA ID for Philhealth|&#8226; Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Philhealth Pay &#8226; Philhealth Service/charity
hmo_tpaid_ohsrsdohgovph|Array of String| TPA IDs which are to be considered as HMO|Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty|HMO Column
charityserviceward_mapping_ohsrsdohgovph|Array of String|Ward IDs that are to be considered for Service/Charity Use. All other Wards will be considered as paid use| &#8226; Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Pay &#8226; Hospital Operations - Discharges - Type of Service and Total Discharges According to Specialty --> Service/Charity
**diag_dept_mapping_ohsrsdohgovph**|&nbsp;|**Diagnostic Department ID Mapping**|&nbsp;
diag_dept_mapping_ohsrsdohgovph.xray|Array of String|Diagnostic Department IDs to be considered for computation of XRay Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.ultrasound|Array of String|Diagnostic Department IDs to be considered for computation of Ultrasound Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.ctscan|Array of String|Diagnostic Department IDs to be considered for computation of CT Scan Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.mri|Array of String|Diagnostic Department IDs to be considered for computation of MRI Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.mammography|Array of String|Diagnostic Department IDs to be considered for computation of mammography Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.angiography|Array of String|Diagnostic Department IDs to be considered for computation of Angiography Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.linearaccelerator|Array of String|Diagnostic Department IDs to be considered for computation of Linear Accelrator Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.dentalxray|Array of String|Diagnostic Department IDs to be considered for computation of Dental XRay Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.others|Array of String|Diagnostic Department IDs to be considered for computation of Others Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.urinalysis|Array of String|Diagnostic Department IDs to be considered for computation of Urinalysis Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.fecalysis|Array of String|Diagnostic Department IDs to be considered for computation of Fecalysis Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.hematology|Array of String|Diagnostic Department IDs to be considered for computation of Hematology Row|Hospital Operations - Discharges - Testing and Other Services
diag_dept_mapping_ohsrsdohgovph.clinicalchemistry|Array of String|Diagnostic Department IDs to be considered for computation of Clinical Chemistry Row|Hospital Operations - Discharges - Testing and Other Services            
diag_dept_mapping_ohsrsdohgovph.immunologyserologyhiv|Array of String|Diagnostic Department IDs to be considered for computation of Immunology/Serology/HIV Row|Hospital Operations - Discharges - Testing and Other Services            
diag_dept_mapping_ohsrsdohgovph.microbiologysmearsculturesensitivity|Array of String|Diagnostic Department IDs to be considered for computation of Microbilogy (Smear culture sensitivity) Row|Hospital Operations - Discharges - Testing and Other Services            
diag_dept_mapping_ohsrsdohgovph.surgicalpathology|Array of String|Diagnostic Department IDs to be considered for computation of Surgical pathology Row|Hospital Operations - Discharges - Testing and Other Services            
diag_dept_mapping_ohsrsdohgovph.autopsy|Array of String|Diagnostic Department IDs to be considered for computation of Autopsy Row|Hospital Operations - Discharges - Testing and Other Services            
diag_dept_mapping_ohsrsdohgovph.cytology|Array of String|Diagnostic Department IDs to be considered for computation of Cytology Row|Hospital Operations - Discharges - Testing and Other Services

#### Screen Layout

![](media/image120311_22.png)

##### Reporting Year

![](media/image120311_15.png)

The value for this dropdown is determined using **golive_date** column of center master (This can only be configured from backend). Report can be generated for all years except for the current year. Year is calendar year (Jan 1 to Dec 31).

##### Upload Data

![](media/image120311_19.png)

The value for the report can be uploaded for some sections. If the golive occurs midyear (Not on Jan 1) then system allows upload for all sections (except system sections). There are also some sections for which data is not captured in Insta HMS. For such sections upload is allowed for all reporting years. Refer section specific documentation for Upload Support.

For downloading the CSV template, select a report section from dropdown, and click on "Download CSV Template" next to the dropdown. The CSV template does not contain any data. The first row contains column heading and second row contains column identifier. Leave these rows intact and start filling data from row 3. For some columns there are predefined values that need to be typed as is. Refer below google sheet link for filling up the values.

[Lookup Codes](ohsrsdohgovph_lookupvalues.xlsx) (Fill values in CSV)

For fields operation_code and icd_code filling in ICD Code or Operation Code from following sheets:

[ICD Codes](ohsrsdhgovph_icdcodes.xlsx) (Fill code in CSV)

[Operation Codes](ohsrsdhgovph_operationcodes.xlsx) (Fill code in CSV)

##### Report

![](media/image120311_10.png)

This is preview area of all data points computed from database or uploaded via csv.

##### Actions

![](media/image120311_11.png)

**Generate / Regenerate Report**: This action is to be used for refreshing data from db and processing any unprocessed CSV Uploads.

**Submit to OHSRS**: This action uploads data to OHSRS.

**Signoff Report**: This action performs submission of uploaded report to OHSRS.

![](media/image120311_13.png)

After successful upload of all sections to OHSRS this section becomes available. This allows capturing of name, section, department and designation of person submitting report.

![](media/image120311_21.png)

#### Section Statuses

The report sections display processing statuses for information and any errors below section header, if operation fails. Here are the possible states

##### Unprocessed

![](media/image120311_20.png)

Set if report was never generated or if the section has unprocessed CSV upload.

##### Generation Failed

Report generation resulted in failure for this section. Refer error for details.

##### Generated

![](media/image120311_16.png)

Report generation succeeded for this section. If all sections are in this status, "Submit to OHSRS" action becomes available.

##### Submission Failed

![](media/image120311_12.png)

Report section data upload to OHSRS resulted in failure for this section. Refer error for details.

##### Submitted

![](media/image120311_14.png)

Report section data upload to OHSRS for this section. If all sections are in this status, "Signoff Report" action becomes available along with "Signoff" section.

##### Signoff Completed

![](media/image120311_18.png)

Report is submitted to OHSRS and signed off completed. All actions are blocked once report signoff is completed. The report is available for information purposes only.

Below is matrix indicating allowed actions for a given status

Status|Sections|Generate / regenerate report|Submit to OHSRS|Sign Off
------|--------|----------------------------|---------------|--------
Unprocessed|All|||
Unprocessed|Some|||
Generation Failed|All|||
Generation Failed|Some|||
Generated|Some|||
Generated|All|||
Submission Failed|All|||
Submission Failed|Some|||
Submitted|Some|||
Submitted|All|||
Signoff Completed|All|||

#### Computation Logic for Sections

##### General Information - Quality management

*Upload*: Always

This data is to be uploaded for each reporting year as the same is not stored in Insta HMS. Subtotals and Grand Totals (if any) are auto calculated.

##### Hospital Operations - Healthcare Associated Infections (HAI)

*Upload*: Always

This data is to be uploaded for each reporting year as the same is not stored in Insta HMS. Subtotals and Grand Totals (if any) are auto calculated.

##### Staffing Pattern

*Upload*: Always

This data is to be uploaded for each reporting year as the same is not stored in Insta HMS. Subtotals and Grand Totals (if any) are auto calculated.

##### Staffing Pattern - Others

*Upload*: Always

This data is to be uploaded for each reporting year as the same is not stored in Insta HMS. Subtotals and Grand Totals (if any) are auto calculated.

##### Expenses

*Upload*: Always

This data is to be uploaded for each reporting year as the same is not stored in Insta HMS. Subtotals and Grand Totals (if any) are auto calculated.

##### Revenues

*Upload*: Always

This data is to be uploaded for each reporting year as the same is not stored in Insta HMS. Subtotals and Grand Totals (if any) are auto calculated.

##### General Information - Classification

*Upload*: Never

Always fetched from Centers master reporting meta.

##### General Information - Bed Capacity/Occupancy

*Upload*: Never

Always fetched from Centers master reporting meta.

##### Hospital Operations - Summary of Patient in the Hospital

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

Discharge type *Admission Cancelled* is discarded while doing computation from db. Total number of inpatients, Total newborn, Total Inpatients transferred to this facility is computed based on visit registration date. Other counts are calculated on discharge date.

##### Hospital Operations - Discharges / Hospital Operations - Discharges - Other Specialties

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

Discharge type *Admission Cancelled* is discarded while doing computation from db. All data is fetched based on discharge date and based on department and tpa id mappings configured in Center Master's reporting meta field. Condition of discharge is mapped as below:

Discharge Type|Condition on Discharge (OHSRS)
--------------|---------------------------------
1 = Normal|R/I = Recovered / improved
2 = Absconded|A = Absconded
3 = Dead|D = Died
4 = DAMA|H = Home Against Medical Advice
5 = Referred To|T = Transferred
6 = Admission Cancelled|<DISCARDED>
<UNMAPPED>|U = Unimproved

##### Hospital Operations - Discharges - Morbidity

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

Discharge type *Admission Cancelled* is discarded while doing computation from db. All data is fetched based on discharge date. Data is fetched from **Diagnosis Details section of IP EMR**. Diagnosis marked as Reason for Visit is used. In case Reason for Visit is unavailable Primary Diagnosis is used. Age of patient is determined using FLOOR function, i.e., Patient *x years y months* old is considered as *x years* old.

##### Hospital Operations - Discharges - Total Number of Deliveries

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

Patient Records marked as *Stillborn* is discarded while doing computation from db. All data is fetched based on discharge date. Data is fetched from **Delivery Type field of New Birth Registration**.

##### Hospital Operations - Discharges - Outpatient Visits, including Emergency Care, Testing and Other Services

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

As Insta HMS does not have concept of ER Visits, All OP visits where admitting department is an emergency department (refer Center Master's reporting meta field) are discarded while doing computation from db. All data is fetched based on visit registration date. Data is fetched from **Delivery Type field of New Birth Registration**. For Adult general medicine OP visits, Specialty (Non-surgical) OP visits, Surgical OP visits mapping information for departments (refer Center Master's reporting meta field) is used. For determining antenatal visits, OP visits which has **Antenatal Section of OP Consultation** filled are selected. For postnatal care visits, all OP visits to obstetrics or gynecology departments occurring within 42 days from delivery date (determined by checking admit time of baby), who had an IP visit with delivery, are considered.

##### Hospital Operations - Discharges - Ten Leading Causes of OPD Consultation

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

As Insta HMS does not have concept of ER Visits, All OP visits where admitting department is an emergency department (refer Center Master's reporting meta field) are discarded while doing computation from db. All data is fetched based on visit registration date. Data is fetched from **Diagnosis Details section of OP Consultation**. Diagnosis marked as Reason for Visit is used. In case Reason for Visit is unavailable Primary Diagnosis is used.

##### Hospital Operations - Discharges - Ten Leading Causes of ER Consultation

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

As Insta HMS does not have concept of ER Visits, OP visits where admitting department is an emergency department (refer Center Master's reporting meta field) are considered while doing computation from db. All data is fetched based on visit registration date. Data is fetched from **Diagnosis Details section of OP Consultation**. Diagnosis marked as Reason for Visit is used. In case Reason for Visit is unavailable Primary Diagnosis is used.

##### Hospital Operations - Discharges - Testing and other services

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

Cancelled tests are discarded while doing computation from db. All data is fetched based on visit registration date. In case of incoming samples, incoming sample registration date is used. Mapping information for diagnostics departments (refer Center Master's reporting meta field) is used for mapping diagnostics departments to test/service.

##### Hospital Operations - Discharges - Emergency Visits

As Insta HMS does not have concept of ER Visits, OP visits where admitting department is an emergency department (refer Center Master's reporting meta field) are considered while doing computation from db. All data is fetched based on visit registration date.

##### Hospital Operations - Deaths

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

All data is fetched based on discharge date. Total deaths is auto computed and is sum of the Total number of inpatient deaths, er deaths and cases declared 'Dead on arrival'. For inpatient deaths computation, all discharges where discharge type is Death, Dead on arrival is No and Stillborn is No are considered. All cases where discharge type is Death, Difference between Date and time of birth and Date and time of Death is less than 28 days are considered Neonatal deaths. For computation of maternal deaths, **Cause of death (ICD Code) field from Discharge** along with icd code mapping information for maternal deaths (refer Center Master's reporting meta field) is used.

##### Hospital Operations - Deaths - Leading Causes of Mortality/Deaths Agewise

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

All data is fetched based on discharge date. For computation of this grid, **Cause of death (ICD Code) field from Discharge** is used for all discharges where discharge type is Death. ICD code mapping information for maternal deaths and cardiac arrest (refer Center Master's reporting meta field) is used to discard relevant discharges.

##### Hospital Operations - Surgical Operations - Major Operations(excluding C-Section)

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

All data is fetched based on visit registration date. As the OT module of Insta HMS is basic, all data is fetched based on billing data for surgical operations. All surgical operations where anesthesia was administered, except for the anesthesia types configured in local anesthesia id mapping (refer Center Master's reporting meta field), are included for computation of data for this grid. Mapping for C Section operation codes(refer Center Master's reporting meta field) is used for discarding c-section from report. In case, there is no data available "Not Applicable" (refer Center Master's reporting meta field) is reported as operation with surgery count 0. Ensure that the Operation code provided by OHSRS are mapped to Order Code/Alias field of operation master as the same is used to generate data.

##### Hospital Operations - Surgical Operations - Minor Operations

*Upload*: Allowed for first year if Golive date between Jan 2 - Dec 31.

All data is fetched based on visit registration date. As the OT module of Insta HMS is basic, all data is fetched based on billing data for surgical operations. All surgical operations where anesthesia was not administered, or the anesthesia type that was administered is part of local anesthesia id mapping (refer Center Master's reporting meta field), are included for computation of data for this grid. In case, there is no data available "Not Applicable" (refer Center Master's reporting meta field) is reported as operation with surgery count 0. Ensure that the Operation code provided by OHSRS are mapped to Order Code/Alias field of operation master as the same is used to generate data.

### List of Enhancements and Bugs Fixed in v12.3.11 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Story|Patient Administration|HMS-33922|Block calendar doctor day-wise view popup: should have the doctor name defaulted.
Story|Inventory|HMS-33488|[Token] Expiry Date token for issue/return Print
Bug|Billing|HMS-34109|Null pointer exception occurs on cancelling the operation from the order screen.
Bug|Billing|HMS-34101|Primary Surgery Surgeon fee charge line not posted to bill while added multiple surgeries through OT management
Bug|Billing|HMS-34097|Surgery description changed in bill while changed rate plan in bill.
Bug|Billing|HMS-34095|Bill screen: Display of bill card should be sort ordered by latest first.
Bug|Billing|HMS-34078|Amount to be paid disappears on changing the mode of payment (Cash/Card) in the billing screen
Bug|Billing|HMS-34006|Error while redeeming "One apollo" points.
Bug|Billing|HMS-34237|Receipts and Bill Receipts migration is taking long time for large customers
Bug|Billing|HMS-33445|[Pinelabs EDC] In Billing screen after clicking on process payment transaction details reflecting in EDC machine and successful transaction is completed. But same details not uploaded automatically in billing screen.
Bug|Clinical|HMS-34019|MAR : IV Infusion stopped time shows under the infusion started time slot instead actual stopped time slot
Bug|Diagnostics|HMS-34098|Refreshing lab reports screen throws concurrent modification error.
Bug|Financial Accoounting|HMS-33917|[FA] - Bill_Last_Finalized_Date is showing the Old Finalised date for the reversal postings
Bug|Insurance|HMS-34102|Accumed Claim Submission XML creation throws errors.
Bug|Insurance|HMS-33673|Prior auth details to be populated when patient marked arrived through scheduler
Bug|Inventory|HMS-34027|Bill/Sales screen: Amount gets cleared in the payment section on changing payment mode.
Bug|Inventory|HMS-34069|[Stock Issue] Issue to User/Department/Ward &gt; Increase the width of the field item name
Bug|Patient Administration|HMS-34221|SMS Message dispatcher configuration for HTTP based services not working properly
Bug|Patient Administration|HMS-34031|Patient details loading is taking a long time if patient has too many visits.
Bug|Patient Administration|HMS-33981|In OP Registration screen on arrival of patient from scheduler screen the side bar in OP Registration screen which list the patient details is showing the doctor details of future appointment of same patient.
Bug|Patient Administration|HMS-34030|Update patient portal login password through API
Bug|Patient Administration|HMS-33950|Visit EMR API throws an error on the Mobile App.
Bug|Patient Administration|HMS-33855|Surgery Scheduler: Not able to see the doctor in service scheduler resource drop down if we map the doctor to any particular center.
Bug|Patient Administration|HMS-33754|Slots are showing available even if the slot is actually not available.
Bug|Patient Administration|HMS-32570|In the Visit details report builder if we select the filter as nationality then in the filter drop-down all the countries are shown twice.
Bug|Patient Administration|HMS- |In the Visit details report builder if we select the filter as nationality then in the filter drop-down all the countries are shown twice.

## Features in 12.3.12 [/cig-release-120312]

### Clinical [GET]

#### Malaffi HIE Integration - Phase 1(a paid add-on module; applicable to Abu Dhabi customers only)

Malaffi is Abu Dhabi's first, unified health information exchange platform that facilitates a more patient-centric approach to healthcare provision. Malaffi enables healthcare facilities, healthcare professionals and government authorities across the Emirate of Abu Dhabi to access and share patients' medical information in order to deliver better healthcare quality and enhance patient safety and overall health outcomes.

As a part of the program initiative Insta is expected to share below patient information across visit in HL7 Formats for the HIE to construct patient records

-   Patient demographic data

-   Medication list

-   Diagnosis list

-   Allergies list

-   Procedures list

-   Clinical encounter history and notes

-   Laboratory and radiology results

![](media/image120312_1.png)

In return the HIE also provides access to the relevant user his Patient Information which they have collected across the hospitals through an embedded web link which helps the user in better patient care. For more information please [*visit the site*](https://www.malaffi.ae/en/malaffi-participants.html).

As part of this release HL7 Messages related to Patient Visits (ADT Messages), SSO/SAML enabled Malaffi user-authentication and a link for the user to access Malaffi Portal for Patient information are made available and subsequent releases will incorporate Phases 2 and 3 which are more data points about the patient encounter.

Malaffi has rolled out certain guidelines to Participant (Provider) and Participant (IT) Systems(HIS/LIS/RIS) which are as below:

-   For better maintenance and uniqueness all provider participants are assigned a specific "Organisation Code" and to identify the system used by participant hospitals providing a specific "System Code"**,** this information are expected to be part of the messages shared with Malaffi.

-   Malaffi has rolled out a specific HL7 Message and Segment construct to be shared for the HIE program, to have better quality information.

-   Malaffi has rolled out a standard codeset for specific attributes related to patient, treatment and result recording to be used across all the System to have uniformity on the information received.

In this release the Insta user profile has been enhanced to capture mandatory single-sign on/saml integration validations.

-   Additional user description fields added in the master are First Name, Middle Name, Last Name, Gender, Email ID, Mobile No, Employee ID, Profession, Employee Category and Employee Major.

![](media/image120312_2.png)

-   The Organization Code can be captured in the Center master.

-   To authenticate the Insta user credentials and access controls it is necessary to associate the user with the respective Malaffi Role (which is linked via the Insta Hospital Role)The Malaffi Roles are: a> Primary Provider, b> Secondary Provider, Tertiary Provider or Front Desk. Since a user can be mapped to multiple Hospital Roles in Insta, we will take the hierarchy of the Malaffi Role and apply that in the hierarchy of Level 1 > Level 2 > Level 3 > Level 4.

![](media/image120312_3.png)

![](media/image120312_4.png)

-   The user can then access the Malaffi link from the Patient / Visit EMR.

![](media/image120312_5.png)

-   Below is a table which lists Insta event triggers and message types which are shared with Malaffi on Patient Registration, Admission, Add/Modify Visit or Discharge events.

**Insta Event Trigger**|**Message Type**|**Message Description**
---------------------|--------------|---------------------
IP Registration (New Patient)|A28|Add patient information
IP Registration (Existing Patient|A01|Admit/visit notification
Physical Discharge|A03|Discharge/end visit
Registration (New Patient)|A28|Add patient information
Registration (Existing Patient|A04|Register a patient
Pre-Registration (New Patient)|A28|Add patient information
OP to IP Conversion|A06|Change an outpatient to an inpatient
Edit Patient Details/Edit Visit Details|A08|Update patient encounter information
&nbsp;|A31|Update person information
Readmit patient|A13|Cancel discharge/end visit
Edit Patient Details (When Mark Patient as Duplicate)|A40|Merge Patient


#### Notification for Radiology Reports addendums

The diagnostic report review notification feature is further enhanced to have notifications triggered to the prescribing/admitting doctor for the addendum for radiology reports.

-   When an Addendum is added against a Signed-off report, a new notification will be generated and the same will be notified to the Prescribing doctor for outpatient and admitting doctor for the Inpatient.

-   In the pop-up the user would be able to add a new review and would be able to view the old review comments.

![](media/image120312_6.png)


### Insurance [GET]

#### Pre-Authorization enhancements to support partial approvals

When there were partial quantity prior auth approval, it was used to show as fully approved in previous versions, so users were finding difficulties to find whether items got completely approved or not. It is now enhanced to support partial quantity prior auth approval in the application.

Pre-Auth prescriptions now have a field option to enter approval quantity against each item. When online prior auth is enabled, then approved quantity gets updated through e-authorization file. In case of manual transactions, the system will by default take claimed quantity as approved quantity while updating activity status to approved. However, users can go and override the approved quantity and amount if there is any variance in the approval.

prior auth status will be updating based on the number quantity approved in pending prescription pop up and ppd screens.


### Billing [GET]

#### Preference to enable Display of Activity-wise status on Bill Finalization

Introduced a generic preference to enable the warning pop up for consultation/lab/radiology orders which are still not completed and ask for confirmation to continue bill finalization/closure. It now gives warning only for those items configured.

### List of Enhancements and Bugs Fixed in v12.3.12 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Billing|HMS-33782|Day Book Report now displays the EDC Machine name for Pine-labs Integrated devices.
Enhancement|Billing|HMS-34340|Accounting Report Builder has two fields added which are Bill Last Finalized Date and Charge Reference ID. There is an additional filter for Created Date.
Enhancement|Billing|HMS-34206|A new configuration to set which incomplete activities need to be alerted to the biller on Bill Finalization/Closure
Enhancement|Clinical|HMS-20819|Coder Claim Review Report Builder has two fields added which are OP Type and Consultation status.
Enhancement|Insurance|HMS-33951|The process button is disabled in the Remittance Advice download screen once the status is changed to Completed/Partially Completed.
Enhancement|Insurance|HMS-34057|On ordering prescribed items, Prior auth mandatory validation is removed if prior auth always required status is overridden in op consultation screen. It is continue to validate if any item is directly ordering.
Enhancement|Insurance|HMS-34161|Accumed Submission XML transactions are posted to review the Claim History. Do note that it stores only the first submission and one remittance history and resubmissions is not part of the scope.
Enhancement|Insurance|HMS-34272|Visit Classification Type Field is added in Visit Details Report Builder as an available field to get the statics of selpay patients types such as selfpay, medical tourist, and proforma payors.
Enhancement|Inventory|HMS-33602|The SCM Transaction Date now follows a format of dd-mm-yyyy hh:mm:ss.
Enhancement|Clinical|HMS-15710|Generic Document (ODT) forms now have additional prescribed activity names and diagnosis information tokens.<br>-   _patient_prescribed_cpt_codes (CPT Codes with Description in Comma Separated)<br>-   _patient_prescribed_medicines (Prescribed Medicines in Comma Separated)<br>-   _patient_prescribed_med_and_drug_codes (Prescribed Medicines With Drug Codes in comma separated)<br>-   _patient_prescribed_med_drug_codes (Prescribed medicines Drug Codes in comma separated).
Enhancement|Clinical|HMS-33923|View Insurance Details now displays the insurance validity start and end dates on the OP Consultation screen.
Enhancement|Patient Administration|HMS-33478|There is an additional attribute for the Order Set to determine whether it should be allowed to be booked via the Patient Portal or only on HMS.
Bug|Billing|HMS-34237|Receipts and Bill Receipts migration is taking long periods for large customers
Bug|Billing|HMS-34217|Prior Auth approval details entered while posting surgery charges through add to bill in the advanced OT module is not getting updated in bill.
Bug|Clinical|HMS-32288|BMI chart in EMR shows 0 to 20 Years instead of 2 to 20 Years.
Bug|Clinical|HMS-33700|Transaction clean up script is deleting data in the 'fields' table. This is a master table for discharge summary fixed fields.
Bug|Clinical|HMS-34049|Allergy details showing on patient header displays the java codes
Bug|Insurance|HMS-34077|Pending Prescription Dashboard shows activities added from pre-auth prescription without marking Send for prior-auth.
Bug|Insurance|HMS-34117|Pending Prescriptions Dashboard: On cancelling orders the status has to be reverted to allow a new appointment booking.
Bug|Insurance|HMS-34213|In self pay claims batch record count and claims count does not match.
Bug|Inventory|HMS-6905|Stock Issue Report Shows Package MRP & Value MRP values as 0 against direct issue to department transactions.
Bug|Patient Administration|HMS-34406|OP Registration: Referred by doctor name gets cleared if the field is pre-populated and the form details is changed.

## Features in 12.3.13 [/cig-release-120313]

### Insurance [GET]

#### Codification screen changes

The observation values for Diagnostics Tests can now be overridden to enable claim submissions for cases where the lab values were conducted out-house.

If the physician prescribes an item with the criteria selected as prior auth required, it is carried forward to pre-auth prescriptions regardless of the claim limits/billed amount.

### Reports [GET]

- Doctor and User Signature Tokens for Generic ODT and Generic Form based claim forms.

-   The admitting doctor and user signature can now be added to the Generic ODT and Generic Forms which are used for claim form documentation.

### Messaging [GET]

Patient Appointment Reminder by email also supports the configuration to set up appointment reminders for confirmed, booked or both appointments.

### Integrations [GET]

#### SCM Integration

Item Master is now available in an out-bounded fashion. Whenever any item is created or modified, the Item Master details are pushed to the CSV file.

Approved Transfer Indent is also available in an out-bounded manner. Only approved Transfer Indents are exported to CSV and Indent level Remarks posted against every item in the that Indent.

### List of Enhancements and Bugs Fixed in v12.3.13 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Bug|Billing|HMS-34601|Change of patient category for a patient with an operation already added to bill, throws a null pointer exception.
Bug|Billing|HMS-34497|Bill Charge Allocation Job throws errors if jobs are set to run in a different server.
Bug|Insurance|HMS-34606|Prior Auth Approval downloads fail if the XML comments are long.
Bug|Insurance|HMS-34569|Adding more than 9 observations for a test fails.
Bug|Insurance|HMS-34554|Saving Prior Authorization if a user has logged in with SSO throws an error.
Bug|Insurance|HMS-34521|Prior Authorization auto download is failing if the authorization result tag is having value 'Pending'.
Bug|Insurance|HMS-34531|Codification screen shows tests as 'Not Conducted' after tests are signed off.
Bug|Clinical|HMS-34419|Multiple notifications are displayed for radiology addendum messages.
Bug|Diagnostics|HMS-34350|The break tag in diagnostics reports displayed as text.
Bug|Patient Administration|HMS-34545|Next day appointments (patient appointment reminders) SMS are limited to 100 count.
Bug|Patient Administration|HMS-34489|Appointment Activity does not apply resource mapping controls.
Bug|Patient Administration|HMS-34466|getPatientVisits API has the 6 months control removed for the MR No attribute.

## Features in 12.3.14 [/cig-release-120314]

### Clinical [GET]

#### IP-EMR Force Remove Lock option at a Section level

The IP-EMR feature allows multiple users to capture documentation in a concurrent fashion but due to the case where a section gets locked out in cases where the user has not saved the page or force logged out of the browser there is now a Force Remove Lock option introduced to allow the user to unlock the section, but the data captured by previous user in this case is lost.

![](media/image120314_2.png)

There is a confirmation message displayed to the user on clicking on force remove lock.

![](media/image120314_1.png)

##### Clinical Preferences for IP-EMR Force remove lock option

The clinical preferences allow the force lock option to be available only after X minutes where the system currently defaults to 15 mins.

### Scheduler [GET]

#### Doctor Scheduler

The user master attribute 'Scheduler default doctor' has been removed and on user login (if user is a doctor) the resource list defaults to the doctor as the first selected resource. This is applicable based on the combination of the user level configurations such as 'scheduler department' and 'Doctor login controls applicable on scheduler view' to apply controls whether only the doctor is displayed as a resource or multiple doctors.

### Financial Accounting [GET]

#### New filter options

There is now a "created_at" filter and a param added "filter_by" which is mandatory.

The other values namely, "voucher_date", "bill_finalized_date","bill_last_finalized_date" remain as they are. One can use date and time for "from_date" and "to_date".

#### Failed export checks 

Reposting of receipt vouchers to the FA staging table is supported by the FA retry API along with bills.

### List of Enhancements and Bugs Fixed in v12.3.14 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Billing|HMS-33865|Scroll will auto-hide the patient header section.
Enhancement|Patient Administration|HMS-34604|The Patient Upload Document pop-up now wraps long named document names to display the list.
Enhancement|Patient Administration|HMS-34630|Patient Appointment Reminder Message Template now has the 'Surgery Department' added as a token.
Enhancement|Patient Administration|HMS-32933|Dynamic Appointment Reminder by Email has the configuration to define whether the message is sent for booked, confirmed or both appointments.
Bug|Billing|HMS-35162|Number format exception error occurs on bill finalization.
Bug|Billing|HMS-35141|The Discharge message displays Patient Due amount with negative amounts in a case.
Bug|Billing|HMS-34999|Registration: The dynamic copay pop-up which allows modification of copay amounts shows blank insurance categories.
Bug|Billing|HMS-34909|Receipts Migration: The allocated amount is shown wrong in bill receipts when deposit set off is done against multiple package bills.
Bug|Billing|HMS-34905|Deposit Receipt date is taking current time if we are trying to create backdated receipts.
Bug|Billing|HMS-34843|Registration screen: pay & close times out.
Bug|Billing|HMS-34760|Change consulting doctor throws a null pointer exception.
Bug|Billing|HMS-34748|Connecting Insurance to a Cash bill throws a null pointer exception if the OT Module is enabled for the customer.
Bug|Billing|HMS-34712|Search deposit screen doesn't display old deposit receipts against the center.
Bug|Billing|HMS-34638|Pending Prescription Dashboard: the prior auth status filter doesn't apply to the results.
Bug|Billing|HMS-34562|Performance Improvements to the Prior Auth Prescription and Prior Auth Approvals screens.
Bug|Billing|HMS-34502|Order screen throws an internal server error for a diet order.
Bug|Billing|HMS-34386|Bill amount shows 0 in a case where all previous charges are modified although there are dues outstanding.
Bug|Billing|HMS-33905|Collections Report Builder throws an error if pulled as a tabular summary where Horizontal Axis = Payment Mode.
Bug|Clinical|HMS-34635|OP-EMR: Unable to edit the medicine in the doctor consultation screen in case the ERx prescription was canceled.
Bug|Clinical|HMS-34592|User is unable to prescribe a diagnostics package if user has no screen rights to the OP Registration screen.
Bug|Clinical|HMS-34556|HL7 ADT messages fail if the user is not marked to receive Email/SMS messages.
Bug|Insurance|HMS-35030|Claim batch submission screen: Network/Plan Types are to be filtered by user's logged in center.
Bug|Insurance|HMS-34927|OP Consultation: displays prescribed medicines as excluded although it is covered as per the insurance plan.
Bug|Insurance|HMS-34855|OP Registration screen: throws an OOPS eros on clicking on the view dynamic co-pay details popup.
Bug|Insurance|HMS-34607|Order screen: throws a null pointer error in cases where the insurance category mapping was changed in the applicable insurance plan masters.
Bug|Inventory|HMS-34873|Sales screen: On edit of sale quantity displays an alert which says claim amount cannot be greater than net amount.
Bug|Inventory|HMS-33862|Pharmacy Sales Estimates screen does not reflect amounts.
Bug|Patient Administration|HMS-35061|Dynamic Appointment configuration for sending reminders for a booked/confirmed appointment does not apply from the old scheduler screens for Services/Tests/Surgeries.
Bug|Patient Administration|HMS-34825|Appointment activity has a slot display fix for inconsistent behaviour.
Bug|Patient Administration|HMS-34732|Daily collection SMS fails to be triggered.
Bug|Patient Administration|HMS-34699|Print Configuration: spelling error for Insurance Print
Bug|Patient Administration|HMS-34684|OP Registration: add new visit fails.
Bug|Patient Administration|HMS-34654|OP Registration: displays incorrect patient details on marking appointments arrived.
Bug|Patient Administration|HMS-34634|Patient appointment reminder sms throws an error on using the token: center_contact_phone.
Bug|Patient Administration|HMS-34416|OP Registration: Govt ID field is greyed out on marking arrived for a new patient with no previous MR no.


## Features in 12.3.15 [/cig-release-120315]

### Clinical [GET]

#### New Clinical Section - Problems

A new clinical section called __Problems__ which can be added to the form based clinical documentation screens such as OP Consultation and IP-EMR only for now.

Problem lists facilitate continuity of patient care by providing a comprehensive and accessible list of patient problems in one place. Problem lists used within health records are a list of illnesses, injuries, and other factors that affect the health of an individual patient, usually identifying the time of occurrence or identification and resolution. They are an important communication vehicle used throughout the entire healthcare continuum.

With this feature there is now clinical documentation available which carries the problems list across the patient visits.

The problems list displays as a system section as displayed below, it displays the status, notes, onset and recorder by user details.

The problem state is always defaulted to 'active' and can later be marked as inactive or recovered.

While adding a problem it can be marked as 'Externally Identified' this allows to capture the external doctors name.

![](media/image120315_3.png)

The problem can be modified and deleted and a view of the history of the problem is available for view.

![](media/image120315_2.png)

### Insurance [GET]

Define the display order for Insurance Item Categories for view in the Dynamic/Edit co-pay popup.

Insurance categories now have the display order which can be defined which applies on view of the Dynamic Copay popup in the following screens: OP Registration, IP Registration, Outside Patient Registration, Add/Edit Insurance screens.

![](media/image120315_1.png)

### List of Enhancements and Bugs Fixed in v12.3.15 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Bug|Billing|HMS-35228|Built in Print Template Expense Statement has a syntax issue.
Bug|Clinical|HMS-34234|OT Management screen throws a NumberFormatException: For input string: "" on marking the operation 'completed'.
Bug|Clinical|HMS-35227/IES-92|Change Type undefined error occurs on opening a saved consultation.
Bug|Insurance|HMS-34508|Claim generation fails if characters is more than 30000.
Bug|Inventory|HMS-35198|Stock Entry screen freezes for 1 minute after selecting a particular store name.
Bug|Inventory|HMS-34367|PO: Unable to search and retrieve item if it has a special character '+'.
Bug|Patient Administration|HMS-35138|Daily collection SMS is triggering every hour even though cron job is set to trigger at particular time
Bug|Patient Administration|HMS-34923|Add Patient document: newly added document for a patient defaultly loads another patient document.
Bug|Patient Administration|HMS-34239|Bill activity patient header does not display primary / secondary diagnosis.
Bug|Patient Administration|HMS-30509|Surgery scheduler: appointment status is changed from arrived to booked.


## Features in 12.3.16 [/cig-release-120316]

### Billing [GET]

#### Pending Prescription popup enhancements for prescribed items with multiple quantities

For dental and physiotherapy prescriptions the doctor would prescribe multiple quantities of the same activity to be performed in one or multiple sittings. For such cases in the pending prescription popup we display one row for each prescribed quantity. But this causes a usability problem for the user to order for the dental services which are conducted in one sitting and updating them with the respective tooth numbers for claim submission purposes. In order to ease the usability issue here we have done the following change to merge the prescribed quantity of a service based on a new configuration in the services master.


Introduced a new configuration called 'Quantity Split in Pending Prescription' in the service master, which has two possible values such disabled and enabled.

![](media/image120316_3.png)

-   When this property is disabled in the master, a service prescription shows in the single row irrespective of the quantity prescribed by a doctor and quantity also be editable in pending prescription pop up. For any such service, quantity is partially approved in the prior authorization screen, then this particular service shows in two different rows, one row for total approved quantity and other for total denied quantity otherwise it shows one quantity per row when multiple quantities are prescribed by a doctor.

-   Quantity fields will be disabled for only those items where only one quantity available in the pending prescription pop up. Also there will be validation available when quantity edits more than doctor prescribed.

![](media/image120316_2.png)

### Insurance [GET]

#### Claim batch creation screen enhancements

Claim batch creation screen has a filter to generate batch by codification status, which enables insurance users to submit only those claims for which coding is completed by coders.

![](media/image120316_1.png)

### List of Enhancements and Bugs Fixed in v12.3.16 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Bug|Billing|HMS-34467|Cancelling a pre-auth which is resubmitted throws an error.
Bug|Billing|HMS-34821|Order screen throws null pointer exceptions for items which are added directly in the pre-auth prescription and cancelled.
Bug|Billing|HMS-35079|Available deposit and deposit set amounts are incorrect in a case.
Bug|Billing|HMS-35192|Report Generation job fails blocking download of reports.
Bug|Billing|HMS-35256|View Dynamic Co-pay doesn't show certain defined insurance categories.
Bug|Billing|HMS-35296|Bill level discount calculates incorrectly with inventory items and displays an incorrect message saying the user is not permitted to give a discount.
Bug|Billing|HMS-35308|OT charges post for secondary operations.
Bug|Billing|IES-20|Deposit amount is not reflecting correctly
Bug|Billing|IES-286|Discount at the Bill level for all Inventory Items is calculating incorrect and system is giving a popup you are not permissible.
Bug|Clinical|IES-335|Urgent - Data entered in the Triage/Nurse assessment which is more than single line is getting truncated and not printing.
Enhancement|Diagnostics|HMS-35189|External LIS Integration: Tests Pending for Results are not to be printed as the part of the Diagnostic Reports
Enhancement|Diagnostics|HMS-35307|Lab Reports now have a print token "${test_details_id}" to sort the lab values.
Bug|Insurance|HMS-34263|Claim activity id duplicated in submission XML for operation activities.
Bug|Insurance|HMS-34486|Direct orders are not validating the items which are defined as pre-auth = 'always'.
Bug|Insurance|HMS-34852|Performance Improvements to the edit insurance screen.
Bug|Insurance|HMS-34906|Prior Auth approvals are not getting updated for MRNo where the user is not having access to the patient confidentiality group.
Bug|Insurance|HMS-34926|Prior auth Requests: It is not referring latest ID payer while resubmitting/cancelling the request
Bug|Insurance|HMS-35015|PBM Module - Items Selling price is zero in the PBM Edit Prescription Screen and in the PBM Request xml.
Bug|Insurance|HMS-35210|Bill screen displays current date for a back-dated operation order.
Bug|Integration|HMS-35231|PV2 segment is missing in ADT_A08 message for IP patient
Bug|Integration|HMS-35251|duplicate mr no is missing in MRG segment of ADT_A40 message
Bug|Inventory|HMS-34779|Pharmacy Sales: search by retail credit customer fails to retrieve patient details.
Bug|Inventory|HMS-34911|User Issues are blocked on searching for an item with item code as the batch numbers are not getting retrieved.
Bug|Patient Administration|HMS-35166|Not able to create patient portal - Create User API is not working
Bug|Patient Administration|IES-184|SMS message body is having meta data while receiving at patient end
Bug|Patient Administration|IES-337|Patient list is not reflecting as per the schedule(Chronological order)
Bug|Patient Administration|IES-340|Internal Server Error while registering a patient.


## Features in 12.3.17 [/cig-release-120317]

### Patient Administration [GET]

#### Bulk Resource Overrides Enhancements

Apply Bulk Resource Overrides for multiple schedulable resources based on the center applicable for specific days of the week.

The Resource overrides can now be added in bulk for multiple schedulable resources, applicable to the center across specific days of the week.

Navigate to Scheduler &gt; Resource Availability Overrides and there is now a new hyperlink option at the bottom of the screen that allows definition of bulk resource overrides.

![](media/image120317_3.png)

Clicking on the screen takes you to a new screen which allows the user to define the center, resource type and one or multiple resources to whom the resource overrides apply to, there is also an option to select all applicable schedulable resources for the resource type, timings, whether to apply these overrides regardless of previously existing overrides, days of the week and specify the timings applicable.

The update existing override check-box if selected will update existing overrides for the resources selected.

There is also a warning in case there are existing overrides and enforces the user to select the check-box to proceed.

![](media/image120317_6.png)

![](media/image120317_4.png)

On saving the entries are created in bulk on the resource overrides worklist.

-   The worklist displays the resource name and resource type.

-   There is an additional date range filter option as well.

### Insurance [GET]

#### Remittance Advices

Remittance Advice Download screen now has an option to search by remittance file name.

![](media/image120317_8.png)

Additional filter in the 'Remittance Error Log' = file name, where results are filtered by the user's logged in center.

![](media/image120317_2.png)

#### Codification

Minor Codification screen improvements to improve usability and productivity of coders:

-   Visit prior authorization number is editable

-   Insurance card

-   Emirates ID

-   Eligibility Authorization Status and Reference Number

-   An indication to differentiate insurance and non insurance bills

-   Codes search worklist:

    -   Network search filter.

    -   New columns: Visit Date, Sponsor and Network

    -   Access links: add/edit insurance, claim batch creation, edit visit, edit patient screens

![](media/image120317_5.png)

#### Excluding zero amount claims from the claim batch

While creating a claim batch, it will consider only those zero amount claims for which at least an activity found with 'zero claim amount' configuration enabled, otherwise all such zero amount claims get excluded.

### Accounting [GET]

#### New Module for Accounting Integration

Now Accounting Integration for external Financial ERP is module activation based. One must enable "mod_accounting" for the Account Integration. This is applicable for any external system using "hms_accounting_info" API / Table. This module is disabled by default, but for customers using the current accounting apis and db mode of migration we are ensuring hand migration.

In the case of exporting of previous entries you must enable following accounting crons and set the system preference in Insta.

#### Retry and reconciliation mechanism for missing or failed exports

![](media/image120317_7.png)

A new retry mechanism has been introduced in Insta HMS to retry posting to the accounting staging table (hms_accounting_info) in case a bill export fails. This is achieved using schedulable system cron "AccountingFailedExportRetryJob " which by default does a check every 15 mins and schedules export of bills that failed to export in the previous attempt.

A new reconciliation mechanism has also been introduced in Insta HMS, which periodically scans for bills that got finalized but were never exported using schedulable system cron "AccountingQueueMissingBillsJob". By default this cron runs every 2 hours and scans for missing bills finalized/refinalized in last 2 to 24 hours. There is a System Preference (accessible only for InstaAdmin) to customize this duration which scans the table between hours mentioned (the least time should be atleast 1 hour) and post the missing entries.

![](media/image120317_1.png)

### Integrations [GET]

#### New filters in Find Patient API

Now there is another optional parameter added in Find Patient API to allow searching patient details using Old MR Number. Refer API documentation for more details.

### List of Enhancements and Bugs Fixed in v12.3.17 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Clinical|HMS-35293|The Vaccinations List is sort ordered in alphabetical order.
Bug|Billing|HMS-35326|Collection Allocation Report: Each sale return bill is reducing -0.01 amount against the main sale receipt.
Bug|Billing|HMS-35319|Pharmacy counter related receipts are not reflecting in Day book report builder and so it doesn't match with the collection allocation report.
Bug|Billing|HMS-34781|Clicking on a bill hyperlink should default the bill in the screen.
Bug|Core|HMS-34762|Center drop-down: unable to search/select the center name by typing the alphabets.
Bug|Billing|HMS-34706|Order screen: Prescribed items are duplicated in case of concurrent usage and missing in order screen.
Bug|Insurance|HMS-34104|Coder claim review screen: Doctor login user is able to change role and recipient data
Bug|Billing|HMS-33750|Bed charges allocation is not happening when bed shifting from one bed to other bed in ADT screen
Bug|Clinical|HMS-34639|IP case sheet to Patient EMR throws an error page.
Bug|Insurance|HMS-35340|Edit Insurance screen: Performance improvements.
Bug|Patient Administration|HMS-35336|Print Registration card throws an exception when multiple tokens are returned.
Bug|Patient Administration|HMS-34936|Calendar view is starting with current day of the week when calendar is set to show 'Day View'
Bug|Patient Administration|HMS-27291|Saved search on the homepage throws an exception error.
Bug|Patient Administration|HMS-35211|The Services and Tests in the respective schedulers are filtered for the service and test names applicable to the resources selected.
Bug|Billing|IES-399|Unable to generate Bills Report and Bill Charge Report builder


## Features in 12.3.18 [/cig-release-120318]

### Patient Administration [GET]

#### New upgraded Pre-Registration API

Now any external applications can make use of the new pre-registration API to create the patient in Insta. The API can be accessible through `/api/registration/preregistration.json`. The API validates all the registration preference settings in the Insta application to create the patient. For further usage of this API, please refer to Insta's API documentation.

### Clinical [GET]

#### Minor Malaffi HIE Integration Improvements

The below event triggers have been added as integration improvements:

-   __Allergy and Diagnosis details__ : Event trigger for Consultation "Save" and "Save & Close" has been added, however the trigger works before Re-open actions (HL7 ADT: A08, A31 messages)

-   __New/Updated Insurance details__ : Event trigger on Edit Insurance screen added (HL7 ADT: A31 message)

-   Visit close information

-   Event trigger on Close Visit in Registration screen (HL7 ADT: A03 message)

#### OP Consultation - ERx Submission Process Improvement from OP Consultation screen

Existing Behaviour of submitting ERx from Consultation screen is Improvised to handle the user experience and data handling in better manner , Below would be the Changes

- When ERx request is sent,ERx button will be ERx in Progress,cancel ERx will be disabled

   ![](media/image120318_1.png)

-   When ERx is Submitted,ERx button will be ERx Submitted,Cancel ERx will be enabled

    -   Once ERx submitted user will not be able to add new medication to the consultation , until the earlier ERx is cancelled.

-   When ERx request is cancelled,ERx Sent button will be ERx Submitted,cancel ERx will be Cancellation in Progress

-   When ERx cancellation is submitted,ERx Sent button will be Sent ERX and enabled,cancel ERx will be Cancellation Submitted and disabled

Note : In between any of the process Consultation save and Save close action can be done. If before the Consultation Save the ERx response is not received the user still would be able save the consultation and can visit back later to check the status of the ERx submission

### List of Enhancements and Bugs Fixed in v12.3.18 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Patient Administration|HMS-35151|Outpatient List: Display of the nationality details
Bug|Billing|HMS-34720|Discount Plan does not apply if the item applicable for discount is cancelled in the bill.
Bug|Billing|HMS-35405|Bill Print templates display the sponsor receipt amount as zero.
Bug|Billing|HMS-35435|Surgeon Fees is not updating in billing screen
Bug|Clinical|HMS-29486|Insta section audit log view is not coming for follow up visits
Bug|Clinical|HMS-35516 / IES-467|Management favorite link error
Bug|Diagnostics|HMS-33846|In diagnostics tests --&gt; when we are trying to map the center applicability for the result parameter, the system is showing an error.
Bug|Insurance|HMS-35452 / IES-414|Delay while selecting Insurance company name in Codes Search screen
Bug|Inventory|HMS-35354|Default Patient issues print has the text 'Total' overlapping the amount.
Bug|Patient Administration|HMS-35106|Outside Patient Registration - Performance Optimization.
Bug|Patient Administration|HMS-35472|Save action is disabled blocking upload of documents from Registration or Generic documents.
Bug|Patient Administration|IES-253|Unable to Merge Patient Mr.No's
Bug|Platform|IES-496|deletion of space in user creation


## Features in 12.3.19 [/cig-release-120319]

### Patient Administration [GET]

#### Registration Preferences

There are 3 new registration preferences added primarily to enable the Malaffi HIE Integrations for the Abu Dhabi customers but is available commonly for all customers as well.

The registration preferences added are: 

1. Last Name Required 

2. Marital Status Required 

3. Religion Required 

Based on the preference setting the options are to set in on all Registration screens or specifically on the IP, OP and OSP Registration screens.

![](media/image120319_1.png)

### Clinical [GET]

#### Malaffi HIE Integration Improvements

The below changes are made to enable the Malaffi HIE Integration:

-   In the allergy section, the severity field is mandated if the malaffi module is enabled.

-   HL7-ADT (A03 messages): have surgery details captured if any in the PR1 segment.

-   HL-ADT: No Known Allergies are updated in the AL1 segment.

-   HL7-ADT: Insurance details are changed from TPA to Insurance Payer in the IN1 segment.

-   HL7-ADT: The address details are modified in the PID segment.

-   In the PRB segment the problem life cycle status coding is changed to system code from Malaffi.

### List of Enhancements and Bugs Fixed in v12.3.19 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Bug|Billing|HMS-35573|[IES-502] Collection Allocation and Daybook Report mismatch fix.
Bug|Billing|HMS-35536|Bill Print Templates have a deposit setoff error.
Bug|Billing|HMS-35405|Bill Print Templates: Sponsor amount error fix.
Bug|Clinical|HMS-35623|Notes print has an error &lt;br&gt; tag
Bug|Clinical|HMS-35621|Reverse chronological order of previous diagnosis details history
Bug|Clinical|HMS-35620|Original note date shows as current note's date
Bug|Patient Administration|HMS-35628|Tests Scheduler: Test displayed are not as per the center.


## Features in 12.3.20 [/cig-release-120320]

### Insurance [GET]

#### Automation of processing received Remittance Advice files (UAE only)

This feature automates the process step of the Remittance Advice files at a configurable scheduled time. (based on a generic preference, 'RA Auto Download Last Number of Days', where default value is 2 days). Without this feature the user had to process all pending remittance advice files which would be time consuming when the number of files received is high in number.

As part of this change a new cron is available called 'RemittanceAutoProcessJob'. The feature is enabled only if the cron is enabled at a set time.

![](media/image120320_1.png)

### Integrations [GET]

#### SCM Integration

Auto-generation of customer item code from the item master: This field being used for SCM Integration must have a value when the Items are created in Insta. The new preference introduced to "Force system generated item code in Item Master""" in Generic Preference is set to "Yes""", then the user cannot see the option of "Generate Item Code""" on Item Master screen and upon saving Insta will generate Item Code automatically.

Enhanced Item Master outbound csv for the integration with additional attributes: Manufacturer, Generic, Item Form and Item Strength details

Supplier Returns (Outbound) is also supported in the integration workflow.

### Patient Administration [GET]

#### OP Flow Patient List Search Optimizations

A mobile number starting with `+971` for a UAE user will match about 95% patient records and for users in India mobile numbers starting `+919`, `+918`, `+917` would match about 30-50% patient records. So is the case with Emirates IDs beginning with `784-` which would still match about 50000+ patients for an average Hospital or Medical Center user in UAE.

With current implementation of triggering search requests at entry of 4th character returns a large number of records when using these patterns, which won't help the user who has an intent to narrow down a patient card and start acting on it. Also, performing a sort and list operation on such a large set takes a significant system overhead and causes performance issues.

To address the above issue and make patient list search faster, some optimization and system behaviour changes have been introduced. The system on every 15th day of the month at midnight (via a cron) indexes starting patterns of Government IDs and mobile numbers having a large set of patient records associated with it. The index patterns are used by OP flow patient list to detect and disallow searches, displays appropriate message instead, and expects users to provide additional characters to narrow down the record. Currently this change is applied to the new patient list screens.

![](media/image120320_2.png)

### List of Enhancements and Bugs Fixed in v12.3.20 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Clinical|HMS-35722|The link and access to the old screens for Vital measurements such as OP Consultation, Outpatient List, IP Clinical management and Bed View have been removed as they are redundant. This link is currently retained in the Advanced OT module only.
Enhancement|Clinical|HMS-34994|[IES-73] Allow to map Patient Progress Notes to Printer Setting masters to print patient header in all pages
Bug|Accounting|HMS-35377|Sponsor receipt payment-related insurance company name is not reflected in the insurance_co column under the hms_accouting table and accounting report builder for debit and credit accounts.
Bug|Accounting|HMS-35378|Inventory items with the tax insurance company name are not reflected in the insurance_co column under the hms_accouting table and accounting report builder for debit and credit accounts.
Bug|Allied|IES-598|Error in Canteen Screen
Bug|Billing|HMS-35659|Deposit Builder Report displays duplicate line items for some MR and Bill nos only.
Bug|Billing|HMS-35660|[IES-294] Getting Timed out when we open Deposit Realization screen.
Bug|Billing|HMS-35736|[IES-660] Daily Collection SMS is including values of Writeoff Receipts and Writeoff Reversals
Bug|Billing|HMS-35762|[IES-373] SQL Nullpoint Exception Error - Reg
Bug|Billing|IES-329|Columns in day book report are overlapping, making values unreadable
Bug|Clinical|HMS-32416|UI Alignment of search box for the add generic document screen.
Bug|Clinical|HMS-34037|Diagnostics master: throws error if a user uploads a user;'s name increasing 30 characters.
Bug|Clinical|HMS-34727|[IES-645] Duplicate MR No message while clicking on View EMR in COnsultation screen
Bug|Clinical|HMS-35337|Management Audit Log for 1 patient throws errors.
Bug|Clinical|HMS-35338|OP-EMR: consultation favourites screen throws errors on screen.
Bug|Clinical|HMS-35646|ERx performance optimization improvements.
Bug|Clinical|HMS-35658|Problem list to be available in hospital forms for follow-up consultations.
Bug|Clinical|HMS-35677|Problem list diagnosis codes are not loading for doctors login
Bug|Clinical|HMS-35680|Erx Response processing for Doctor user throws error
Bug|Clinical|HMS-35690|[IES-602] Performance Optimization of the Intake/Output chart.
Bug|Clinical|HMS-35691|[IES-15] Consultation EMR data is saved with a diagnosis captured.
Bug|Clinical|HMS-35699|[IES-155] IVF session screen- not showing IVF patient datas in dashboard more than 1 page
Bug|Clinical|HMS-35714|[IES-644] OOPS Error while redirecting to Consultation screen from Codification screen
Bug|Clinical|IES-637|Discharge Summary Button in In-Patient List not working even though access is given
Bug|Common|HMS-34762|Unable to search/select the center name by typing the alphabets.
Bug|Diagnostics|HMS-35681|[IES-528] FW: Sample Outsource Print
Bug|Insurance|HMS-35039|Pharmacy insurance batches are throwing errors when creating batches with "ignore external PBM".
Bug|Insurance|HMS-35632|Allow zero claim amount items to be excluded from the bill.
Bug|Insurance|IES-420|In the Claim batch submission screen the 'Network/Plan Type' is not getting selected as by default 'All'
Bug|Patient Administration|HMS-35557|[IES-510] - Filter not working in Active patient screen for saved searches
Bug|Patient Administration|HMS-35586|[IES - 489] Emirates ID integration issues due to Firefox version upgrade.
Bug|Patient Administration|HMS-35651|[IES-378] Search optimization of the patient search and visits search has been done, such that the count is available
Bug|Patient Administration|HMS-35674|[IES-605]- Registration blocked in a case.
Bug|Patient Administration|HMS-35716|[IES-79] IP/OSP Registration screen performance optimization.
Bug|Patient Administration|IES-653|Additional Slot duration in Resource Default Availability

## Features in 12.3.21 [/cig-release-120320]

### Clinical [GET]

#### Malaffi HIE Integration Improvements

##### Field validation changes

-   In the allergy section, the allergy type, allergy name and severity fields are mandatory if the malaffi module is enabled.

-   When the patient visits departments which are mapped to the emergency codeset of Malaffi (i.e. speciality - 13), the patient class is marked as 'E" and the encounter is treated as an emergency encounter.

##### Event trigger changes

The below event triggers are added/modified to share HL7 messages with Malaffi:

-   Event triggers are added in the: a&gt; IP EMR, Triage, b&gt; Initial Assessment and c&gt; OT Management screens to trigger the HL7-ADT-A08 messages when changes made to allergy, diagnosis or procedure is completed.

-   Event triggers for close visits in Discharge Screen is extended to the outpatient and emergency workflow

    -   When the consultation is closed with no Diagnosis the visit is considered as canceled and an HL7-ADT-A11 message is triggered otherwise HL7-ADT-A03 visit close message is triggered.

-   OP Registration and close cron event triggers are modified to trigger to HL7-ADT-A03 and HL7-ADT-A11 messages based on the diagnosis information availability

-   Event trigger in the edit patient details screen alone triggers HL7-ADT-A31.

##### Segment level changes

-   HL7-ADT-A06 message to have pv1 segment construct with inpatient encounter details rather than outpatient encounter details

-   HL7-ADT-A08, A03 and A13 have the pv2 segment introduced for all encounter types.

-   NTE Segments are introduced in PC1 messages when remarks are available.

-   HL7-ADT-A31: has the DG1 and PR1 segments removed.

##### Field level changes

-   Required fields in message segments with codeset lookups are filled with default values if appropriate values are not made available during segment construct.

-   PR1 segment would be constructed only if the field value is available for procedure and surgeon details

-   A new backend field is introduced for storing allergy recorded date for sharing in the AL1 segment

-   PRB segments modified to share proper action codes for added/modified problems along with mandating resolved date/last modified date information for resolved problems or deleted problems

-   PID segments holds death status & death date and time for the patient marked as deceased at the time of discharge

-   PV1 segments has details of the discharged location if the patient discharge disposition is 5 (transfer to other facility)

### Integration [GET]

#### Support for embedded custom links

Embedding of custom links is now enabled on the OP Registration, EMR and Pharmacy Sales screen with parameters such as MR No, visit ID etc to display details such as utilization amount or a link to an external application which hosts specific clinical reports.

This can be done by accessing the external links table in the database and inserting necessary values for the fields (label, link, applicable center and screen id) appropriately.

Below are screenshots of sample implementation 


-   Display of Utilization amounts as implemented for TRL-Krosaki Hospital

    OP Registration screen

    ![](media/image120321_1.png)

    ![](media/image120321_2.png)

    Sales screen

    ![](media/image120321_3.png)

- EMR link to external lab software for Vitalife:

    ![](media/image120321_4.png)

### List of Enhancements and Bugs Fixed in v12.3.21 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Billing|HMS-36132|Bed Type master creation is now a background job process.
Enhancement|Clinical|HMS-35708|The diagnostic reports a&gt; In Coming Test Details-Hospital wise and b&gt; Outgoing Test Details-Hospital wise have the list box which displays the incoming sources increased for view.
Enhancement|Diagnostics|HMS-32432|Sample Worksheet Print has tokens for prescribing and conducting doctor names.
Enhancement|PBM|HMS-35661|PBM Sales: rounds off qty while dispensing the medicines
Enhancement|PBM|HMS-35527|PBM Sales: has a separate field which displays the PBM Approved qty.
Enhancement|Patient Administration|HMS-33808|Edit custom fields screen is deprecated as the same can be done from the patient header.
Bug|Patient Administration|HMS-35711|Fixes for the contacts feature.
Bug|Billing|HMS-36263|Billing screen performance optimization.
Bug|Billing|HMS-36262|Payments: Payee name does not reflect.
Bug|Billing|HMS-36259/IES-680|Report generation blocked.
Bug|Billing|HMS-36255/IES-791|Sponsor Due write off screen displays incorrect Sponsor amounts.
Bug|Billing|HMS-36254/IES-806|Day book not showing the time against each bill which was earlier shown
Bug|Billing|HMS-36253/IES-840|Deposit amount displayed and actually utilized is the incorrect amount.
Bug|Billing|HMS-36252/IES-871|Bills List: Sponsor dues shows incorrect amount.
Bug|Billing|HMS-36251/IES-929|Billing screen performance optimizations.
Bug|Billing|HMS-36239|Edit item dialogue, clicking on next/previous actions throws an error in the console.
Bug|Billing|HMS-36230|Ward Bed details screen displays SQL exception.
Bug|Billing|HMS-36223|Codification screen: Patient header displays complaints, primary diagnoses , secondary diagnoses from previous visits.
Bug|Billing|HMS-36214|Bills List:Sponsor due amount is incorrect.
Bug|Billing|HMS-36200|Order: Performance optimization
Bug|Billing|HMS-36154|Update order: Performance optimization.
Bug|Billing|HMS-36069/IES-884|Submission Batch creation fails with an error.
Bug|Billing|HMS-36039/IES-807|Bed charges are getting cancelled automatically in the bill when bed charge posting cron job runs
Bug|Billing|HMS-36017|Unrealised deposit amount is getting allocated for migrated bills receipts.
Bug|Billing|HMS-36012/IES-842|Column data interchanged for bill no. and mr. no in day book.
Bug|Billing|HMS-35573|Collection allocation report and daybook reports are not matching
Bug|Billing|HMS-32040|Discount authorizer: Center applicability is not allowing more than 25 centers
Bug|Clinical|HMS-36264|Error while generating the reports
Bug|Clinical|HMS-36250|PBM Prescription screen performance optimization.
Bug|Clinical|HMS-36246/IES-1047|Multiple primary Diagnoses codes getting added in diagnosis details while selecting the code from 'show previous diagnosis'.
Bug|Clinical|HMS-36137|Prescription List Screen: Performance optimization.
Bug|Clinical|HMS-36081|Pending Services List and Conducted Services List: Performance optimization
Bug|Clinical|HMS-35822|OP-EMR Consultation Screen: Performance optimization.
Bug|Diagnostics|HMS-35994|Signed off Reports: from and to signed off date is modified to fetch the records with a default time filter of 00:00 as well.
Bug|Financial Accounting|HMS-36256/IES-775|Removing the payment rule throws an error.
Bug|Financial Accounting|HMS-35853|Pharmacy bill vouchers associated with Hospital Bill show different created\_at timestamps.
Bug|Financial Accounting|HMS-35838|Pharmacy Bills are reposting multiple times
Bug|Insurance|HMS-36257/IES-771|Claim XML generation is displaying as 'In Progress'.
Bug|Insurance|HMS-36226|Claim got added to a batch from another center while doing 'Add to submission batch'.
Bug|Insurance|HMS-36210|Edit Insurance performance optimization.
Bug|Insurance|HMS-36183|Submission xml: conducting doctor license number is not captured for the IP doctor.
Bug|Insurance|HMS-36151|Codification List: Performance optimization.
Bug|Insurance|HMS-35769/IES-649|Member ID space trim in submission xml.
Bug|Inventory|HMS-36260|Patient Indent: Dispens status not updating even though the medicine is fully dispensed
Bug|Inventory|HMS-36258/IES-736|New item creation throws an error.
Bug|Inventory|HMS-35657|Pharmacy estimates list screen search is not working
Bug|Inventory|HMS-15474|Duplicate entries in Purchase Items (Batch-Wise) Report when the item is mapped to multiple item codes.
Bug|Patient Administration|HMS-36276|Patient Portal is not showing EMR Records
Bug|Patient Administration|HMS-36212|Search patient: Performance optimization.

## Features in 12.3.22 [/cig-release-120322]

### Clinical [GET]

#### Malaffi HIE Integration Improvements

##### HL7 Message Changes

-   HL7-ADT Messages with allergic reaction details

-   Field level changes in AL1 segment: The allergic reaction recorded in the Allergies section would be shared in [AL1.5](https://hl7-definition.caristix.com/v2/HL7v2.5.1/Fields/AL1.5) - Allergy Reaction Code

##### Default Malaffi code sets

If code set values are not available or not mapped to any of the values in the masters, for any of the Malaffi message construct below default values will be used

**Malaffi - Reference**|**Insta - Master**|**Code**|**Code Description**
-----------------------|------------------|--------|--------------------
Demographic|Nationality|BID|Bidoun
Demographic|Country|BID|Without Nationality
HL7 Table 0359|Diagnosis Priority|0|Not included in diagnosis ranking
HL7 Table 0052|Diagnosis Type|A|Admitting
Demographic|Religion|OTH|Other
Demographic|Marital Status|NA|Not Available
Non Clinical|Specialty|26|Medical Practitioner
Non Clinical|Discharge Disposition|1|Discharged with approval
HL7 Table 0127|Allergy Type|MA|Miscellaneous allergy
HL7 Table 0128|Allergy Severity|NA|Not Available
HL7 Table 0023|Admit Source|9|Information not available
HL7 Table 0418|Procedure Priority|0|Admitting Procedure

##### Doctor Master Changes 

Doctor Name in the Doctor master screen is split into Salutation,First Name,Middle Name and Last Name to compile with the Doctor Name sharing needs of Malaffi

-   Migration Logic for the existing Doctor name:

-   Splitting of the doctor name by space and displaying in first, middle and last name field as :

    -   1st part will be displayed in first name

    -   last part will be displayed in last name

    -   remaining will be displayed in middle name.

    -   if there is only one part then it will be displayed in first name.

    -   This split will happen only if the first name field is empty. After saving the screen the data will be stored in its respective column in db. And also salutation, first, middle and last name is concatenated using space and stored in `doctor_name` column.

    ![](media/image120322_1.png)

### List of Enhancements and Bugs Fixed in v12.3.22 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Bug|Billing|HMS-36278|Dynamic Package: allows inclusion of zero amount inventory items.
Bug|Billing|HMS-36366|MRD Codes master: Validate the code description for html tags.
Bug|Billing|HMS-36344|IP Claims Submissions: activities are not coming in the XML, even though 'allow zero claim amount' is set as IP for the respective masters.
Bug|Billing|HMS-36354|In a case duplicate bill items are created for operation orders from the Advanced OT module.
Bug|Billing|HMS-35675|On edit of an activity with inventory returns the patient due shows negative.
Bug|Billing|HMS-36214|Open / Search Bills worklist displays negative sponsor due amount.
Bug|Billing|HMS-36412/HMS-36401|Consolidated Financial Dashboard Summary - Performance optimization fix to solve for timeouts.
Bug|Billing|HMS-35794|Adding a patient insurance in a case displays a null pointer exception.
Bug|Billing|HMS-36429|Changing the patient category in a case throws an error.
Bug|Billing|HMS-36397|Billing: edit for bill charge item with surgery is disabled.
Bug|Clinical|HMS-36439|Unable to login to the Malaffi patient portal
Bug|Clinical|HMS-36428|ERx fix for send and cancel requests.
Bug|Clinical|HMS-36427|Patient Indents do not display the missed medicines as per MAR.
Bug|Clinical|HMS-36387|EMR view: E&M calculation print throws an error, if visit type and data are empty values.
Bug|Clinical|HMS-36452|"Update IV" link is not shown in MAR section for IV medicine which is started
Bug|Inventory|HMS-35993/IES-822|View Patient Issue Screen timeout issue
Bug|Inventory|HMS-36234|Sales screen medicine fetch performance optimization.
Bug|Inventory|HMS-35785|Store Tariff download was not fetching all items and respective rates if the code type for items was empty.
Bug|Inventory|HMS-35826|Stock Movement Report: Transit qty was not matching in case the indent which was yet to be received was cancelled.
Bug|Patient Administration|HMS-36389|Registration: Email ID is mandated regardless of preference setting.
Bug|Patient Administration|HMS-36431/IES-1251|Registration throws an internal server error.
Bug|Patient Administration|HMS-36451/IES-1262|Pre-Registration API blocks a patient with the same mobile number from being registered.
Bug|Patient Administration|HMS-36388|Child's MR No search was not fetching the patient details.
Bug|Patient Administration|HMS-36390|Patient Search autocomplete across all screens displays patient details duplicated.
Bug|Patient Administration|HMS-32750|Getting errors while generating Visit Details Report Builder with tabular summary.
Bug|Patient Administration|HMS-36288|Default availability overrides added are not reflecting in the Doctor scheduler calendar view in a case.
Bug|Patient Administration|HMS-36406|Patient Category is not getting auto populated when user clicks on add new visit for contact patient
Bug|Patient Administration|HMS-36400|Birth Details Report Builder: Salutation B/O is not appended to patient name.
Bug|Patient Administration|HMS-36324|Patient Details Report by First Visit date throws an exception.

## Features in 12.3.23 [/cig-release-120323]

### Clinical [GET]

#### Malaffi HIE Integration Improvements

HL7 Message enhancements for medication information sharing (OMP & RDS) and diagnostics results (ORU) have been introduced in this release.

-   Medication Messages (HL7-OMP): are shared when the medication (OP Prescription / Discharge Medications) is prescribed for the patient (OP/IP).

-   Medication Messages (HL7-RDS) are shared from the sales screen against an OP Prescription, Patient Indent or Discharge Medication.

-   In order to share only drugs which were prescribed with Malaffi the Store Item categories have a new attribute which can be defined as Yes/No.Only items under the category where Drug is marked as Yes is sent in Medication Messages

![](media/image120323_1.png)

-   Item Master: For drug store item category items the following are mandated: Item Form, Route, Generic Name, Consumption UoM.

-   Consumption UoM Master: A new master has been introduced and accessible from the Settings &gt; Store master &gt; Consumption UoM.

![](media/image120323_2.png)

-   Prescription changes: In the Management section in the OP Consultation and IP-EMR, the dosage unit free text field is now modified to a look up from the Consumption UoM master.

![](media/image120323_5.png)

-   Lab or Radiology Report/Result Messages (HL7-ORU) are shared when the result is signed-off or Amended. The messages shared are only for value based or template based test reports and not for reference file pointers which are received from a third party software.

##### Mapping Malaffi code sets 

A generic provision to map different code sets is made available from this version. Code sets are used for various data sharing purposes to the external system or third party software. The master mapping screen is available under Settings &gt; General Master &gt;Codesets. We can select the Insta Master for which the code sets to be mapped and by selecting the code set and keying in the value against the insta master list .

![](media/image120323_4.png)

These codes would be used when the specific values are shared to the external system. For Malaffi the codes are mapped to the values of Insta Master and the same will be available in HL7 messages. While the above screen allows mapping of codes and Master values one by one the provision for bulk upload of values is available under Settings &gt;Administration &gt;Data Upload Download.

![](media/image120323_3.png)

In the Master name Code sets option is selected with Insta master in code system category and code system. The Masters value will be downloaded and the data compilation is done on the file and the file would be uploaded to do the bulk update.

#### Growth Chart

The percentile chart of length for age and weight for age chart of birth to 2 years has been modified to reflect the timeline between months.

![](media/image120323_6.png)

### Insurance [GET]

#### Prior authorization changes: submitting cancelled prior auth request again as initial submission type.

As per UAE Insurance guidelines, whenever a healthcare provider sends any prior authorization request without proper justification notes/supporting documents, insurance companies will reject such requests. For such cases, instead of resubmitting with the same request id, the recommended workflow is to cancel such denied requests and resend it again as the initial type. To comply with above expectations, the following changes are made available in the application.

-   While cloning any cancelled preauth prescriptions, new preauth prescriptions will be created with new preauth prescription id and which has all the attributes of original doctor prescriptions.

-   In the order screen pending prescription shows the latest cloned prior auth prescriptions status against doctor prescriptions and applies the respective approval details of same preauth prescriptions while converting such pending prescriptions to orders.

### List of Enhancements and Bugs Fixed in v12.3.23 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Insurance|HMS-36308|PBM request and pbm claims xmls have the medicine quantity supporting 4 decimal values.
Enhancement|Insurance|HMS-36521|Sales screen tracks the sale quantity in 4 decimal values.
Bug|Billing|HMS-36669|Deposit Set off issue
Bug|Billing|HMS-36667|Unable to do the deposit set off on bills
Bug|Billing|HMS-36666|Collection allocation report builder: In any refund transaction the report is showing wrong allocation of charge head with amount
Bug|Billing|HMS-36513|Billing screen throwing timeout for Patients with IP visits
Bug|Billing|HMS-36482|Error in Dialysis Order Screen.
Bug|Billing|HMS-36479|While updating the rate in diagnostics master by selecting group update the system fails to update.
Bug|Billing|HMS-36456|In Registration allocation report the changed consulted doctor charges are not listing
Bug|Billing|HMS-34575|Credit Limit not working if the limit is 0 in bed types master.
Bug|Clinical|HMS-36668|Print error in Consultation Template.
Bug|Clinical|HMS-36690|Unable to take OP consultation prescription print out from OP consultation management screen throwing "TemplateException: Bad Custom Template"
Bug|Clinical|HMS-36683|Unable to take discharge summary print from discharge summary dashboard throwing stack trace error
Bug|Clinical|HMS-36679|Clicking on the IP EMR link in Print shows error.
Bug|Clinical|HMS-36634|Allowing to save consultation when the consulting doctor order is cancelled and consulting doctor is changed.
Bug|Clinical|HMS-36545|ERx message correction for socket exception
Bug|Clinical|HMS-36542|Add missing indexes for consultation management audit log
Bug|Clinical|HMS-36206|Doctor name is empty in follow up details for consultation
Bug|Clinical|HMS-30485|Getting ereor while taking consultation print with default print also.
Bug|Diagnostics|HMS-36524|Unknown Error on downloading the Service Masters.
Bug|Insurance|HMS-36639|Getting internal server error while trying to add Patient Insurance
Bug|Insurance|HMS-36627|Able to clone multiple times Pri auth prescription for Cancel prescription in the pri auth prescription list dashboard screen
Bug|Insurance|HMS-36464|In the Claim Reconciliation screen &gt; claim status is shown as sent whereas the same is not received in DHPO portal.
Bug|Inventory|HMS-36677|System accepted items which are near expiry while GRN
Bug|Inventory|HMS-36665|Sales Bills report showing wrong Patient Amount
Bug|Inventory|HMS-36492|Getting an error popup as 'Transaction failure while making a Supplier return debit note.
Bug|Patient Administration|HMS-36541|Unable to register an IP Patient
Bug|Patient Administration|HMS-36531|Registration Patient Category issues.
Bug|Patient Administration|HMS-36505|Center wise registration card error
Bug|Patient Administration|HMS-34865|Slot showing as available when accessed using external APIs.

## Features in 12.3.24 [/cig-release-120324]

### Insurance [GET]

#### UAE e-claim modifications to the logic for activity start and encounter timings

In previous versions, Insta was submitting eclaims with the billed time as activity start time which was not accurate as insurance companies expected the actual time for services performed/administered especially for injections and infusion administration services.The following changes have been incorporated to apply the service conduction date as activity start and encounter time.

Service conduction date/time will be considered as activity start date/time in the eclaim workflow. But, if any service is not conducted, then it continues to consider service billed date/time as activity start date/time.

In the codification screen, treatment date is now relabelled as activity date which also shows conduction date/time for services which are conducted.

The encounter end time for OP visits is modified in order to ensure that all activities start time fall within the range of encounter start to end time. Hence the max of service conduction date/time or max of order date/time of any item in the insurance bills whichever time is highest, is considered as the encounter end date/time for particular visits, moreover, if encounter start and activity start timing of activities are same for any visit, then system will add 30 minutes to encounter end date/time.

Encounter start and end timing are now shown in the codification screen and coders are allowed to override default encounter end timing for OP visits. However, there will be validation if encounter end date/time is lesser than activity start date/time including pharmacy sale items for particular visit while overriding it by coders.

![](media/image120324_2.png)

Once the codification screen is saved, then the system will not recalculate encounter end timing automatically further even if any new items are billed later point in time, encounter timing has to be managed manually for such cases by users.

NOTE: All the above changes are applicable to both Hospital and Pharmacy claims.

### Inventory [GET]

#### PO/Stock Entry: Introduction of Tax collection at source (TCS) applicable from Oct 1st (applicable for India customers only).

*"According to Section 206C (sub-section 1H) of the Income Tax Act, certain suppliers are liable to collect TCS at 0.075% on the amount exceeding Rs 50L billed to a buyer for the sale of goods during the financial year."*

##### Supplier level configuration:

Since TCS is only applicable in case the Supplier:Buyer exchange for sum of goods exceeds Rs 50L in a financial year, there is a supplier level configuration to apply the settings which is called: Apply Tax Collection at source for PO/Stock Entry on the basis of which the changes are displayed in the PO and Stock Entry transaction screens.

![](media/image120324_5.png)

##### PO screen changes:

If the selected supplier has TCS applicable then the TCS % can be applied and the TCS amounts are added to the PO total.

The TCS is calculated on the Total Item amounts (inclusive of all GST taxes).

Hence the Total PO amount = Total Item amount + TCS Amount + Other charges + Transportation charges - PO Discount +/- Round off.

![](media/image120324_3.png)

##### Stock Entry screen changes:

If the selected supplier has TCS applicable then the TCS % can be applied and the TCS amounts are added to the PO total.

The TCS is calculated on the Total Item amounts (inclusive of all GST taxes).

Hence the Total GRN amount = Total Item amount + TCS Amount + Other charges + Transportation charges - PO Discount +/- Round off.

![](media/image120324_1.png)

##### Supplier Payment screen changes:

The Supplier Payment screens which display the PO, GRN, Payments Due and Payments Paid amount values display amounts inclusive of the TCS values.

##### FA changes:

For Stock Entry transactions since the TCS amount that is paid is an advance tax the TCS paid amount is debited.

For Supplier Payment transactions the amounts payable and paid are always inclusive of TCS amounts.

Accounting Event|Voucher Number|Voucher Type|Debit A/C|Debit Amt|Credit A/C|Credit Amt
----------------|--------------|------------|---------|---------|----------|----------
Stock Entry|Invoice Number|Journal|Inventory A/C|Invoice Amount (excluding TCS Amount)|Individual Supplier A/C|Invoice Amount
&nbsp;|&nbsp;|&nbsp;|TCS Paid Supplier A/C|TCS Amount|&nbsp;|&nbsp;                                                        
Supplier Payments-Paid Payments|Voucher Number|Journal|Individual Supplier A/C|Invoice Amt+TCS|Cash A/C or Bank A/C|Invoice Amt + TCS

##### Prints:

There are print tokens for TCS amount fields to be made available in PO and GRN respectively.

##### Reports:

The following report builders i.e. Purchase Invoice Report Builder and Purchase Invoice Tax Report Builder have changes incorporated to ensure all the total invoice amounts are inclusive of taxes and additional field tokens are provided for TCS Amount.

#### PO controls to ensure the item cost price inclusive of taxes and discounts is less than MRP.

At the time of PO creation, there existed a validation to ensure that the item cost price is always less than the MRP but this didn't take into account the discount and taxes applicable. So now there is a generic preference added called: 'Apply Cost Price validation for PO: Allow/Warn/Block' basis which there is a check to ensure that the total item value / (billed + bonus qty) is less than or equal to MRP. The preference gives the flexibility to the customer to set up an allow/warn or block type of alert as is relevant to the requisite inventory controls necessary.

#### Access control for allowing an authorized user to Finalize/Close GRN

An ACL has been added to ensure only an authorized user can Finalize / Close a GRN. The action right added is called: 'Allow Finalize/Close GRN'.

### Clinical [GET]

#### Malaffi HIE minor enhancements

HL7 message enhancements for medication information sharing (OMP & RDS) and diagnostics results (ORU) have been enhanced in this release.

-   Direct medication sales are also included as part of the RDS messages

-   OMP messages are extended for generic medication prescribing

HL7 Framework also enhanced to support few functionalities to support Malaffi Integration

-   At Interface level options added to specify number of retry for the message sending

-   SSO login credentials format has been corrected.

#### Code Sets Master screen enhancements

Code Sets Master Screen is provisioned with option to define default code values for the code sets, default code values will be used in the messages when no appropriate value is available of code set is not mapped for the selected insta value.

![](media/image120324_6.png)

![](media/image120324_7.png)

#### Admission Request to IP Physician Orders

In the IP EMR workflow when the Patient is admitted pulling the details from the respective Admission Request. Ehe Admission orders auto populate in the Physician Orders section of IP EMR and the other comment section details are reflected in Notes section as separate note.

![](media/image120324_10.png)

To reflect the details of the other comment section in Notes, a System note type created as Admission Note Type and the content of the other comment field is shown as admission notes in IP EMR.

![](media/image120324_8.png)

Items from the Admission Request are auto populated in the Physician order and MAR section.

![](media/image120324_9.png)

### Integrations [GET]

#### API enhancements for a third party subscriber to receive real-time appointment status updates

Now, a third party endpoint can get appointment updates from Insta, so that the appointment details are near real time sync between Insta and third party developed portals or mobile app. This API allows appointment sending sources to subscribe to appointment update events. Any appointment details updated in Insta application either by using Insta HMS or by API can be pushed to any third party endpoint API. The triggering of the message can be configured in such a way that only specific type of appointment or based on specific condition.

##### Configuration

The endpoint API must be configured in **api_clients** table, whereas include or exclude for specific event type filters can be configured in **event_push_subscribers_http**

###### api_clients

This table holds following information:

*hash*: For the enhanced API security, Insta recommends to use a hash key. This could be an alphanumeric text which will get encrypted in the API header. This text can be given by the client or by Insta, however, the encrypted string to be decoded by the client using the method explained later in this document.

*callback_url*: The external endpoint where the appointment details are to be sent

*retry_duration_min*: The retry duration in minutes. Setting any non-zero value would try to push the appointment details again if the previous attempt was failed.

*retry_count*: Number of times the retry should be attempted for the previous failed attempt.

*custom_header*: If there is any custom header is to be passed to the callback URL. This must be in JSON format. For e.g, `{"username" : "user", "password" :"1234"}`

###### event_push_subscribers_http

This table is to configure the events and include / exclude filters:

*client_id*: This refers to api_client id

*event*: Currently APPOINTMENT_BOOKED, APPOINTMENT_CONFIRMED, APPOINTMENT_NOSHOW, APPOINTMENT_CANCEL, APPOINTMENT_UPDATED, APPOINTMENT_ARRIVED, APPOINTMENT_COMPLETED, APPOINTMENT_RESCHEDULED are configured for handling the appointments. (PS: One must add these events through DB update)

include_filter & exclude_filter: the filter can include/exclude any of the appointments fields. Few examples are `{"app_cat" :"SNP,OPE"}` or something like `{"app_source_name" : "Qikwell"}`

##### Hash Deciphering

The callback URL must implement **POST** request validation and must accept **application/json** as request body content type. To validate genuineness of incoming requests the subscriber should compute BASE64 encoded HMAC SHA256 hash of Request Body JSON using shared secret as salt and compare it with the value sent in **x-insta-signature** request header.

A sample Java and python code to generate signature is as below:

```java
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import org.apache.commons.codec.binary.Base64;

private String generateSignature(String jsonBody, String salt) {
  Mac sha256HMac;
  try {
  sha256HMac = Mac.getInstance("HmacSHA256");
  SecretKeySpec secretKey = new SecretKeySpec(salt.getBytes(), "HmacSHA256");
  sha256HMac.init(secretKey);
  byte[] hash = sha256HMac.doFinal(jsonData.getBytes());
  String hexDigest = bytesToHex(hash);
    return Base64.encodeBase64String(hexDigest.getBytes());
  } catch (NoSuchAlgorithmException ex) {
    logger.error("Unsupported Algorithm: HmacSHA256");
  } catch (InvalidKeyException ex) {
    logger.error("Invalid salt supplied");
  }
  return "";
}
```

```python
import hmac
import hashlib
import base64

def generate_signature(json_body, signing_key):
  h = hmac.new(signing_key.encode(), json_body, hashlib.sha256)
  computed_signature = base64.b64encode(h.hexdigest().encode()).decode()
```

**REQUEST**

**POST https://source/provided/callback/URL/**

Headers|Value
-------|-----------
Content-Type|application/json
x-insta-schema|&lt;schema&gt;
x-insta-signature|&lt;SHA256 hash of Request Body JSON Payload + Shared Secret&gt;
Custom header|If any

REQUEST BODY

```json
{
  "event_type": "APPOINTMENT_BOOKED",
  "appointment": {
    "testType": null,
    "appointment_date": "2020-11-03T15:15:00Z",
    "department_id": "DEP0025",
    "additional_resources": [],
    "remarks": "",
    "cond_doc_name": null,
    "patient": {
      "age_in": "Y",
      "contact_id": 910,
      "government_identifier": null,
      "middle_name": null,
      "dateofbirth": null,
      "first_name": "Second Appt",
      "patient_gender": "",
      "identifier_id": null,
      "email": null,
      "age": null,
      "expected_dob": null,
      "last_name": "",
      "salutation": "",
      "mr_no": null
    },
    "app_cat": "DOC",
    "app_source_id": 0,
    "last_udpated_date_time": null,
    "original_date": "2020-11-03T11:30:00Z",
    "app_source_name": null,
    "department_name": "Dental Specialty",
    "primary_resource": {
      "resource_id": "DOC0203",
      "resource_name": "DoctorAPI1"
    },
    "complaint": "",
    "conducting_doc_mandatory": null,
    "presc_doc_name": null,
    "patient_name": " Second Appt",
    "rescheduled": "N",
    "cond_doc_id": null,
    "package_name": null,
    "secondary_resource": {
      "resource_id": "-1",
      "resource_name": "OP Consultation"
    },
    "appointment_pack_group_id": null,
    "appointment_status": "Booked",
    "presc_doc_id": "",
    "duration": 15,
    "center_name": "BRS",
    "package_id": null,
    "appointment_id": 82393,
    "scheduler_visit_type": "M",
    "center_id": 7
  }
}
```

### Security [GET]

#### Admin control to enforce password change for users on first/next login.

This change introduces a configuration which allows the administrator to force apply the user to change password on first/next login.

![](media/image120324_4.png)

### List of Enhancements and Bugs Fixed in v12.3.24 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Deprecation|Clinical|HMS-36455|Remove all references to the obsolete Insta HMS module called Partogram.
Bug|Billing|HMS-36913|Order screen: search by code for services doesn't fetch the item.
Bug|Billing|HMS-36768|If a dynamic package is in the bill and when it is connected to Insurance the items are getting excluded.
Bug|Billing|HMS-36756|Tax amount calculation is not working if Tax amount is less than 1.000
Bug|Billing|HMS-36752|Service creation job status not updating
Bug|Clinical|HMS-36816|Getting error after click on Treatment sheet
Bug|Clinical|HMS-36812|Vitals and Intake/Output Document name showing as IP Vitals (Old)
Bug|Clinical|HMS-36811|Unable to inactivate document type
Bug|Clinical|HMS-36797|Discharge summary of incorrect MR number opening up
Bug|Clinical|HMS-36796|All case sheets are throwing error after upgrade.
Bug|Clinical|HMS-36773|In the Generic documents list menu user is not able to delete one generic document as the system is throwing an error.
Bug|Clinical|HMS-36745|Vitals Masters throws an error while adding the reference ranges
Bug|Diagnostics|HMS-37103|Statement Timeout while printing Sample Transfer Worksheet.
Bug|Diagnostics|HMS-36731|Visit Id token Not working in Sample Bar Code Print
Bug|Insurance|HMS-37046|Unknown error while uploading the service charges sheet.
Bug|Insurance|HMS-36821|Can't delete Self Claim submission batch
Bug|Insurance|HMS-36761|Resubmission count showing wrongly in claim reconciliation screen.
Bug|Insurance|HMS-36228|Claim Status is not updated and showing as Broken Image
Bug|Patient Administration|HMS-37243|Appointment PUSH - Missing fields in the response
Bug|Patient Administration|HMS-37044|Registration Api--Area field issue
Bug|Patient Administration|HMS-37037|NullPointerException error in Pre-Registration Reg. Card Print
Bug|Patient Administration|HMS-36818|Unable to change the consulting doctor and referral doctor if the Salutation is inactivated.
Bug|Patient Administration|HMS-36817|Wrong consultation Appointment date and time in the "Doctors Consultation Report"

## Features in 12.3.25 [/cig-release-120325]

### Billing [GET]

#### Minor Receipt model modifications

Insta's allocation of receipt amounts to bill for settlement/advance receipts is on the FIFO basis and refunds on LIFO but this was without consideration of cancellation or discounted items. Hence the changes incorporated are the following:

-   While allocating refund receipts, cancelled and discounted items get precedence over all other bill charge line items. If there are no cancelled or discounted items then refund receipts are allocated basis LIFO.

-   Similarly, pharmacy sale/issue allocations will be reversed when a refund receipt is created after returning any items.

-   Refund receipt after giving any bill charge discounts does not impact any other items for which discounts are not given.

-   In the Collection Allocation Reports, the refund receipt allocations will be shown only on the date of refund receipt generated when reports are generated on the basis of 'receipt date'. It will not change allocations done on any other previous dates. There are no reverse allocations against canceled items if there are no refund receipts.

Introduction of a new action right called 'Allow bill finalization with patient due' which allows the user to finalize bills with patient due. As part of this change, there is also a check to ensure that payment status cannot be set to 'Paid' when patient due is not zero in the bill.

Dynamic Package Master creation/modification now supports processing of records using background jobs to enhance application performance.

### Clinical [GET]

#### Malaffi HIE enhancements

The lab result sharing (HL7 ORU) messages are enhanced to share COVID results along with some other minor modifications:

-   PID Segment modified to share 'Passport Number' if available.

-   PV1 segment modified to share details about 'Location' and 'Facility of Sample Collection'.

-   OBR segment modified to share 'Sample Type' and 'Sign-off' details.

-   NTE segment introduced to share 'Test Methodology'.

-   Hardcoded values are introduced in the OBX segment for COVID test result sharing.

The HL7 framework is enhanced to define an exclusion list based on:

-   Test Codes by CPT to exclude specific tests.

-   Department / Doctors

-   Patient confidentiality groups

-   VIP status

The OSP visit registration screen is enhanced to send the respective HL7-ADT/ORU, patient, visit and lab result messages with Malaffi.

### Patient Administration [GET]

#### Scheduler enhancements to support the online-consult workflow

These changes have been made to accommodate the online consultation requirements for external systems to integrate with Insta. Here the assumption is that the external system will provide the necessary application and the URL link for the physicians to initiate the online consultation.

##### Workflow

The appointment can be booked either through the third party mobile app or portal or directly in Insta. While booking the appointment, the user or patient can choose the online consultation slot or in-person slot. The patients can also change online consult appointments to in-person or vice-versa. Upon creating the appointment or in case of change in the appointment, Insta can push to create/update events to the external system real-time using APIs. Whereas, external systems can send the online consultation URL via update appointment api. Also, the external systems can send the onlineconsult URL while creating the appointment itself. Please refer 12.3.24 release notes for the PUSH event notification details.

Doctors can initiate the online consultation with the patient at the scheduled appointment time within the consultation screen in Insta. This would open an external page provided by the external system for the online consultation.

##### List of changes in Insta to support the online-consult workflow

**Configure the doctor's availability for online consultation:** An option "Schedulable for Online Consults" is introduced in doctor master. Setting this option to "Yes" would enable the doctor to have online consultation slots defined.

> ![](media/image120325_3.png)

If the doctor is having online consultation appointments, or default availability or overrides then one cannot make the schedulable for online appointments to "No". In such cases, one must cancel online appointments, remove the overrides and default availability for online consultation before setting the schedulable for online consultation to No.

**Resource Default Availability:** "Visit Mode" option is added In "Add Resource Availability Details" popup for Doctor Consultation on Edit Resource Default Availability screen. The visit mode list is enabled if the doctor is marked available for online consultation in the doctor master. If the doctor is not available for online consultation then visit mode cannot be changed and defaulted to "In Person". Otherwise, the user can change the visit mode "In Person", "Online" or "Both". Selecting the option as "Both" would enable to book either online or in-person consultation on the scheduler, whereas, visit mode as online or in-person would restrict the doctor availability for the respective modes only.

> ![](media/image120325_9.png)

The selected visit mode for the doctor availability for the given time range is also shown on the screen.

![](media/image120325_1.png)

**Add Resource Availability Overrides:** The behavior is the same as explained in Default Resource Availability.

**Add Bulk Resource Availability:** The behavior is the same as explained in Default Resource Availability. Except for,

-  If all the doctors listed on the resource selection box are having online consultation enabled in their doctor profile then visit mode can be changed.

-  If any of the listed doctors having online consultation disabled then visit mode is defaulted to in-person and cannot be edited.

-  Once a slot is added then further doctor selection and Select All options are disabled.

**Block Calendar:** Visit Mode selection option is provided on the Un-Block Calendar screen also. Visit Mode selection is available only if the online consultation is set to Yes in doctor master.

> ![](media/image120325_2.png)

**Add / Edit Appointment**

-  A mandatory option to select the appointment's visit mode is added

-  If the selected slot's visit mode is restricted for online or in-person only then the appointment visit mode cannot be changed

-  If the slot's visit mode is both, then the user can change the appointment visit mode to online.

-  By default in-person is the appointment visit_mode in the case of slot's visit mode is both or in-person

-  Edit Appointment: Appointment's visit mode cannot be changed. In the case of visit's appointment mode to be changed then one must cancel the appointment and create the new with desired visit mode

-  This is applicable for appointment drag and drop between the same doctor or with a different doctor.

**Calendar View:** Given an option to filter only online slots or In-Person slots.

> ![](media/image120325_5.png)

**Patient List:** Added one more list to filter only today's online consultation.

> ![](media/image120325_4.png)

Option for the doctor to open the external link to initiate the online consultation from consultation screen as well as patient list screen.

Filter by Visit Mode is added on Doctor Appointment and Today's Appointment screen

> ![](media/image120325_8.png)

**Upcoming Appointment screen:** ONL tag is added to indicate whether the patient's appointment is Online. This will appear only if the appointment's visit mode is Online consultation.

> ![](media/image120325_10.png)

**Start Online Consultation:** Doctors can start the online consultation by using the "Start Online Consultation" menu option on the patient in the Doctor Consultation Screen Menu or selecting the "Start Online Consultation" option under "Other Action" link on the patient consultation page. By clicking on this link the external page opens in a separate tab where doctor can initiate the online consultation with the patient.

> ![](media/image120325_6.png)

**Send online prescription:** 'RX Over Email' option added under "Other Actions" link on Doctor Consultation page. Using this option, the prescription can be sent via email to the recipient. By default the patient's email address gets populated on the screen and the user can edit or add more email addresses.

This link will appear only when the prescription message template is enabled and the patient's communication setting is enabled for this message, and consultation status must be closed status.

> ![](media/image120325_7.png)

##### API Changes

**Scheduler Master Data:** "available_for_online_consults" is added to "hospital_doctors" section in the API response. The possible values are "N" or "Y" to indicate the doctor is available for online consultation or not.

**First Available Slots ({url}/api/scheduler/firstavailableslots.json):** This is the new API developed to get the doctors first available slots along with visit mode. You can use visit_mode= "B", "I" or "O" to filter the availability based on visit mode. Resource_id and from_date are the other two params for this API and the the supported parameters are:

Parameter|Description
---------|-----------
appointment_date|to search for the first available date from the given date to next 10 days.
resource_id|Doctor ID
booked_slot|"I" or "O". "I" means ignore the slot if it has even one appointment booked in that slot in case of overbook enabled doctor. Default value is O.
center_id|CenterID
visit_mode|"B","I" or "O".

**Get Doctor Availability Slots ({url}//api/scheduler/availableslots.json):** This is the new API to get the slots availability by the doctor. Following are the supported parameters:

Parameter|Description
---------|-----------
from_date|to search for the first available date from the given date.
to_date|maximum value can be from_date + 30 days
resource_id|Doctor ID
booked_slot|"I" or "O". "I" means ignore the slot if it has even one appointment booked in that slot in case of overbook enabled doctor. Default value is O.
center_id|CenterID
visit_mode|"B","I" or "O"

**Save Appointment:** This is the new API to create the appointment in Insta which can be accessed by using POST method {url}/api/scheduler/save.json.

**Edit Appointment:** This is the new API to edit the appointment in Insta which can be accessed by using POST method {url/}/api/scheduler/edit.json. In addition to changing the appointment details, you can change the appointment status to only to Booked or Confirmed using this API

**UpdateStatus Appointment:** This is the new API to update the appointment status in Insta which can be accessed by POST method {url}/api/scheduler/updatestatus.json. One can use this API only to change the appointment status.

Please refer API documentation for technical details.

### List of Enhancements and Bugs Fixed in v12.3.25 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Integration|HMS-37258|Inclusion of Patient name details for Accounting API integration.
Enhancement|Inventory|IES-1977|Computation logic change to store inventory item expiry dates as the last day of the month instead of the first day of the month.
Bug|Billing|IES-2396|Bill Print string to number conversion issue.
Bug|Integration|HMS-37871|Accounting Integration: pagination of records to resolve time-outs
Bug|Insurance|IES-2422|Blank error log for failed remittance advice file.
Bug|Insurance|IES-2393|Activity start date is missing in e-claim xml.
Bug|Insurance|IES-2271|Insurance batches fail to be created with a prepared statement error in logs.
Bug|Insurance|IES-2273|Codification screen performance issue fix.
Bug|Inventory|IES-2342|Unable to edit invoice number and invoice total fails to be computed.
Bug|Inventory|HMS-37809|Stock Entry/PO: TCS calculation error fixes.

## Features in 12.3.26 [/cig-release-120326]

### Insurance [GET]

#### Person Register Reporting (Shafafiya UAE)

Person Register Reporting is a means of sharing patient demographic data to the health authority portals which was mandated from 15th Feb 2021.

The set of patient data that needs to be shared include: Person Unified Number (Unique Person identifier issued by the MOI), Birthdate, Gender, Nationality, Passport number, Emirates ID number, Country Of Residence, Emirate of Residence, Member ID( Encounter Facility ID and Encounter Patient ID.

A new master 'Other identification document types' has been introduced for capturing additional Patient identification document types such as Visa Number, which is enabled in all the registration screens. When users select any type, other field to capture data is getting enabled

Codes for Nationality, Emirate of Residence, City refer to the respective HAAD codes from the 'Code Sets master'.

The existing Self Pay claim submission screens are enhanced to support Person Register Reporting for all types of out of pocket payment cases including medical tourist, self pay and pro forma payer claims. Along with self pay batch creation options there are new fields provided to create a batch for all patients who have visited in the date range. One patient record will be part of only one person register from each center / pharmacy.

![](media/image120326_1.png)

Person Register Submission List: All person register batches also will be listed in this dashboard, though it is independently filtered by self pay claim batch/person register batch filter. Person Register generation and upload can be performed from this list.

![](media/image120326_6.png)

### Clinical [GET]

#### Physician Order - Modification of items is allowed until first administration.

Medicine items in the physician order are allowed to be modified till the first administration of the medication. If the medicine is not administered even once the medicine details can be edited for all the details and upon saving new MAR setup is recommended for administration. It also considers the below conditions:

-   Medicine details should be allowed to edit if prescription start date and time is greater than current date and time

-   Medicine details should be allowed to edit if prescription start date and time is within the current serving time or late serving time window.

For STAT medicines, when the prescription time is allowed to be back dated while prescribing and editing for STAT medication it marks the medication is administered on the same time by the user creating the prescription

#### Backdating IP-EMR Notes

While creating or editing IP-EMR notes, the user can now back dated notes by selecting the past date and time, (till the admission date and time).

![](media/image120326_3.png)

The notes can be sorted display is allowed to sort by document date and entry date, however document date sort is defaulted.

The notes are displayed in the reverse chronological order of the document date or entry date as per sort preference selected.

![](media/image120326_7.png)

#### Malaffi HIE enhancements

For ORU Lab result sharing, the below enhancements have been done:

-   For General Lab Results for the particular OBX segment, the NTE segment is shared with result parameter comments.

-   ORU messages shared after a revert sign-off have a corrected message information instead of final message.

### Patient Administration [GET]

#### List of additional enhancements to support online consultation workflow

Visit Mode filter on Out Patient List Screen: On "Patients for Consultation" page, there is an additional filter is added to search by Visit Mode

![](media/image120326_8.png)

Visit Mode filter on Doctor Appointments Screen: The Visit Mode information is also made available on Doctor Appointments screen.

![](media/image120326_5.png)

Start online consultation from OP-EMR: Doctors can initiate online consultation on the Patient List screen. Also, online consultation can be initiated within the EMR screen by accessing the "Other Action" menu. "Start Online Consult" is enabled only if the appointment visit_mode is Online and the teleconsult URL is updated by the external API.

![](media/image120326_2.png)

![](media/image120326_4.png)


### Diagnostics [GET]

#### QR Code support for Lab Report prints

This feature has been developed so that only on scanning the QR code does a user have access to review a covid test report for verification by government authorities. The Following changes to be done in the template to incorporate the new feature:

Add these line in the template:

```
    [#assign utility = "com.insta.hms.common.ftl.FtlQRCodeGenerator"?new()]
```

Wherever, the Barcode or QR codes are to be displayed on the template, add the following line:

```
  <!-[#assign url = utility("123456789", "QR_CODE","120","120")]->
```

Here, string "123456789" is the value to be converted to QR or Barcode. This is a mandatory parameter.

The second parameter is the what type of codes to be generated. Supported values are AZTEC, CODABAR, CODE_39, CODE_93, CODE_128, DATA_MATRIX, EAN_8, EAN_13, ITF, MAXICODE, PDF_417, QR_CODE, RSS_14, RSS_EXPANDED, UPC_A, UPC_E. Please note that some code types require the value to be in numeric formation.

Last two parameters are Height and Width which are optional parameters. If nothing is passed, it will take the default height and width.

It also possible to embed the link for the QR/Barcode as mentioned below:

```html
  <td>
    <a style=" text-decoration: none;" href="https://www.instahms.com">
      <img src='/instahms/master/${utility("https://www.google.com", "QR_CODE","100","100")}' alt="qrcode" width="100" height="100"/>
    </a>
  </td>
```

### Financial Accounting [GET]

- Health Authority Codes for Drugs and Consumables are now available in FA API for GRN, Supplier Return, Sales, Sales Return, Issue and Issue Returns. In the API response HSN Code and Health Authority Code Type are populated under ha_item_code and ha_code_type fields respectively.

- Job_transaction which may be helpful in sorting the unique transaction_ids for the FA posting (applicable only for HOSPBILLS, PHBILLS, INVTRANS and RECEIPT, PAYMENT (patient refund) voucher types)

- **CreditNote configuration:** Voucher type for Credit Note can be configured in /root/webapps/instahms/WEB-INF/classes/financialaccounting_flag.properties. Based on the value set for voucher.type.creditnote the voucher type for the credit note transactions are populated. For e.g., voucher.type.creditnote="CREDITNOTE". And bill_no would be the original bill number against the credit note raised, whereas, the voucher_no is the credit note number.

### List of Enhancements and Bugs Fixed in v12.3.26 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Billing|HMS-33596|Based on the back end generic preference called update_charge_on_rate_plan_change, rates will not be recalculated for billed transactions when any insurance is added to a visit irrespective of the rate plan.
Bug|Billing|HMS-36715|Decimal variance between pharmacy sale bill and hospital bill for pharmacy sale is fixed.
Bug|Billing|HMS-38036|Stock entry discount calculation error fix.
Bug|Billing|HMS-32305|Insurance to cash bill doesn't capture the is_tpa flag leading to an exclusion in self pay submissions.
Bug|Patient Administration|HMS-38000|Audit Log error in Test Scheduler

## Features in 12.3.27 [/cig-release-120327]

### Patient Administration [GET]

#### Encounter Type in Registration Screen

New classification visit type is added in the encounter type master to bring in more clarity on the encounter type , the visit type values are classified as In-Person , Home care and Teleconsultation, for now this is used to derive one of the patient class value for Malaffi (which is Homecare)

![](media/image120327_3.png)

In the Registration screen (OP flow) under visit information additionally encounter type is added , the encounter type field is mandatory and would be defaulted based on OP applicable and Op encounter default value set to yes in the Encounter type master.

![](media/image120327_2.png)

Encounter type would be allowed to change by the users under role with appropriate ACL provided to change the encounter type.

![](media/image120327_1.png)

**Note:**

Since encounter type is a mandatory field in the OP registration screenEncounter Type master needs to have at least one entry with OP applicable and OP encounter default set to Yes.

Home care services in Abu Dhabi region can now be onboarded to Malaffi HIE with the introduction of visit type in the encounter type master

### Financial Accounting [GET]

#### TDS posting for Sponsor Receipt:

If there any TDS paid against the sponsor receipt then FA will have TDS Paid A/C debited and Account Receivable is credited. The TDS Paid A/C name can be configured in financialaccounting_flag.properties

#### Voucher Sub Type support

Introduced `voucher_sub_type` column in `hms_accounting_info` table and FA APIs. This field will provide additional information about the Receipt and Payment voucher types. The values of voucher_sub_type feild must be configured in `financialaccounting_flag.properties` configuration file by the implementation team.

Following values can be configured in `financialaccounting_flag.properties` (stored in WEB-INF/classes folder in installed instaapps code in both application and worker servers):

Property|Description|Default Value
--------|-----------|-------------
voucher.type.creditnote|This would be the voucher_type for Credit Notes (Currently, the voucher_type for Credit Note is HOSPBILLS). Max length allowed is 15 characters.|CREDITNOTE
voucher.sub.type.deposit.collection|This will determine the voucher_sub_type for Deposit|DEPOSIT
voucher.sub.type.deposit.settlement|voucher_sub_type for Deposit Settlement|DEPOSIT SETTLEMENT
voucher.sub.type.deposit.refund|voucher_sub_type for Deposit Refund|DEPOSIT REFUND
voucher.sub.type.bill.advance|voucher_sub_type for Advance taken against a bill|BILL ADVANCE
voucher.sub.type.bill.settlement|voucher_sub_type for Settlement Receipt|BILL SETTLEMENT
voucher.sub.type.bill.refund|voucher_sub_type for Bill Refund|BILL REFUND
voucher.sub.type.sponsor.advance|voucher_sub_type for Sponsor Advance|SPONSOR ADVANCE
voucher.sub.type.sponsor.settlement|voucher_sub_type for Sponsor Settlement|SPONSOR SETTLEMENT
debit.account.for.tds|This will be the account name for TDS Paid. Max length is 50 characters.|TDS Paid A/C

**Note:** voucher_sub_type max length allowed is 50 characters.

### List of Enhancements and Bugs Fixed in v12.3.27 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Deprecation|Messaging|HMS-38600|Custom sms dispatcher implementation for DBAJ
Enhancement|Insurance|HMS-38412|Nationality Name to be referred in the person register from Code Sets master
Enhancement|Insurance|HMS-38569|Shafafiya: Show &lt;UnifiedNumber&gt; tag only when there is value to be shown
Enhancement|Messaging|HMS-38455|Support for DLT Template ID in Message template and SMS Message Dispatcher Configuration (HTTP only) inline with TRAI India regulations
Bug|Billing|IES-2150|Timeout error in Bills Report
Bug|Billing|IES-2812|Line items getting duplicated when we using "Test status" field in the Diagnostics Revenue Report
Bug|Billing|IES-3054|Cancelled items in the bill shows activity conducted as Yes
Bug|Billing|IES-3124|Bill is closed even though there is a patient due in the bill.
Bug|Billing|IES-3236|Bill Screen get unresponsive on adding a discount applied for certain items
Bug|Billing|IES-3457|Loss of 3rd digit precision in pharmacy billing computation for customers when using 3 digit precision currencies configuration (for customers in Oman, Bahrain, Kuwait)
Bug|Insurance|IES-2535|Frequent internal server errors in consultation screen caused by Prior Authorization validation logic
Bug|Insurance|IES-3116|Encounter End Date & time in the codification is updated wrongly
Bug|Insurance|IES-3146|RA getting failed due to missing denial codes even though the same is available in master
Bug|Insurance|IES-3187|Unable to delete the Self Pay batch
Bug|Insurance|IES-3215|Gender Code needs to be corrected in the person register
Bug|Insurance|IES-3224|Eligibility Authorization code in XML even though Eligibility Authorization in Claim XML is Excluded.
Bug|Insurance|IES-3354|DRG Insurance category is not shown in Insurance plan master and dynamic copay screen
Bug|Integration||Slida Integration is failing as the remote machine IP is being returned by remote host resolver instead of remote host name
Bug|Inventory|HMS-37018|[IES-1913] Console error while updating the Insurance details in the visit screen.
Bug|Inventory|HMS-38378|GRN after reopen and finalization getting an error as : "Item quantity is not matching"
Bug|Inventory|IES-2617|Closing Stock against the particular batch is doubled compare to Stock ledger
Bug|Inventory|IES-2996|Stock reports saved as favourite reports are not generating
Bug|Messaging|HMS-38596|[IES-1958] SMS and Email are sent even though Message Dispatcher Configuration are marked with Status : Inactive
Bug|Patient Administration|HMS-38563|`org.springframework.jdbc.BadSqlGrammarException` is displayed when a user tries to register a patient and also in the order screen when any ex:service is ordered.
Bug|Patient Administration|HMS-38576|Fixes few performance degradations on Ip Service List screen
Bug|Patient Administration|IES-1286|Getting "An Error Occurred" page when clicking Consult option against a Patient listed in Outpatient List.
Bug|Patient Administration|IES-2336|While saving OSP/IP Registration application shows Access Denied page instead of actual internal server error
Bug|Patient Administration|IES-3121|Patient Photo is getting removed automatically after clicking on Register in the Registration screen.The photo is added from the Emirates ID using an EID card reader
Bug|Platform|HMS-38385|'User to create new password on next login' functionality not working when user uses 'go back' browser option on 'Change Password' page and retries login
Bug|Platform|IES-3078|Rename patient header property "Adm/Reg Date" to "Reg Date" as the value displayed is registration time and not admission time for IP visits.
Bug|Platform|IES-3272|Password Preferences are not validated on force Change Password screen post login.
Bug|Services|IES-3141|Unable to Download Service masters
|IES-3153||


## Features in 12.3.28 [/cig-release-120328]

### List of Enhancements and Bugs Fixed in v12.3.28 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Bug|Platform|HMS-38611|Performance Optimization - Deprecated use of websockets for notifications and system messages
Bug|Patient Administration|HMS-38616|Performance Optimization - In Patient List screen.
Bug|Patient Administration|HMS-38595; HMS-38566|Performance Optimization - Patient List (OP Flow) for use of unnecessary spaces on patient search.
Bug|Patient Administration|HMS-38576|Performance Optimization for ADT screen.
Bug|Patient Administration|HMS-38567|Performance Optimizations - IP and OSP Registration screen.
Bug|Billing|HMS-38630|[IES-3294] Unable to lock bed charge edit
Bug|Billing|HMS-38627|[IES-3465] Not allowing to GRN expired Items even though its allowed in Generic Preferences
Bug|Billing|HMS-38604; HMS-38597; HMS-38583; HMS-38582; HMS-38578; HMS-38547|Performance Optimizations for Bill screen, fetching item names for Orders, Bill and Print Actions. Fix in Save Bill


## Features in 12.3.29 [/cig-release-120329]

### Clinical [GET]

#### IP-EMR Form Model changes which removes the terminal Save action

As part of a phased model changes there are some backend and user action updates introduced in this release to solve for data model lacunae and support for concurrent usage scenarios.

-   The terminal Save action has now been removed as data captured for each section is automatically saved on scroll or movement of focus and the user can also explicitly Save the clinical data captured at the section level.

-   Support for section level locks and user notifications in case of concurrent usage.

-   As part of this release we have temporarily removed the customize sections feature.

#### EMR View Update to view IP-EMR Notes

The display of notes under Patient and Visit EMR has been enhanced to provide a consolidated, note type or role-based view for which a Clinical Preference has been added called: Notes Group By preferences which defaults to No Grouping but has other options such as Note Type and Hospital Role.

-   EMR View by No Grouping displays all Notes in a single consolidated view.

![](media/image120329_2.png)

-   EMR View by Note Type segregates the display of notes by Note Type.

![](media/image120329_1.png)

-   EMR View by Hospital Role segregates the display of notes by Hospital Role.

![](media/image120329_3.png)


### List of Enhancements and Bugs Fixed in v12.3.29 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Clinical|HMS-36038|Froala Editor version upgrade which is applicable for the Discharge Summary and IP-EMR Notes features.
Bug|Billing|HMS-33847|Collection allocation builder: Filter by payment doesnt display results.
Bug|Insurance|HMS-38714|Add/Edit Insurance: doesnt display duplicate network plans.
Bug|Inventory|HMS-38437|Performance fix in Patient Issue Screen
Bug|Patient Administration|HMS-38661|Unable to save visit details due to console errors
Bug|General|--|Performance Optimization Fixes on the following pages - Codification, Patient Issues, OSP Registration, Patient List and Search actions.

## Features in 12.3.30 [/cig-release-120330]

### Insurance [GET]

#### Eclaim modifications to 'Activity start' and 'Encounter timing' (UAE specific)

In previous versions, changes were incorporated to apply the service conduction date as activity start and encounter time for eclaim submissions. It is now updated to apply based on a newly introduced configuration called 'Reporting Activity Timing In E-claim' at the service level to apply based on conduction or billed date/time. If any service is configured to report conduction time but not conducted, then it continues to consider service billed date/time as activity start date/time.The field 'Reporting Activity Timing In E-claim' column is available as part of the CSV download/upload to update masters.

#### Person Register submission updates (UAE specific)

-   Person Register batch creation has additional filters such as Department and Codification Status

-   The batch can be deleted before marking it as 'Sent'.

### Integrations [GET]

#### Financial Accounting - Introduction of Voucher sub types

A new field 'voucher_sub_type' is introduced to identify the voucher sub types like Bill Now or Bill Later for Hospital bills and etc., and following are the values:

Voucher Sub Type|Voucher Type|Description
----------------|------------|------------
BILLNOW|HOSPBILLS|Bill Now Bills
BILLLATER|HOSPBILLS|Bill Later Bills
OSPBILLNOW|HOSPBILLS|OSP Bill Now Bills
OSPBILLLATER|HOSPBILLS|OSP Bill Later Bills
INCBILLNOW|HOSPBILLS|Insurance Bill Now
INCBILLLATER|HOSPBILLS|Insurance Bill Later
DEPOSIT REFUND|PAYMENT|Deposit Refund
BILL REFUND|PAYMENT|Refund done against bill settlement
CASHPHBILL|PHBILLS|Pharmacy Cash Bills
CREDITPHBILL|PHBILLS|Pharmacy Credit Bills
HOSPPHBILL|PHBILLS|Pharmacy Hospital Bills
DEPOSIT|RECEIPT|Deposit
DEP SETTLEMENT|RECEIPT|Deposit Settlement
BILL ADVANCE|RECEIPT|Advance
BILL SETTLEMENT|RECEIPT|Direct Bill Settlement
SPONSOR ADVANCE|RECEIPT|Sponsor Advance
SPON SETTLEMENT|RECEIPT|Sponsor Settlement
PATIENT WRITE OFF|RECEIPT|Patient Write Off
SPONSOR WRITE OFF|RECEIPT|Sponsor Write Off

The option to configure these voucher sub type names from the application is coming in the upcoming version.

##### Other FA related enhancements

-   Now Stock Adjustment Entries are available in FA API. However, the stock adjustment entries are posted as per the Accounting Data Posting Cron.

-   Health Authority Item Codes and Health Authority Item Code Types are made available

-   Job_transaction_id field is made available in API

-   TDS information as separate entry is made available for Sponsor Receipts

-   'Credit Note' voucher type is configurable

-   Issue Store Code will now be populated with store's center code instead of patient's visit center code

-   center_id for deposit and deposit settlement is now correctly posting

-   Deposit Refunds from multiple deposits are now being posted as a separate Payment voucher.

#### Coupon Redemption widget integration

This integration is developed for the "EasyRewardz" vendor to apply the discount plan on the billing by invoking their widget on the billing screen.

##### Configuration

The feature is an add-on module and mod_easy_rewards_coupon needs to be activated to access the feature.

Configure insta_integration and center_integration tables to configure API endpoint and related settings.

```sql
insert into insta_integration(integration_name ,url,status,environment) values('easy_rewards_generate_token','[[easyrewardshost]]/api/GenerateSecurityToken', 'A','PROD');

insert into center_integration_details (integration_id , http_body,http_method) values(select integration_id from insta_integration where integration_name='easy_rewards_generate_token','{"UserName": "[[username]]", "UserPassword": "[[password]]","DevId":"[[devid]]","AppId": "[[appid]]","ProgramCode": "[[programcode]]"}','POST');

insert into insta_integration(integration_name ,url,status,environment) values('easy_rewards_widget','[[easyrewardshost]]/api/GetWorkflowWidget','A','PROD');

insert into center_integration_details (integration_id, http_body,http_method) values(select integration_id from insta_integration where integration_name='easy_rewards_widget','{"SecurityToken":","MemberId":","UserName":"[[username]]","StoreCode":","WidgetCode":"RC","BillGUID":""}','POST');
```

Values for placeholders _[[easyrewardshost]]_, _[[devid]]_, _[[appid]]_, _[[username]]_, _[[password]]_, _[[programcode]]_ and other necessary details must be obtained from EasyRewardZ team.

An action right ***Allow EasyRewardZ Coupon Redemption*** is available under Settings  Roles and Users  Action Rights. Setting this option to "Yes" for allowing all users associated with the role to perform coupon redemption activity.

To access the feature access ***Coupon Redemption*** option from ***Other Action*** link in OP Flow/IP Flow Billing activity.

![](media/image120330_1.png)

Clicking on the ***Coupon Redemption*** link, opens the EasyRewardZ widget on the popup. By redeeming the points on the widget, the discount plan gets automatically selected once this window is closed.

![](media/image120330_2.png)

In case the popup fails to open or you face issues with widget , recheck the configuration for any issues.

### List of Enhancements and Bugs Fixed in v12.3.30 [GET]

Issue Type|Module|JIRA ID|Summary
----------|------|-------|-------
Enhancement|Diagnostics|HMS-38810|Restrict Lab Report SMS by visit type, so that it is sent only to OP / IP patients.
Bug|Patient Administration|HMS-39051|Services Scheduler search issue.
Bug|Patient Administration|HMS-38987|OSP/IP Registration: Unable to select insurance details.
Bug|Patient Administration|HMS-38779|Unable to update the password after setting password preferences.
Bug|Patient Administration|HMS-38755|Registration: Appointment arrival fix.
Bug|Patient Administration|HMS-38662|Oops error when we click on edit patient details in consultation / Triage screen(OP FLOW).
Bug|Patient Administration|HMS-37771|System is Picking wrong Patient Details on the appointment's patient arrival to the registration screen, when marked as 'arrived'.
Bug|Inventory|HMS-38851|Stock entry: displays an error on edit of quantity: 'Billed Qty should not exceed PO Qty'
Bug|Insurance|HMS-38802|Internal Server error while searching for batch id in selfpay screen.
Bug|Integration|HMS-38889|Admitting Department & Admitting Doctor is null for [Voucher Type: INVTRANS & PHBILLS]
Bug|Billing|HMS-38858|Response date and time not capturing in coder claim review report
Bug|Billing|HMS-38824|Order screen timed out error: Unable to post the order from the order screen.
Bug|Billing|HMS-38821|OP revisit consultation bill should be automatically closed if paid by patient

## Previous Releases [/prev-release]

### 12.x [GET]

[12.2](release_1202.html)

[12.1](release_1201.html)

[12.0](release_1200.html)

### 11.x [GET]

[11.0 - 11.13.0](release_notes_11xx.pdf)
