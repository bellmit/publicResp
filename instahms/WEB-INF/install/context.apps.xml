<!--
    Context specific tomcat configuration file for the instahms application
-->

<Context 
	path="/insta__app__"
	debug="0"
	reloadable="false"
	crossContext="true"
	docBase="__apphome__/insta__app__">
	<JarScanner scanManifest="false"/>
	<Parameter
		name="defaultSchema" 
		value="__schema__"
		override="false"
	/>
	<JarScanner scanManifest="false" scanClassPath="false"/>
	<Resource 
		name="postgres"
		auth="Container"
        type="javax.sql.DataSource"
        factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="org.postgresql.Driver"
        url="jdbc:postgresql://__dbhost__:__dbport__/__hmsapp__"
		username="__dbuser__"
		password="__dbpassword__"
		minIdle="__apps_db_minidle__"
		maxIdle="__apps_db_maxidle__"
		maxActive="__apps_db_maxactive__"
		maxWait="10000"
		minEvictableIdleTimeMillis="60000"
		timeBetweenEvictionRunsMillis="20000"
		removeAbandonedTimeout="300"
		validationInterval="30000"
		testWhileIdle="true"
		removeAbandoned="true"
		logAbandoned="true"
		validationQuery="select 1"
        jdbcInterceptors="StatementFinalizer;ResetAbandonedTimer"
	/>
	
	<Resource name="quartz"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="org.postgresql.Driver"
		url="jdbc:postgresql://__dbhost__:__dbport__/__quartzdb__"
		username="__dbuser__"
		password="__dbpassword__"
		minIdle="__apps_quartz_minidle__"
		maxIdle="__apps_quartz_maxidle__"
		maxActive="__apps_quartz_maxactive__"
		maxWait="10000"
		minEvictableIdleTimeMillis="60000"
		timeBetweenEvictionRunsMillis="20000"
		validationInterval="30000"
		removeAbandonedTimeout="300"
		testOnBorrow="true"
		testWhileIdle="true"
		removeAbandoned="true"
		logAbandoned="true"
		validationQuery="select 1"
		jdbcInterceptors="StatementFinalizer;ResetAbandonedTimer"
	/>

</Context>

