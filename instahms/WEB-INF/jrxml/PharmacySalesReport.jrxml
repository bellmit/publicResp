<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PharmacySalesReport" pageWidth="595" pageHeight="842" whenNoDataType="NoDataSection" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="40" bottomMargin="40">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="fromDate" class="java.sql.Date" isForPrompting="false">
		<defaultValueExpression><![CDATA[java.sql.Date.valueOf("2009-10-01")]]></defaultValueExpression>
	</parameter>
	<parameter name="toDate" class="java.sql.Date" isForPrompting="false">
		<defaultValueExpression><![CDATA[java.sql.Date.valueOf("2009-10-01")]]></defaultValueExpression>
	</parameter>
	<parameter name="saleType" class="java.lang.String">
		<defaultValueExpression><![CDATA["*"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
 (coalesce(it.total_item_amount,0) - coalesce(m.discount,0) + coalesce(m.round_off,0)) as total_amount,
 (coalesce(it.total_item_disc,0) + m.discount) as discount,
 coalesce(it.total_item_tax,0) as tax,
 m.sale_id, m.bill_no, m.sale_date, m.date_time, b.visit_type, d.dept_name,
 m.type as sale_type, coalesce(b.closed_by,'(Open Bills)') as username,
 CASE WHEN b.bill_type='C' THEN 'C'
      ELSE 'P' END
   AS bill_type,
 CASE WHEN rc.is_credit='Y' and visit_type='r' THEN 'Retail Credit'
      WHEN rc.is_credit='N' and visit_type='r' THEN 'Retail'
      WHEN visit_type='o' THEN 'Out Patient'
      ELSE 'In Patient' END
   AS patient_type

FROM pharmacy_medicine_sales_main m
JOIN pharmacy_sale_item_totals_view it using(sale_id)
JOIN bill b on (m.bill_no = b.bill_no)
JOIN general_departments d on (m.store_id = d.dept_id)
LEFT JOIN pharmacy_retail_customers rc on rc.customer_id=b.visit_id

WHERE date(m.sale_date)>= $P{fromDate} AND date(m.sale_date)<= $P{toDate}
  AND ($P{saleType} = '' OR m.type = $P{saleType})
ORDER BY bill_type, d.dept_name, b.closed_by, patient_type desc, m.sale_id desc]]>
	</queryString>
	<field name="total_amount" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="discount" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tax" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="sale_id" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bill_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="sale_date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="date_time" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="visit_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dept_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="sale_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="username" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bill_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="SUM_total_user" class="java.math.BigDecimal" resetType="Group" resetGroup="username" calculation="Sum">
		<variableExpression><![CDATA[($F{total_amount}.add($F{tax})).subtract($F{discount})]]></variableExpression>
	</variable>
	<variable name="SUM_tax_user" class="java.math.BigDecimal" resetType="Group" resetGroup="username" calculation="Sum">
		<variableExpression><![CDATA[$F{tax}]]></variableExpression>
	</variable>
	<variable name="sumstoreamount" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{sumstoretotal}.add($V{sumstorediscount}).add($V{sumstoretax})]]></variableExpression>
	</variable>
	<variable name="sumstoretax" class="java.math.BigDecimal" resetType="Group" resetGroup="store" calculation="Sum">
		<variableExpression><![CDATA[$F{tax}]]></variableExpression>
	</variable>
	<variable name="sumstorediscount" class="java.math.BigDecimal" resetType="Group" resetGroup="store" calculation="Sum">
		<variableExpression><![CDATA[$F{discount}]]></variableExpression>
	</variable>
	<variable name="sumstoretotal" class="java.math.BigDecimal" resetType="Group" resetGroup="store" calculation="Sum">
		<variableExpression><![CDATA[$F{total_amount}]]></variableExpression>
	</variable>
	<variable name="sumusertax" class="java.math.BigDecimal" resetType="Group" resetGroup="username" calculation="Sum">
		<variableExpression><![CDATA[$F{tax}]]></variableExpression>
	</variable>
	<variable name="sumuserdiscount" class="java.math.BigDecimal" resetType="Group" resetGroup="username" calculation="Sum">
		<variableExpression><![CDATA[$F{discount}]]></variableExpression>
	</variable>
	<variable name="sumusertotal" class="java.math.BigDecimal" resetType="Group" resetGroup="username" calculation="Sum">
		<variableExpression><![CDATA[$F{total_amount}]]></variableExpression>
	</variable>
	<variable name="sumpatienttax" class="java.math.BigDecimal" resetType="Group" resetGroup="patienttype" calculation="Sum">
		<variableExpression><![CDATA[$F{tax}]]></variableExpression>
	</variable>
	<variable name="sumpatientdiscount" class="java.math.BigDecimal" resetType="Group" resetGroup="patienttype" calculation="Sum">
		<variableExpression><![CDATA[$F{discount}]]></variableExpression>
	</variable>
	<variable name="sumpatienttotal" class="java.math.BigDecimal" resetType="Group" resetGroup="patienttype" calculation="Sum">
		<variableExpression><![CDATA[$F{total_amount}]]></variableExpression>
	</variable>
	<variable name="GrandTotalTax" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{tax}]]></variableExpression>
	</variable>
	<variable name="GrandTotalDiscount" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{discount}]]></variableExpression>
	</variable>
	<variable name="GrandTotalAmount" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total_amount}]]></variableExpression>
	</variable>
	<group name="Grand Total">
		<groupHeader>
			<band height="50"/>
		</groupHeader>
		<groupFooter>
			<band height="50">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="457" y="0" width="78" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{GrandTotalAmount}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="369" y="0" width="42" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumstoretax}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-3" x="312" y="18" width="222" height="1"/>
				</line>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-3" x="156" y="3" width="151" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression class="java.lang.String"><![CDATA["Grand Total:"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="304" y="0" width="65" height="15" isPrintWhenDetailOverflows="true"/>
					<box rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{GrandTotalAmount}.add($V{GrandTotalDiscount}).subtract($V{GrandTotalTax})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="411" y="0" width="45" height="16" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{GrandTotalDiscount}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="billType" isStartNewPage="true">
		<groupExpression><![CDATA[new Boolean($F{bill_type}.equals("C"))]]></groupExpression>
		<groupHeader>
			<band height="25">
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-9" x="84" y="1" width="112" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="16" isBold="true" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{bill_type}.equals("C")?"Bill Later":"Bill Now"]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-3" x="0" y="1" width="84" height="20"/>
					<box leftPadding="5"/>
					<textElement>
						<font size="16"/>
					</textElement>
					<text><![CDATA[Bill Type:]]></text>
				</staticText>
				<line>
					<reportElement key="line-1" x="0" y="1" width="535" height="2"/>
				</line>
				<line>
					<reportElement key="line-2" x="0" y="21" width="535" height="2"/>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<group name="store">
		<groupExpression><![CDATA[$F{dept_name}]]></groupExpression>
		<groupHeader>
			<band height="25">
				<staticText>
					<reportElement key="staticText" x="1" y="0" width="46" height="20"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="14"/>
					</textElement>
					<text><![CDATA[Store:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField" x="47" y="0" width="189" height="20"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="14" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{dept_name}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-5" x="0" y="21" width="535" height="2" forecolor="#808080" backcolor="#808080"/>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="19">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="457" y="0" width="78" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumstoretotal}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="369" y="0" width="42" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumstoretax}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-3" x="312" y="18" width="222" height="1"/>
				</line>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-3" x="156" y="3" width="151" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{dept_name} + " Total:"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="304" y="0" width="65" height="15" isPrintWhenDetailOverflows="true"/>
					<box rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumstoretotal}.add($V{sumstorediscount}).subtract($V{sumstoretax})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="411" y="0" width="45" height="16" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumstorediscount}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="username">
		<groupExpression><![CDATA[$F{username}]]></groupExpression>
		<groupHeader>
			<band height="25">
				<staticText>
					<reportElement key="staticText" x="1" y="0" width="43" height="20"/>
					<box leftPadding="3">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="13"/>
					</textElement>
					<text><![CDATA[User:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField" x="44" y="0" width="189" height="20"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="13" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{username}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-6" mode="Transparent" x="0" y="20" width="535" height="1" forecolor="#808080" backcolor="#808080"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="19">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="457" y="0" width="78" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumusertotal}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="369" y="0" width="42" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumusertax}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-1" x="312" y="0" width="222" height="1" isPrintWhenDetailOverflows="true"/>
				</line>
				<line>
					<reportElement key="line-2" x="312" y="18" width="222" height="1" isPrintWhenDetailOverflows="true"/>
				</line>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-4" x="157" y="3" width="151" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{username} + " Total:"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="304" y="0" width="65" height="15" isPrintWhenDetailOverflows="true"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumusertotal}.add($V{sumuserdiscount}).
subtract($V{sumusertax})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="411" y="0" width="45" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumuserdiscount}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="salesdetails">
		<groupExpression><![CDATA[]]></groupExpression>
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<group name="patienttype">
		<groupExpression><![CDATA[$F{patient_type}]]></groupExpression>
		<groupHeader>
			<band height="22">
				<staticText>
					<reportElement x="0" y="0" width="87" height="20"/>
					<box leftPadding="3"/>
					<textElement>
						<font size="12"/>
					</textElement>
					<text><![CDATA[Patient Type :]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="87" y="0" width="307" height="20"/>
					<textElement>
						<font size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{patient_type}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-6" mode="Transparent" x="0" y="20" width="535" height="1" forecolor="#808080" backcolor="#808080"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="19">
				<textField isBlankWhenNull="false">
					<reportElement key="textField-4" x="157" y="3" width="151" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{patient_type} + " Total:"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="304" y="0" width="65" height="15" isPrintWhenDetailOverflows="true"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumpatienttotal}.add($V{sumpatientdiscount})
.subtract($V{sumpatienttax})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="369" y="0" width="42" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumpatienttax}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="411" y="0" width="45" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumpatientdiscount}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField" x="457" y="0" width="78" height="15" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{sumpatienttotal}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-1" x="312" y="0" width="222" height="1"/>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="71">
			<line>
				<reportElement key="line" positionType="FixRelativeToBottom" x="0" y="48" width="534" height="1" forecolor="#000000"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<line>
				<reportElement key="line" x="0" y="3" width="534" height="1" forecolor="#000000"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy" isBlankWhenNull="false">
				<reportElement key="textField-7" x="199" y="52" width="64" height="16"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$P{fromDate}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy" isBlankWhenNull="false">
				<reportElement key="textField-8" x="287" y="52" width="66" height="16"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$P{toDate}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-2" x="263" y="52" width="24" height="16"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[to]]></text>
			</staticText>
			<textField>
				<reportElement x="1" y="9" width="533" height="32"/>
				<textElement textAlignment="Center">
					<font size="20" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{saleType}.equals("") ?
  "Pharmacy Sales & Returns Report" :
  ($P{saleType}.equals("S") ? "Pharmacy Sales Report" :
    "Pharmacy Returns Report")]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="5"/>
	</pageHeader>
	<columnHeader>
		<band height="23">
			<rectangle radius="0">
				<reportElement key="element-22" mode="Opaque" x="2" y="3" width="534" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
				<graphicElement>
					<pen lineWidth="0.25" lineStyle="Solid"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement key="element-94" x="171" y="4" width="68" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Sale Bill Num]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" x="369" y="4" width="42" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[VAT]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" x="112" y="4" width="59" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Bill Num]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" x="0" y="4" width="111" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-91" x="304" y="4" width="65" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-92" x="461" y="4" width="73" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-95" x="411" y="4" width="50" height="16" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Discount]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText" x="239" y="4" width="65" height="16" forecolor="#000000"/>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Sale Type]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="17">
			<rectangle>
				<reportElement key="rectangle-1" x="0" y="0" width="535" height="17" backcolor="#FFFFFF">
					<printWhenExpression><![CDATA[new Boolean(($V{salesdetails_COUNT}.intValue()%2) == 0)]]></printWhenExpression>
				</reportElement>
				<graphicElement>
					<pen lineWidth="0.0" lineStyle="Solid"/>
				</graphicElement>
			</rectangle>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="369" y="1" width="42" height="15"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{tax}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="112" y="1" width="59" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{bill_no}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="HH:mm" isBlankWhenNull="true">
				<reportElement key="textField" x="71" y="1" width="41" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{date_time}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd-MM-yyyy" isBlankWhenNull="true">
				<reportElement key="textField" x="0" y="1" width="71" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{sale_date}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-1" x="457" y="1" width="78" height="15"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{total_amount}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-2" x="304" y="1" width="65" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{total_amount}.add($F{discount}).subtract($F{tax})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" x="411" y="0" width="45" height="17"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{discount}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="171" y="1" width="55" height="15"/>
				<box topPadding="1" rightPadding="8"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{sale_id}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField" x="225" y="1" width="79" height="15"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{sale_type}.equals("S")?"Normal":$F{sale_type}.equals("R")?"Return":"Normal"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band height="27">
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="336" y="4" width="170" height="19"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page " + $V{PAGE_NUMBER} + " of "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="506" y="4" width="29" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="CP1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement key="line" x="0" y="1" width="535" height="1" forecolor="#000000"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<textField pattern="dd-MM-yyyy HH:mm" isBlankWhenNull="false">
				<reportElement key="textField" x="1" y="6" width="209" height="19"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
	<noData>
		<band height="30">
			<printWhenExpression><![CDATA[$V{REPORT_COUNT}.intValue()==0?Boolean.TRUE:Boolean.FALSE]]></printWhenExpression>
			<staticText>
				<reportElement key="staticText-1" x="172" y="7" width="190" height="21"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[No data found for the given criteria.]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
