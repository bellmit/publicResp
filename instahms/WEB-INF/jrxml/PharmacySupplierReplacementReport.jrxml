<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="pharmacysupplierreturns" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="40" bottomMargin="40">
	<parameter name="retNo" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT s.supplier_name,medicine_name,pr.batch_no,(0-pr.qty) as qty,prm.remarks,return_no,to_char(prm.date_time,'DD-MM-YYYY') as returndate,mm.manf_mnemonic,mm.manf_name,
TO_CHAR(pmsd.exp_dt,'MON-YYYY') AS EXP_DATE,
case when return_type='D' then 'Damage' when return_type='E' then 'Expiry' when return_type='N' then 'Non-Moving' else 'Others' end as returntype,st.dept_name
FROM store_supplier_returns pr
JOIN store_supplier_returns_main prm using (return_no)
JOIN supplier_master s on (s.supplier_code = prm.supplier_id)
JOIN store_item_details pmd using(medicine_id)
join manf_master mm on mm.manf_code=pmd.manf_name
join stores st on st.dept_id = prm.store_id
JOIN store_stock_details pmsd on pmsd.dept_id=store_id and pmsd.medicine_id=pr.medicine_id and pmsd.batch_no=pr.batch_no
and return_no='$P!{retNo}']]>
	</queryString>
	<field name="supplier_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="medicine_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="batch_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qty" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="returndate" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="remarks" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="return_no" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="returntype" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="manf_mnemonic" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="exp_date" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dept_name" class="java.lang.String"/>
	<variable name="svalue" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{qty}]]></variableExpression>
	</variable>
	<group name="invoiceheader">
		<groupHeader>
			<band height="59">
				<staticText>
					<reportElement key="staticText-13" x="354" y="5" width="45" height="20"/>
					<box>
						<pen lineWidth="0.0" lineColor="#747FD8"/>
						<topPen lineWidth="0.0" lineColor="#747FD8"/>
						<leftPen lineWidth="0.0" lineColor="#747FD8"/>
						<bottomPen lineWidth="0.0" lineColor="#747FD8"/>
						<rightPen lineWidth="0.0" lineColor="#747FD8"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="9" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Supplier:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-3" x="399" y="5" width="133" height="20"/>
					<box>
						<pen lineWidth="0.0" lineColor="#747FD8"/>
						<topPen lineWidth="0.0" lineColor="#747FD8"/>
						<leftPen lineWidth="0.0" lineColor="#747FD8"/>
						<bottomPen lineWidth="0.0" lineColor="#747FD8"/>
						<rightPen lineWidth="0.0" lineColor="#747FD8"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{supplier_name}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="5" width="110" height="20"/>
					<textElement verticalAlignment="Middle">
						<font size="9" pdfFontName="Helvetica"/>	
					</textElement>
					<text><![CDATA[Replacement Note No:
]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="111" y="5" width="50" height="20"/>
					<textElement verticalAlignment="Middle">
						<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$F{return_no}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-17" x="168" y="5" width="100" height="20"/>
					<box leftPadding="3"/>
					<textElement verticalAlignment="Middle">
						<font size="9" pdfFontName="Helvetica"/>	
					</textElement>
					<text><![CDATA[Replacement Date:
]]></text>
				</staticText>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-54" x="268" y="5" width="113" height="20"/>
					<box leftPadding="3"/>
					<textElement verticalAlignment="Middle">
						<font size="9" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{returndate}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-53" x="260" y="30" width="270" height="18"/>
					<box leftPadding="3"/>
					<textElement verticalAlignment="Middle">
						<font size="9" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{remarks}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-18" x="206" y="29" width="58" height="18"/>
					<box leftPadding="3"/>
					<textElement verticalAlignment="Middle">
						<font size="9" pdfFontName="Helvetica"/>	
					</textElement>
					<text><![CDATA[Remarks :]]></text>
				</staticText>
				<staticText>
					<reportElement x="3" y="32" width="68" height="20"/>
					<textElement>
						<font size="9" pdfFontName="Helvetica"/>	
					</textElement>
					<text><![CDATA[Store Name:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="71" y="33" width="135" height="20"/>
					<textElement>
						<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{dept_name}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<group name="returnheader">
		<groupHeader>
			<band height="28">
				<staticText>
					<reportElement key="staticText-4" mode="Opaque" x="35" y="0" width="115" height="24" backcolor="#FFFFFF"/>
					<box leftPadding="2"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Item Name]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-5" mode="Opaque" x="152" y="0" width="84" height="24" backcolor="#FFFFFF"/>
					<box leftPadding="2"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Mfr]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-6" mode="Opaque" x="238" y="0" width="110" height="24" backcolor="#FFFFFF"/>
					<box leftPadding="2"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Batch No]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-7" mode="Opaque" x="350" y="0" width="83" height="24" backcolor="#FFFFFF"/>
					<box leftPadding="2"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Expiry Dt.]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-8" mode="Opaque" x="435" y="0" width="71" height="24" backcolor="#FFFFFF"/>
					<box rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Qty]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-24" mode="Opaque" x="0" y="0" width="35" height="24" backcolor="#FFFFFF"/>
					<box topPadding="2" leftPadding="2"/>
					<textElement textAlignment="Left" verticalAlignment="Top">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[#]]></text>
				</staticText>
				<line>
					<reportElement x="0" y="2" width="535" height="1"/>
				</line>
				<line>
					<reportElement x="0" y="25" width="535" height="1"/>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="110">
				<staticText>
					<reportElement x="369" y="2" width="75" height="20"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Total :]]></text>
				</staticText>
				<textField>
					<reportElement x="445" y="2" width="60" height="20"/>
					<box rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{svalue}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="8" y="38" width="295" height="70"/>
					<textElement/>
					<text><![CDATA[Received the above items as replacement for returned items.



(Signature of receiver)

]]></text>
				</staticText>
				<line>
					<reportElement x="354" y="4" width="179" height="1"/>
				</line>
				<line>
					<reportElement x="354" y="26" width="179" height="1"/>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="37">
			<staticText>
				<reportElement key="staticText" x="61" y="5" width="412" height="31"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Stores  Item Replacement Note

]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="2" width="535" height="1" forecolor="#000000"/>
			</line>
			<line>
				<reportElement x="0" y="35" width="535" height="1"/>
			</line>
		</band>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<columnHeader>
		<band/>
	</columnHeader>
	<detail>
		<band height="32">
			<rectangle>
				<reportElement key="" mode="Opaque" x="0" y="0" width="534" height="20" forecolor="#FFFFFF" backcolor="#FFFFFF"/>
			</rectangle>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" stretchType="RelativeToTallestObject" mode="Transparent" x="35" y="0" width="115" height="30"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="9" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{medicine_name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" stretchType="RelativeToTallestObject" x="152" y="4" width="84" height="26"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="9" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{manf_mnemonic}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd/MM" isBlankWhenNull="true">
				<reportElement key="textField" stretchType="RelativeToTallestObject" x="238" y="6" width="110" height="18"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Left" verticalAlignment="Top">
					<font size="9" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{batch_no}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField" stretchType="RelativeToTallestObject" x="350" y="4" width="83" height="20"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="9" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{exp_date}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" stretchType="RelativeToTallestObject" x="435" y="4" width="71" height="20"/>
				<box rightPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.Number"><![CDATA[$F{qty}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-61" x="0" y="6" width="35" height="18"/>
				<box topPadding="2" leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font size="9" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
