<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<parameter name="visitStatusArray" class="java.lang.String[]"/>
	<parameter name="insuranceArray" class="java.lang.String[]"/>
	<parameter name="wardName" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="tpaName" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="pharmacyAmtDueClause" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalAmtDueClause" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="totalAmtDueClause" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="centerClause" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="tpaDisplayName" class="java.lang.String"/>
	<parameter name="center_id" class="java.lang.Integer"/>
	<parameter name="centerName" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT *, total_amt - pharmacy_amt AS hospital_amt
FROM (
	SELECT pr.patient_id, b.bill_no, pr.mr_no, pr.status, wn.ward_no, wn.ward_name, pr.bed_type,
		bn.bed_name,hcm.center_id,
		(SELECT bed_name FROM ip_bed_details
			JOIN bed_names using(bed_id)
			WHERE is_bystander AND  b.visit_id = patient_id AND bed_state = 'O' LIMIT 1)
		as bystander_bed_name, b.deposit_set_off,
		get_patient_name(pd.salutation, pd.patient_name, pd.middle_name, pd.last_name) as patient_name,
		CASE WHEN pr.primary_sponsor_id IS NULL or pr.primary_sponsor_id = '' THEN 'I' ELSE 'A' END AS tpa_status,
		(b.total_amount+b.total_tax) - (b.total_claim+b.total_claim_tax) AS total_amt,
		(SELECT CASE WHEN pr.primary_sponsor_id IS NOT NULL and pr.primary_sponsor_id != ''
				THEN coalesce(sum((amount+tax_amt)-(insurance_claim_amount+sponsor_tax_amt)),0.00)
				ELSE coalesce(sum(amount+tax_amt),0.00) END
			FROM bill_charge bc
			WHERE bc.bill_no=b.bill_no AND charge_head IN ('PHMED','PHRET','PHCMED','PHCRET')
				AND bc.status !='X'
			) AS pharmacy_amt,
		(SELECT coalesce(sum(brh.amount), 0.00)
             FROM receipts brh
             JOIN bill_receipts brep ON brh.receipt_id = brep.receipt_no AND NOT brh.is_deposit
             JOIN counters ch ON (brh.counter = ch.counter_id)
			WHERE brep.bill_no = b.bill_no AND brh.receipt_type IN ('R','F') AND ch.counter_type != 'P'
			) AS hospital_advance,
		(SELECT coalesce(sum(brp.amount), 0.00)
			FROM receipts brp
			    JOIN bill_receipts brr ON brp.receipt_id = brr.receipt_no AND NOT brp.is_deposit
				JOIN counters cp ON (brp.counter = cp.counter_id)
			WHERE brr.bill_no = b.bill_no AND brp.receipt_type IN ('R','F') AND cp.counter_type = 'P'
			) AS pharmacy_advance, pr.primary_sponsor_id,pr.center_id AS cen_id,hcm.center_name
	FROM bill b
		LEFT JOIN patient_registration pr ON (pr.patient_id=b.visit_id)
		LEFT JOIN patient_details pd on (pd.mr_no=pr.mr_no)
		LEFT JOIN admission a ON (a.patient_id=pr.patient_id)
		LEFT JOIN bed_names bn ON (bn.bed_id=a.bed_id)
		LEFT JOIN ward_names wn ON (wn.ward_no=bn.ward_no)
		LEFT JOIN hospital_center_master hcm ON (hcm.center_id = pr.center_id)
		WHERE b.status IN ('A','F') AND payment_status = 'U' AND bill_type IN ('P','C') AND b.visit_type='i'
) as qry
WHERE $X{IN,status,visitStatusArray} AND $X{IN,tpa_status,insuranceArray} AND (ward_no=$P{wardName} OR $P{wardName}='')
AND (primary_sponsor_id=$P{tpaName} OR $P{tpaName}='') $P!{centerClause}
$P!{pharmacyAmtDueClause} $P!{hospitalAmtDueClause} $P!{totalAmtDueClause}
ORDER BY ward_name,bill_no]]>
	</queryString>
	<field name="patient_id" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="mr_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ward_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bed_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bed_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bystander_bed_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="deposit_set_off" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="hospital_amt" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pharmacy_amt" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="hospital_advance" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pharmacy_advance" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bill_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tpa_status" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="status" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ward_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="hospital_due" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{hospital_amt}.subtract( $F{hospital_advance} )]]></variableExpression>
	</variable>
	<variable name="pharmacy_due" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{pharmacy_amt}.subtract( $F{pharmacy_advance} )]]></variableExpression>
	</variable>
	<variable name="hosp_amt_subtot" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$F{hospital_amt}]]></variableExpression>
	</variable>
	<variable name="hosp_adv_subtot" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$F{hospital_advance}]]></variableExpression>
	</variable>
	<variable name="hosp_due_subtot" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$V{hospital_due}]]></variableExpression>
	</variable>
	<variable name="phar_amt_subtot" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$F{pharmacy_amt}]]></variableExpression>
	</variable>
	<variable name="phar_adv_subtot" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$F{pharmacy_advance}]]></variableExpression>
	</variable>
	<variable name="phar_due_subtot" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$V{pharmacy_due}]]></variableExpression>
	</variable>
	<variable name="hosp_amt_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{hospital_amt}]]></variableExpression>
	</variable>
	<variable name="hosp_adv_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{hospital_advance}]]></variableExpression>
	</variable>
	<variable name="hosp_due_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{hospital_due}]]></variableExpression>
	</variable>
	<variable name="phar_amt_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{pharmacy_amt}]]></variableExpression>
	</variable>
	<variable name="phar_adv_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{pharmacy_advance}]]></variableExpression>
	</variable>
	<variable name="phar_due_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{pharmacy_due}]]></variableExpression>
	</variable>
	<variable name="deposit_sub_total" class="java.math.BigDecimal" resetType="Group" resetGroup="ward" calculation="Sum">
		<variableExpression><![CDATA[$F{deposit_set_off}]]></variableExpression>
	</variable>
	<variable name="deposit_total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{deposit_set_off}]]></variableExpression>
	</variable>
	<group name="total">
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band height="20">
				<textField isBlankWhenNull="true">
					<reportElement x="614" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{phar_adv_total}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="444" y="0" width="60" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hosp_adv_total}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="384" y="0" width="60" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hosp_amt_total}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="664" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{phar_due_total}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="504" y="0" width="60" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hosp_due_total}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="564" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{phar_amt_total}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="0" width="384" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<text><![CDATA[Grand Total :]]></text>
				</staticText>
				<textField isBlankWhenNull="true">
					<reportElement x="714" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{deposit_total}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="ward">
		<groupExpression><![CDATA[$F{ward_name}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<textField isBlankWhenNull="true">
					<reportElement x="70" y="0" width="230" height="20"/>
					<textElement verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{ward_name}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="0" width="70" height="20"/>
					<textElement verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Ward Name  :]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="20">
				<textField isBlankWhenNull="true">
					<reportElement x="384" y="0" width="60" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hosp_amt_subtot}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="444" y="0" width="60" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hosp_adv_subtot}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="504" y="0" width="60" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hosp_due_subtot}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="564" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{phar_amt_subtot}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="614" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{phar_adv_subtot}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="664" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{phar_due_subtot}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="0" y="0" width="384" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{ward_name}==null?"Sub Total :":$F{ward_name}+" Sub Total : "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="714" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" pdfFontName="Helvetica"/>	
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{deposit_sub_total}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="75">
			<staticText>
				<reportElement x="0" y="0" width="802" height="35"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="18"/>
				</textElement>
				<text><![CDATA[IP Outstanding Detailed Report]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="35" width="384" height="13"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<text><![CDATA[Report as of : ]]></text>
			</staticText>
			<textField pattern="dd-MM-yyyy HH:mm:ss" isBlankWhenNull="true">
				<reportElement x="384" y="35" width="418" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="48" width="397" height="18" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[Boolean.valueOf($P{tpaDisplayName}!=null && !$P{tpaDisplayName}.equals(""))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="10" isBold="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[TPA Name: ]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="397" y="48" width="405" height="18" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[Boolean.valueOf($P{tpaDisplayName}!=null && !$P{tpaDisplayName}.equals(""))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10" isBold="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" "+$P{tpaDisplayName}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="60" width="397" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[Boolean.valueOf($P{centerName}!=null && !$P{centerName}.equals(""))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="10" isBold="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Center Name: ]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="397" y="60" width="405" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[Boolean.valueOf($P{centerName}!=null && !$P{centerName}.equals(""))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10" isBold="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" "+$P{centerName}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="36">
			<staticText>
				<reportElement x="0" y="16" width="60" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[MR No]]></text>
			</staticText>
			<staticText>
				<reportElement x="60" y="16" width="160" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Patient Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="220" y="16" width="60" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Bill No]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="16" width="60" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<staticText>
				<reportElement stretchType="RelativeToBandHeight" x="444" y="16" width="60" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Advance]]></text>
			</staticText>
			<staticText>
				<reportElement x="564" y="16" width="50" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<staticText>
				<reportElement stretchType="RelativeToBandHeight" x="714" y="0" width="50" height="36"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Deposit Setoff]]></text>
			</staticText>
			<staticText>
				<reportElement x="504" y="16" width="60" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Due]]></text>
			</staticText>
			<staticText>
				<reportElement stretchType="RelativeToBandHeight" x="664" y="16" width="50" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Due]]></text>
			</staticText>
			<staticText>
				<reportElement x="280" y="16" width="104" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Bed Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="564" height="36"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top"/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="564" y="0" width="150" height="36"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top"/>
				<text><![CDATA[Pharmacy]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="0" width="180" height="16"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Hospital]]></text>
			</staticText>
			<staticText>
				<reportElement stretchType="RelativeToBandHeight" x="614" y="16" width="50" height="20"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Advance]]></text>
			</staticText>
			<staticText>
				<reportElement stretchType="RelativeToBandHeight" x="764" y="0" width="38" height="36"/>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[TPA]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="15">
			<textField isBlankWhenNull="true">
				<reportElement x="220" y="0" width="60" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{bill_no}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="0" width="60" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{mr_no}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="60" y="0" width="160" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{patient_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="384" y="0" width="60" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{hospital_amt}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
				<reportElement x="444" y="0" width="60" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{hospital_advance}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="564" y="0" width="50" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{pharmacy_amt}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="614" y="0" width="50" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{pharmacy_advance}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="504" y="0" width="60" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{hospital_due}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="664" y="0" width="50" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{pharmacy_due}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="280" y="0" width="104" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{bystander_bed_name} == null) ? $F{bed_name} : $F{bed_name} + "\n(Bystander: " + $F{bystander_bed_name} + ")"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="714" y="0" width="50" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{deposit_set_off}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="764" y="0" width="38" height="15"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="Helvetica"/>	
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{tpa_status}.equals("A") ? "YES" : "NO"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band/>
	</summary>
	<noData>
		<band height="50">
			<staticText>
				<reportElement x="102" y="13" width="500" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14"/>
				</textElement>
				<text><![CDATA[No data  was found for the given search range.]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
