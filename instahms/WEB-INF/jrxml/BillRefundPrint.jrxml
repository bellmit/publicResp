<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Receipt" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="515" leftMargin="50" rightMargin="30" topMargin="100" bottomMargin="15" scriptletClass="com.insta.hms.common.JRCommonScriptlet">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="receiptNo" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["RF000013"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<parameter name="printUserName" class="java.lang.String" isForPrompting="false"/>
	<parameter name="currencySymbol" class="java.lang.String"/>
	<parameter name="center_id" class="java.lang.Integer" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT r.*,r.tds_amount AS tds_amt, br.*, b.total_receipts, b.visit_id, b.is_tpa
		pm.payment_mode, pm.bank_required, pm.ref_required, ctm.card_type
 FROM receipts r JOIN bill_receipts br ON r.receipt_id = br.receipt_no
  JOIN bill b USING (bill_no)
  LEFT JOIN payment_mode_master pm ON (r.payment_mode_id = pm.mode_id)
  LEFT JOIN card_type_master ctm ON (r.card_type_id = ctm.card_type_id)
 WHERE receipt_no = $P{receiptNo} and payment_type='F']]>
	</queryString>
	<field name="is_tpa" class="java.lang.Boolean"/>
	<field name="receipt_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bill_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="refund_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="amount" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="display_date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="counter" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="payment_mode" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bank_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="reference_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="username" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="remarks" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_receipts" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="visit_id" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="card_type" class="java.lang.String"/>
	<field name="bank_required" class="java.lang.String"/>
	<field name="ref_required" class="java.lang.String"/>
	<group name="patientHeader">
		<groupHeader>
			<band height="88">
				<subreport isUsingCache="true">
					<reportElement key="subreport-6" x="0" y="25" width="515" height="63"/>
					<subreportParameter name="label_1">
						<subreportParameterExpression><![CDATA["Voucher No.:"]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="label_2">
						<subreportParameterExpression><![CDATA["Refund Date:"]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="value_1">
						<subreportParameterExpression><![CDATA[$P{receiptNo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="value_2">
						<subreportParameterExpression><![CDATA[(new SimpleDateFormat("dd-MM-yyyy")).format($F{display_date})]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="patientid">
						<subreportParameterExpression><![CDATA[$F{visit_id}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="showInsurance">
						<subreportParameterExpression><![CDATA[$F{is_tpa}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/GeneralPatientDetails.jasper"]]></subreportExpression>
				</subreport>
				<staticText>
					<reportElement key="staticText-1" x="0" y="0" width="515" height="25"/>
					<box>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="14" isBold="true" isUnderline="false" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[REFUND VOUCHER]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<group name="advance">
		<groupExpression><![CDATA[]]></groupExpression>
		<groupHeader>
			<band height="210">
				<staticText>
					<reportElement key="staticText-18" x="415" y="130" width="100" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Patient Signature]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-32" x="0" y="22" width="93" height="15" isRemoveLineWhenBlank="true"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Mode Of Payment:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-14" x="93" y="22" width="90" height="15" isRemoveLineWhenBlank="true"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{payment_mode}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-41" x="2" y="39" width="30" height="15" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[new Boolean(!$F{bank_required}.equalsIgnoreCase("N" ))]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Bank:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-19" x="32" y="39" width="82" height="15" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[new Boolean(!$F{bank_required}.equalsIgnoreCase("N" ))]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{bank_name}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-43" x="1" y="60" width="92" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Against Bill No:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-20" x="93" y="60" width="90" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{bill_no}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-45" x="125" y="39" width="53" height="15" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[new Boolean(!$F{ref_required}.equalsIgnoreCase("N" ))]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Reference:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-21" x="178" y="39" width="167" height="15" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[new Boolean(!$F{ref_required}.equalsIgnoreCase("N" ))]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{reference_no}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-48" x="0" y="7" width="93" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Justified" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Refunded Amount]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-24" x="93" y="7" width="90" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{amount}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-50" x="183" y="60" width="188" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Net deposits against this bill:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-25" x="371" y="60" width="53" height="15" isRemoveLineWhenBlank="true"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{total_receipts}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-52" x="1" y="75" width="93" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Justified" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Narration:]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-26" x="94" y="75" width="423" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Justified" verticalAlignment="Middle">
						<font size="10" isUnderline="false"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{remarks}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false">
					<reportElement key="textField-11" x="58" y="102" width="457" height="15"/>
					<textElement verticalAlignment="Bottom">
						<font size="10" isItalic="true" pdfFontName="Helvetica-Oblique"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$P{REPORT_SCRIPTLET}.toWords($F{amount}) + " only"]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="3" width="515" height="1" forecolor="#808080"/>
				</line>
				<staticText>
					<reportElement key="staticText-52" x="1" y="102" width="57" height="15"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Justified" verticalAlignment="Middle">
						<font size="10" isBold="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[Received]]></text>
				</staticText>
				<staticText>
					<reportElement x="1" y="133" width="100" height="15"/>
					<textElement textAlignment="Center"/>
					<text><![CDATA[Refunded By ]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="1" y="148" width="101" height="13">
						<printWhenExpression><![CDATA[$P{printUserName}.equals( "Y" )?Boolean.TRUE:Boolean.FALSE]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Center"/>
					<textFieldExpression class="java.lang.String"><![CDATA["(" +" "+$F{username}+" " + ")"]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="202" y="22" width="59" height="15"/>
					<textElement/>
					<text><![CDATA[Card Type:]]></text>
				</staticText>
				<textField>
					<reportElement x="262" y="22" width="100" height="15"/>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{card_type}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band height="17">
			<subreport isUsingCache="true">
				<reportElement key="subreport-1" x="-50" y="-100" width="595" height="110"/>
				<subreportParameter name="type">
					<subreportParameterExpression><![CDATA["Bill"]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="center_id">
					<subreportParameterExpression><![CDATA[$P{center_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR}+"/PrintmasterHeader.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</pageHeader>
	<columnHeader>
		<band/>
	</columnHeader>
	<detail>
		<band/>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band height="20">
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="287" y="1" width="170" height="19"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page " + $V{PAGE_NUMBER} + " of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="457" y="1" width="58" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="CP1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["   " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
