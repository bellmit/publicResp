<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="GeneralPatientDetails" pageWidth="510" pageHeight="842" columnWidth="510" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="patientid" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["OPNO0059"]]></defaultValueExpression>
	</parameter>
	<parameter name="packname" class="java.lang.String" isForPrompting="false"/>
	<parameter name="label_1" class="java.lang.String" isForPrompting="false"/>
	<parameter name="value_1" class="java.lang.String" isForPrompting="false"/>
	<parameter name="label_2" class="java.lang.String" isForPrompting="false"/>
	<parameter name="value_2" class="java.lang.String" isForPrompting="false"/>
	<parameter name="insuranceId" class="java.lang.Integer" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT pd.mr_no, sm.salutation, pd.patient_name, pd.last_name, pd.patient_gender,
 pd.patient_address, c.city_name, stm.state_name,
 get_patient_age(pd.dateofbirth, pd.expected_dob) as patient_age,
 get_patient_age_in(pd.dateofbirth, pd.expected_dob) as patient_age_in,
 pr.patient_id, pr.reg_date, pr.reg_time, pr.visit_type, pr.discharge_date, pr.discharge_time,
 dep.dept_name, doc.doctor_name, od.org_name, tpa.tpa_name,
 pr.bed_type as bill_bed_type, wn.ward_name as reg_ward_name, bn.bed_name as alloc_bed_name, wn.ward_name as alloc_ward_name,
 rdoc.doctor_name as referred_by, rf.referal_name as other_referal,
 dtm.discharge_type, COALESCE(ma.activation_status, 'N') as ips_active

FROM patient_registration pr
 JOIN patient_details pd ON (pr.mr_no=pd.mr_no)
 JOIN salutation_master sm ON (sm.salutation_id=pd.salutation)
 JOIN city c ON (c.city_id=pd.patient_city)
 JOIN state_master stm ON (stm.state_id=pd.patient_state)
 JOIN department dep ON (dep.dept_id=COALESCE(pr.dept_name,'DEP0007'))
 LEFT JOIN doctors doc ON (doc.doctor_id=pr.doctor)
 LEFT JOIN organization_details OD ON (pr.org_id=od.org_id)
 LEFT JOIN tpa_master tpa ON (pr.primary_sponsor_id=tpa.tpa_id)
 LEFT JOIN doctors rdoc ON (rdoc.doctor_id=pr.reference_docto_id)
 LEFT JOIN discharge_type_master dtm ON(pr.discharge_type_id = dtm.discharge_type_id)
 LEFT JOIN referral rf ON (rf.referal_no=pr.reference_docto_id)
 LEFT JOIN ip_bed_details ibd on (ibd.patient_id=pr.patient_id ) AND (ibd.status='A' or ibd.status='C')
 LEFT JOIN bed_names bn on (bn.bed_id=ibd.bed_id)
 LEFT JOIN ward_names wn on (wn.ward_no=bn.ward_no)
 LEFT JOIN modules_activated ma ON module_id = 'mod_ipservices'
WHERE pr.patient_id = $P{patientid}
]]>
	</queryString>
	<field name="mr_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="salutation" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="last_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_gender" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_address" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="city_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="state_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_age" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_age_in" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="patient_id" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="reg_date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="reg_time" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="visit_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="discharge_date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="discharge_time" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dept_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="doctor_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="org_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tpa_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bill_bed_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="reg_ward_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="alloc_bed_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="alloc_ward_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="referred_by" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="other_referal" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="discharge_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ips_active" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band/>
	</background>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<columnHeader>
		<band/>
	</columnHeader>
	<detail>
		<band height="52">
			<staticText>
				<reportElement key="staticText-3" mode="Transparent" x="0" y="0" width="63" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Name:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement key="textField" x="63" y="0" width="369" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{salutation}==null?"": $F{salutation})+ " " + $F{patient_name} + " " +
($F{last_name}==null?"":$F{last_name})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-3" x="0" y="13" width="63" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Age/Gender:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-6" x="63" y="13" width="265" height="13">
					<printWhenExpression><![CDATA[new Boolean($F{visit_type}!=null)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{patient_age} +
 ($F{patient_age_in}.equals("M") ? " Months" :
  $F{patient_age_in}.equals("D") ? " Days" : "Years")
+ "/" +
 $F{patient_gender}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-5" x="0" y="26" width="63" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Address:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement key="textField" x="63" y="26" width="265" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{patient_address}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="328" y="26" width="83" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[MR No:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" x="411" y="26" width="99" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{mr_no}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-6" x="63" y="39" width="265" height="13"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{city_name}==null?"":$F{city_name}) + " " +
($F{state_name}==null?"":","+$F{state_name})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-3" x="328" y="0" width="0" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{label_1}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" x="411" y="0" width="99" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{value_1}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-3" x="328" y="13" width="83" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{label_2}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" x="411" y="13" width="99" height="13"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{value_2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="39" width="63" height="13"/>
				<textElement verticalAlignment="Bottom"/>
				<text><![CDATA[Location:]]></text>
			</staticText>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
