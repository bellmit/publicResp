<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="595" pageHeight="842" whenNoDataType="NoDataSection" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="40" bottomMargin="40">
	<parameter name="doctoridArray" class="java.lang.String[]">
		<defaultValueExpression><![CDATA[new String[]{}]]></defaultValueExpression>
	</parameter>
	<parameter name="medicineidArray" class="java.lang.String[]">
		<defaultValueExpression><![CDATA[new String[]{}]]></defaultValueExpression>
	</parameter>
	<parameter name="fromDate" class="java.util.Date" isForPrompting="false"/>
	<parameter name="toDate" class="java.util.Date" isForPrompting="false"/>
	<queryString>
		<![CDATA[select  doctor_name,medicine_name,quantity,amount from pharmacy_medicine_sales_main pmsm
join pharmacy_medicine_sales pms using (sale_id)
join pharmacy_medicine_details pmd using(medicine_id)
where date(sale_date) between $P{fromDate} and $P{toDate}
AND $X{IN,doctor_name,doctoridArray}
AND $X{IN,medicine_id,medicineidArray}]]>
	</queryString>
	<field name="doctor_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="medicine_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="quantity" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="amount" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="quantot" class="java.math.BigDecimal" resetType="Group" resetGroup="doctorName" calculation="Sum">
		<variableExpression><![CDATA[$F{quantity}]]></variableExpression>
	</variable>
	<variable name="amoutot" class="java.math.BigDecimal" resetType="Group" resetGroup="doctorName" calculation="Sum">
		<variableExpression><![CDATA[$F{amount}]]></variableExpression>
	</variable>
	<variable name="total" class="java.lang.String" resetType="Group" resetGroup="doctorName"/>
	<group name="doctorName">
		<groupExpression><![CDATA[$F{doctor_name}]]></groupExpression>
		<groupHeader>
			<band height="18">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="157" y="0" width="100" height="18"/>
					<textElement>
						<font isBold="false"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{doctor_name}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="57" y="0" width="100" height="18"/>
					<textElement>
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Doctor Name:]]></text>
				</staticText>
				<line>
					<reportElement x="46" y="17" width="211" height="1"/>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="18">
				<textField>
					<reportElement x="309" y="0" width="100" height="16"/>
					<textElement/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{quantot}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="455" y="0" width="100" height="16"/>
					<textElement/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{amoutot}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="180" y="0" width="100" height="16"/>
					<textElement>
						<font size="12" isBold="true" isPdfEmbedded="false"/>
					</textElement>
					<text><![CDATA[Total:]]></text>
				</staticText>
				<line>
					<reportElement x="178" y="0" width="340" height="1"/>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="20">
			<staticText>
				<reportElement x="11" y="0" width="544" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Pharmacy Doctor&Medicine Wise Sales Details Report]]></text>
			</staticText>
			<line>
				<reportElement x="46" y="18" width="472" height="1"/>
			</line>
		</band>
	</title>
	<pageHeader>
		<band height="15">
			<textField pattern="dd/MM/yyyy">
				<reportElement x="146" y="0" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$P{fromDate}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="332" y="0" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$P{toDate}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="20">
			<staticText>
				<reportElement x="157" y="0" width="123" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Medicine Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="309" y="0" width="100" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Quantity]]></text>
			</staticText>
			<staticText>
				<reportElement x="455" y="0" width="100" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<line>
				<reportElement x="46" y="19" width="472" height="1"/>
			</line>
			<staticText>
				<reportElement x="46" y="0" width="100" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Sl.no]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="18">
			<textField>
				<reportElement x="157" y="0" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{medicine_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="309" y="0" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{quantity}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement x="455" y="0" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{amount}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="46" y="0" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<noData>
		<band height="43">
			<staticText>
				<reportElement x="180" y="0" width="163" height="21"/>
				<textElement>
					<font size="14" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[No Data in given Dates]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
