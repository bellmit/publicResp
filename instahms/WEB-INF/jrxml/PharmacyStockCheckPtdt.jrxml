<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
name="StoresopencloseMovement" scriptletClass="com.insta.hms.common.JRCommonScriptlet"
pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="782" leftMargin="30" rightMargin="30" topMargin="40" bottomMargin="40">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="fromDateTime" class="java.sql.Timestamp" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="toDateTime" class="java.sql.Timestamp" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="chkId" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="chkPointFrom" class="java.lang.String" isForPrompting="false"/>
	<parameter name="reportQuery" class="java.lang.String"/>
	<parameter name="chkIdTo" class="java.lang.String"/>
	<parameter name="chkIdFrom" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="chkPointTo" class="java.lang.String"/>
	<parameter name="store" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT dept_name, medicine_name,
          COALESCE(sum(sale_qty),0) as sales, COALESCE(sum(sale_return_qty),0) as returns,
	  COALESCE(sum(purchase_qty),0) as purchase,
	  COALESCE(sum(issue_out_qty),0) as issue_out, COALESCE(sum(issue_in_qty),0) as issue_in,
	  COALESCE(sum(adj_dec_qty),0) as adj_dec, COALESCE(sum(adj_incr_qty),0) as adj_inc,COALESCE(sum(current_stock),0) as cstock,
	  COALESCE(sum(return_stock),0) as supreturns,
  	  COALESCE(sum(open_stock),0) as openstock,COALESCE(sum(mrp),0) as mrp, COALESCE(sum(cost),0) as cost, COALESCE(sum(replaced_stock),0) as replaced_stock,
          COALESCE(sum(debit_qty),0) as debit_qty,
          COALESCE(sum(reagent_qty),0) as reagent_qty,
	  COALESCE(sum(user_issue_out_qty),0) as userissue_out_qty,
	  COALESCE(sum(user_issue_in_qty),0) as userissue_in_qty


FROM (

	SELECT store_id, medicine_id,
		CASE WHEN sm.type='S' THEN sum(quantity) ELSE 0 END as sale_qty,
		CASE WHEN sm.type='R' THEN sum(quantity) ELSE 0 END as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty, 0 as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM store_sales_details s
	JOIN store_sales_main sm using(sale_id)
	WHERE sm.sale_date between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY sm.type, sm.store_id, s.medicine_id

	UNION ALL
	SELECT store_id, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
		CASE WHEN gm.debit_note_no IS  NULL THEN sum(g.billed_qty + g.bonus_qty) ELSE 0 END as purchase_qty,
		 0 as issue_out_qty, 0 as issue_in_qty,
		   0 as adj_dec_qty, 0 as adj_incr_qty,
		   0 as current_stock,
		0 as return_stock,
		 0 as open_stock,
		   0 as mrp, 0 as cost, 0 as replaced_stock,
	   	CASE WHEN gm.debit_note_no IS  NOT NULL THEN sum(g.billed_qty + g.bonus_qty) ELSE 0 END as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM store_grn_details g
	JOIN store_grn_main gm USING (grn_no)
	JOIN store_item_details m using(medicine_id)
	WHERE grn_date between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY gm.debit_note_no, store_id, medicine_id

	UNION ALL
	SELECT store_from, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  sum(s.qty-s.qty_rejected) as issue_out_qty,
          0 as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
	  0 as user_issue_in_qty
  	FROM store_transfer_details s
  	JOIN store_transfer_main sm using(transfer_no)
	WHERE sm.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY  store_from, medicine_id

	UNION ALL
	SELECT store_to, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty,
          sum(s.qty-s.qty_rejected) as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM store_transfer_details s
	JOIN store_transfer_main sm using(transfer_no)
	WHERE sm.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY store_to, medicine_id

	UNION ALL
	SELECT store_id, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty,
	  0 as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          sum(srd.qty) as reagent_qty,
          0 as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM store_reagent_usage_details srd
	JOIN store_reagent_usage_main srm using(reagent_usage_seq)
	WHERE srm.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY store_id, medicine_id

	UNION ALL
	SELECT dept_from, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty,
	  0 as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
          sum(sid.qty) as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM stock_issue_details sid
	JOIN stock_issue_main sim using(user_issue_no)
	WHERE sim.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY dept_from, medicine_id

	UNION ALL
	SELECT dept_to, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty,
	  0 as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
          sum(sid.qty) as user_issue_in_qty
	FROM store_issue_returns_details sid
	JOIN store_issue_returns_main sim using(user_return_no)
	WHERE sim.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY dept_to, medicine_id

	UNION ALL
	SELECT store_id, a.medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty, 0 as issue_in_qty,
	    CASE WHEN (a.type LIKE 'A-' OR a.type = 'R') THEN sum(a.qty) ELSE 0 END as adj_dec_qty,
	    CASE WHEN a.type LIKE 'A+' OR a.type = 'A' THEN sum(a.qty) ELSE 0 END as adj_incr_qty,
          0 as current_stock,
	  0 as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost, 0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM store_adj_details a
	JOIN store_adj_main am using(adj_no)
	WHERE am.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY a.type, store_id, a.medicine_id

	UNION ALL
	 SELECT store_id, pcd.medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
          0 as purchase_qty,
          0 as issue_out_qty, 0 as issue_in_qty,
          0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
          0 as return_stock,
          pcd.qty as open_stock,
 	  0 as mrp, 0 as cost,
          0 as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
          0 as user_issue_out_qty,
          0 as user_issue_in_qty
        FROM store_checkpoint_main pcm
        JOIN store_checkpoint_details pcd using(checkpoint_id)
        JOIN store_stock_details pmsd on pmsd.dept_id = pcd.store_id and pmsd.medicine_id = pcd.medicine_id and pmsd.batch_no = pcd.batch_no
        WHERE  pcd.checkpoint_id = '$P!{chkIdFrom}'


	 UNION ALL

	$P!{reportQuery}

	UNION ALL
	SELECT store_id, medicine_id,
          0 as sale_qty, 0 as sale_return_qty,
	  0 as purchase_qty,
	  0 as issue_out_qty, 0 as issue_in_qty,
	  0 as adj_dec_qty, 0 as adj_incr_qty,
          0 as current_stock,
	  sum(qty) as return_stock,
  	  0 as open_stock,
	  0 as mrp, 0 as cost,
	  sum(replaced_qty) as replaced_stock,
          0 as debit_qty,
          0 as reagent_qty,
	  0 as user_issue_out_qty,
	  0 as user_issue_in_qty
	FROM store_supplier_returns_main psm
	JOIN  store_supplier_returns ps on ps.return_no = psm.return_no and psm.orig_return_no is null
	JOIN store_item_details m using(medicine_id)
	WHERE psm.date_time between $P{fromDateTime} AND  $P{toDateTime}
	GROUP BY  store_id, medicine_id

) AS smview
JOIN store_item_details sid using (medicine_id)
JOIN stores s on (s.dept_id=smview.store_id)
where store_id::varchar = $P{store}
GROUP BY dept_name, medicine_name
ORDER BY medicine_name
;]]>
	</queryString>
	<field name="dept_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="medicine_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="sales" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="returns" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="purchase" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="issue_out" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="issue_in" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="adj_dec" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="adj_inc" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cstock" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="supreturns" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="openstock" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cost" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="mrp" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="replaced_stock" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="debit_qty" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="reagent_qty" class="java.math.BigDecimal"/>
	<field name="userissue_in_qty" class="java.math.BigDecimal"/>
	<field name="userissue_out_qty" class="java.math.BigDecimal"/>
	<variable name="group_total_mrp" class="java.math.BigDecimal" resetType="Group" resetGroup="Totals" calculation="Sum">
		<variableExpression><![CDATA[$F{mrp}]]></variableExpression>
	</variable>
	<variable name="group_total_cost" class="java.math.BigDecimal" resetType="Group" resetGroup="Totals" calculation="Sum">
		<variableExpression><![CDATA[$F{cost}]]></variableExpression>
	</variable>
	<variable name="group_total_qty" class="java.math.BigDecimal" resetType="Group" resetGroup="Totals" calculation="Sum">
		<variableExpression><![CDATA[$F{cstock}]]></variableExpression>
	</variable>
	<group name="dept_name">
		<groupExpression><![CDATA[$F{dept_name}]]></groupExpression>
		<groupHeader>
			<band height="24">
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField" x="0" y="0" width="441" height="20"/>
					<box>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="14" isBold="true" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{dept_name}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="22" width="775" height="1" forecolor="#C0C0C0" backcolor="#C0C0C0"/>
				</line>
			</band>
		</groupHeader>
	</group>
	<group name="stockmove"/>
	<group name="Totals">
		<groupExpression><![CDATA[$F{dept_name}]]></groupExpression>
		<groupFooter>
			<band height="30">
				<staticText>
					<reportElement x="588" y="5" width="36" height="20"/>
					<textElement>
						<font  size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Total :]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-5" x="665" y="6" width="56" height="13"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font  size="10" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$P{REPORT_SCRIPTLET}.decFormat($V{group_total_cost})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-5" x="625" y="6" width="38" height="13"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font  size="10" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{group_total_qty}.setScale(2,2)]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-5" x="723" y="6" width="56" height="13"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font  size="10" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$P{REPORT_SCRIPTLET}.decFormat($V{group_total_mrp})]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="91">
			<staticText>
				<reportElement key="staticText" x="118" y="5" width="545" height="30"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="24" isBold="true"/>
				</textElement>
				<text><![CDATA[Stores opening/closing Stock]]></text>
			</staticText>
			<line>
				<reportElement key="line" positionType="FixRelativeToBottom" x="0" y="35" width="775" height="1" forecolor="#000000"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<line>
				<reportElement key="line" x="0" y="3" width="775" height="1" forecolor="#000000"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<textField isStretchWithOverflow="true" pattern="dd-MM-yyyy HH:mm:ss" isBlankWhenNull="false">
				<reportElement key="textField-2" x="194" y="67" width="155" height="16"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.sql.Timestamp"><![CDATA[$P{fromDateTime}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd-MM-yyyy HH:mm:ss" isBlankWhenNull="false">
				<reportElement key="textField-3" x="373" y="67" width="197" height="16"/>
				<textElement textAlignment="Left" verticalAlignment="Middle"/>
				<textFieldExpression class="java.util.Date"><![CDATA[$P{toDateTime}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="349" y="67" width="24" height="16"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[to]]></text>
			</staticText>
			<staticText>
				<reportElement x="90" y="39" width="70" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Report for :]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="163" y="39" width="283" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{chkPointFrom}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="448" y="39" width="24" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[to]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="473" y="39" width="302" height="20"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{chkPointTo}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="7"/>
	</pageHeader>
	<columnHeader>
		<band height="35">
			<rectangle radius="0">
				<reportElement key="element-22" x="1" y="0" width="775" height="34" forecolor="#000000" backcolor="#FFFFFF"/>
				<graphicElement>
					<pen lineWidth="0.25" lineStyle="Solid"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement key="element-90" x="0" y="1" width="116" height="30" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Item]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" x="330" y="0" width="58" height="33" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Sales/Ret]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" x="388" y="0" width="65" height="32" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Issues/Ret]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" x="455" y="0" width="60" height="31" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Adj
Decr/Incr]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-91" x="570" y="0" width="53" height="31" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Net
Inc/Dec]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-92" x="162" y="0" width="54" height="31" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Pur/Debit]]></text>
			</staticText>
			<line>
				<reportElement key="line-9" x="513" y="0" width="1" height="35" forecolor="#808080"/>
			</line>
			<line>
				<reportElement key="line-10" mode="Opaque" x="452" y="0" width="1" height="34" forecolor="#808080"/>
			</line>
			<line>
				<reportElement key="line-11" x="330" y="0" width="1" height="34" forecolor="#808080"/>
			</line>
			<line>
				<reportElement key="line-15" x="162" y="0" width="1" height="34" forecolor="#808080"/>
			</line>
			<staticText>
				<reportElement x="625" y="0" width="38" height="31"/>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Closing
Stock
]]></text>
			</staticText>
			<line>
				<reportElement key="line-9" x="116" y="0" width="1" height="35" forecolor="#808080"/>
			</line>
			<staticText>
				<reportElement x="116" y="0" width="43" height="31"/>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Opening Stock
]]></text>
			</staticText>
			<staticText>
				<reportElement x="665" y="0" width="43" height="31"/>
				<textElement textAlignment="Left"/>
				<text><![CDATA[Cost Value
]]></text>
			</staticText>
			<line>
				<reportElement key="line-9" x="623" y="0" width="1" height="35" forecolor="#808080"/>
			</line>
			<line>
				<reportElement key="line-9" x="664" y="0" width="1" height="35" forecolor="#808080"/>
			</line>
			<staticText>
				<reportElement x="723" y="0" width="56" height="31"/>
				<textElement textAlignment="Left"/>
				<text><![CDATA[MRP Value
]]></text>
			</staticText>
			<line>
				<reportElement key="line-9" x="721" y="0" width="1" height="35" forecolor="#808080"/>
			</line>
			<staticText>
				<reportElement key="element-92" x="215" y="0" width="59" height="31" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Ret/Replace]]></text>
			</staticText>
			<line>
				<reportElement key="line-15" x="215" y="0" width="1" height="34" forecolor="#808080"/>
			</line>
			<line>
				<reportElement key="line-15" x="275" y="0" width="1" height="34" forecolor="#808080"/>
			</line>
			<staticText>
				<reportElement key="element-90" x="514" y="0" width="53" height="31" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Reagent usage]]></text>
			</staticText>
			<line>
				<reportElement key="line-9" x="568" y="0" width="1" height="35" forecolor="#808080"/>
			</line>
			<staticText>
				<reportElement key="element-92" x="275" y="0" width="55" height="31" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<text><![CDATA[Trns Out/In]]></text>
			</staticText>
			<line>
				<reportElement key="line-11" x="388" y="0" width="1" height="34" forecolor="#808080"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="22">
			<rectangle>
				<reportElement x="0" y="2" width="534" height="20" forecolor="#FFFFFF" backcolor="#FFFFFF">
					<printWhenExpression><![CDATA[new Boolean(($V{stockmove_COUNT}.intValue()%2) == 0)]]></printWhenExpression>
				</reportElement>
			</rectangle>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="0" y="6" width="116" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{medicine_name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="330" y="6" width="58" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(BigDecimal.ZERO.subtract($F{sales}.setScale(2,2))).toString()+" / "+(BigDecimal.ZERO.subtract($F{returns}.setScale(2,2))).toString()]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="388" y="6" width="65" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(BigDecimal.ZERO.subtract($F{userissue_out_qty}.setScale(2,2))).toString()+" / "+($F{userissue_in_qty}.setScale(2,2)).toString()]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="453" y="6" width="64" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(BigDecimal.ZERO.subtract($F{adj_dec}.setScale(2,2))).toString()+" / "+($F{adj_inc}.setScale(2,2)).toString()]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-1" x="570" y="6" width="53" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{purchase}.subtract($F{sales}).subtract($F{returns}).subtract($F{userissue_out_qty}).subtract($F{reagent_qty}).add($F{userissue_in_qty}).subtract($F{adj_dec}).add($F{adj_inc}).subtract($F{supreturns}).add($F{replaced_stock}).add($F{debit_qty}.add($F{issue_in}).subtract($F{issue_out})).setScale(2,2)]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" x="162" y="6" width="54" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{purchase}.setScale(2,2).toString()+" / "+$F{debit_qty}.setScale(2,2)]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" x="625" y="6" width="38" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{cstock}.setScale(2,2)]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#0.00" isBlankWhenNull="true">
				<reportElement key="textField-1" x="116" y="6" width="43" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{openstock}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" x="665" y="6" width="56" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{REPORT_SCRIPTLET}.decFormat($F{cost})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" x="723" y="6" width="56" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{REPORT_SCRIPTLET}.decFormat($F{mrp})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" x="215" y="6" width="59" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(BigDecimal.ZERO.subtract($F{supreturns}.setScale(2,2))).toString()+" / "+$F{replaced_stock}.setScale(2,2)]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" x="517" y="6" width="52" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{reagent_qty}.setScale(2,2)]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" x="275" y="6" width="56" height="13"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(BigDecimal.ZERO.subtract($F{issue_out}.setScale(2,2))).toString()+" / "+$F{issue_in}.setScale(2,2)]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band height="27">
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="558" y="4" width="170" height="19"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page " + $V{PAGE_NUMBER} + " of "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="732" y="4" width="36" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="CP1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement key="line" x="0" y="1" width="775" height="1" forecolor="#000000"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField" x="1" y="6" width="209" height="19"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="10" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
	<noData>
		<band height="30">
			<staticText>
				<reportElement key="staticText-2" x="279" y="9" width="217" height="17"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[No Data was found for the given criteria.]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
